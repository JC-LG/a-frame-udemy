(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=e(s);fetch(s.href,o)}})();function vy(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}function Rg(l){if(l.__esModule)return l;var t=l.default;if(typeof t=="function"){var e=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(l).forEach(function(i){var s=Object.getOwnPropertyDescriptor(l,i);Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:function(){return l[i]}})}),e}var Cu={exports:{}},Bt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yp;function Pg(){if(yp)return Bt;yp=1;var l=Symbol.for("react.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function v(R){return R===null||typeof R!="object"?null:(R=y&&R[y]||R["@@iterator"],typeof R=="function"?R:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,S={};function _(R,U,rt){this.props=R,this.context=U,this.refs=S,this.updater=rt||x}_.prototype.isReactComponent={},_.prototype.setState=function(R,U){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,U,"setState")},_.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function z(){}z.prototype=_.prototype;function H(R,U,rt){this.props=R,this.context=U,this.refs=S,this.updater=rt||x}var F=H.prototype=new z;F.constructor=H,k(F,_.prototype),F.isPureReactComponent=!0;var I=Array.isArray,O=Object.prototype.hasOwnProperty,q={current:null},G={key:!0,ref:!0,__self:!0,__source:!0};function Y(R,U,rt){var ot,st={},Q=null,ut=null;if(U!=null)for(ot in U.ref!==void 0&&(ut=U.ref),U.key!==void 0&&(Q=""+U.key),U)O.call(U,ot)&&!G.hasOwnProperty(ot)&&(st[ot]=U[ot]);var At=arguments.length-2;if(At===1)st.children=rt;else if(1<At){for(var Lt=Array(At),re=0;re<At;re++)Lt[re]=arguments[re+2];st.children=Lt}if(R&&R.defaultProps)for(ot in At=R.defaultProps,At)st[ot]===void 0&&(st[ot]=At[ot]);return{$$typeof:l,type:R,key:Q,ref:ut,props:st,_owner:q.current}}function ct(R,U){return{$$typeof:l,type:R.type,key:U,ref:R.ref,props:R.props,_owner:R._owner}}function pt(R){return typeof R=="object"&&R!==null&&R.$$typeof===l}function et(R){var U={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(rt){return U[rt]})}var ht=/\/+/g;function Tt(R,U){return typeof R=="object"&&R!==null&&R.key!=null?et(""+R.key):U.toString(36)}function Ft(R,U,rt,ot,st){var Q=typeof R;(Q==="undefined"||Q==="boolean")&&(R=null);var ut=!1;if(R===null)ut=!0;else switch(Q){case"string":case"number":ut=!0;break;case"object":switch(R.$$typeof){case l:case t:ut=!0}}if(ut)return ut=R,st=st(ut),R=ot===""?"."+Tt(ut,0):ot,I(st)?(rt="",R!=null&&(rt=R.replace(ht,"$&/")+"/"),Ft(st,U,rt,"",function(re){return re})):st!=null&&(pt(st)&&(st=ct(st,rt+(!st.key||ut&&ut.key===st.key?"":(""+st.key).replace(ht,"$&/")+"/")+R)),U.push(st)),1;if(ut=0,ot=ot===""?".":ot+":",I(R))for(var At=0;At<R.length;At++){Q=R[At];var Lt=ot+Tt(Q,At);ut+=Ft(Q,U,rt,Lt,st)}else if(Lt=v(R),typeof Lt=="function")for(R=Lt.call(R),At=0;!(Q=R.next()).done;)Q=Q.value,Lt=ot+Tt(Q,At++),ut+=Ft(Q,U,rt,Lt,st);else if(Q==="object")throw U=String(R),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.");return ut}function St(R,U,rt){if(R==null)return R;var ot=[],st=0;return Ft(R,ot,"","",function(Q){return U.call(rt,Q,st++)}),ot}function nt(R){if(R._status===-1){var U=R._result;U=U(),U.then(function(rt){(R._status===0||R._status===-1)&&(R._status=1,R._result=rt)},function(rt){(R._status===0||R._status===-1)&&(R._status=2,R._result=rt)}),R._status===-1&&(R._status=0,R._result=U)}if(R._status===1)return R._result.default;throw R._result}var wt={current:null},K={transition:null},Z={ReactCurrentDispatcher:wt,ReactCurrentBatchConfig:K,ReactCurrentOwner:q};function X(){throw Error("act(...) is not supported in production builds of React.")}return Bt.Children={map:St,forEach:function(R,U,rt){St(R,function(){U.apply(this,arguments)},rt)},count:function(R){var U=0;return St(R,function(){U++}),U},toArray:function(R){return St(R,function(U){return U})||[]},only:function(R){if(!pt(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},Bt.Component=_,Bt.Fragment=e,Bt.Profiler=s,Bt.PureComponent=H,Bt.StrictMode=i,Bt.Suspense=d,Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z,Bt.act=X,Bt.cloneElement=function(R,U,rt){if(R==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+R+".");var ot=k({},R.props),st=R.key,Q=R.ref,ut=R._owner;if(U!=null){if(U.ref!==void 0&&(Q=U.ref,ut=q.current),U.key!==void 0&&(st=""+U.key),R.type&&R.type.defaultProps)var At=R.type.defaultProps;for(Lt in U)O.call(U,Lt)&&!G.hasOwnProperty(Lt)&&(ot[Lt]=U[Lt]===void 0&&At!==void 0?At[Lt]:U[Lt])}var Lt=arguments.length-2;if(Lt===1)ot.children=rt;else if(1<Lt){At=Array(Lt);for(var re=0;re<Lt;re++)At[re]=arguments[re+2];ot.children=At}return{$$typeof:l,type:R.type,key:st,ref:Q,props:ot,_owner:ut}},Bt.createContext=function(R){return R={$$typeof:c,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},R.Provider={$$typeof:o,_context:R},R.Consumer=R},Bt.createElement=Y,Bt.createFactory=function(R){var U=Y.bind(null,R);return U.type=R,U},Bt.createRef=function(){return{current:null}},Bt.forwardRef=function(R){return{$$typeof:u,render:R}},Bt.isValidElement=pt,Bt.lazy=function(R){return{$$typeof:m,_payload:{_status:-1,_result:R},_init:nt}},Bt.memo=function(R,U){return{$$typeof:f,type:R,compare:U===void 0?null:U}},Bt.startTransition=function(R){var U=K.transition;K.transition={};try{R()}finally{K.transition=U}},Bt.unstable_act=X,Bt.useCallback=function(R,U){return wt.current.useCallback(R,U)},Bt.useContext=function(R){return wt.current.useContext(R)},Bt.useDebugValue=function(){},Bt.useDeferredValue=function(R){return wt.current.useDeferredValue(R)},Bt.useEffect=function(R,U){return wt.current.useEffect(R,U)},Bt.useId=function(){return wt.current.useId()},Bt.useImperativeHandle=function(R,U,rt){return wt.current.useImperativeHandle(R,U,rt)},Bt.useInsertionEffect=function(R,U){return wt.current.useInsertionEffect(R,U)},Bt.useLayoutEffect=function(R,U){return wt.current.useLayoutEffect(R,U)},Bt.useMemo=function(R,U){return wt.current.useMemo(R,U)},Bt.useReducer=function(R,U,rt){return wt.current.useReducer(R,U,rt)},Bt.useRef=function(R){return wt.current.useRef(R)},Bt.useState=function(R){return wt.current.useState(R)},Bt.useSyncExternalStore=function(R,U,rt){return wt.current.useSyncExternalStore(R,U,rt)},Bt.useTransition=function(){return wt.current.useTransition()},Bt.version="18.3.1",Bt}var gp;function xy(){return gp||(gp=1,Cu.exports=Pg()),Cu.exports}var Ph=xy();const It=vy(Ph);var $a={},Ru={exports:{}},Ye={},Pu={exports:{}},zu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vp;function zg(){return vp||(vp=1,function(l){function t(K,Z){var X=K.length;K.push(Z);t:for(;0<X;){var R=X-1>>>1,U=K[R];if(0<s(U,Z))K[R]=Z,K[X]=U,X=R;else break t}}function e(K){return K.length===0?null:K[0]}function i(K){if(K.length===0)return null;var Z=K[0],X=K.pop();if(X!==Z){K[0]=X;t:for(var R=0,U=K.length,rt=U>>>1;R<rt;){var ot=2*(R+1)-1,st=K[ot],Q=ot+1,ut=K[Q];if(0>s(st,X))Q<U&&0>s(ut,st)?(K[R]=ut,K[Q]=X,R=Q):(K[R]=st,K[ot]=X,R=ot);else if(Q<U&&0>s(ut,X))K[R]=ut,K[Q]=X,R=Q;else break t}}return Z}function s(K,Z){var X=K.sortIndex-Z.sortIndex;return X!==0?X:K.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;l.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();l.unstable_now=function(){return c.now()-u}}var d=[],f=[],m=1,y=null,v=3,x=!1,k=!1,S=!1,_=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function F(K){for(var Z=e(f);Z!==null;){if(Z.callback===null)i(f);else if(Z.startTime<=K)i(f),Z.sortIndex=Z.expirationTime,t(d,Z);else break;Z=e(f)}}function I(K){if(S=!1,F(K),!k)if(e(d)!==null)k=!0,nt(O);else{var Z=e(f);Z!==null&&wt(I,Z.startTime-K)}}function O(K,Z){k=!1,S&&(S=!1,z(Y),Y=-1),x=!0;var X=v;try{for(F(Z),y=e(d);y!==null&&(!(y.expirationTime>Z)||K&&!et());){var R=y.callback;if(typeof R=="function"){y.callback=null,v=y.priorityLevel;var U=R(y.expirationTime<=Z);Z=l.unstable_now(),typeof U=="function"?y.callback=U:y===e(d)&&i(d),F(Z)}else i(d);y=e(d)}if(y!==null)var rt=!0;else{var ot=e(f);ot!==null&&wt(I,ot.startTime-Z),rt=!1}return rt}finally{y=null,v=X,x=!1}}var q=!1,G=null,Y=-1,ct=5,pt=-1;function et(){return!(l.unstable_now()-pt<ct)}function ht(){if(G!==null){var K=l.unstable_now();pt=K;var Z=!0;try{Z=G(!0,K)}finally{Z?Tt():(q=!1,G=null)}}else q=!1}var Tt;if(typeof H=="function")Tt=function(){H(ht)};else if(typeof MessageChannel<"u"){var Ft=new MessageChannel,St=Ft.port2;Ft.port1.onmessage=ht,Tt=function(){St.postMessage(null)}}else Tt=function(){_(ht,0)};function nt(K){G=K,q||(q=!0,Tt())}function wt(K,Z){Y=_(function(){K(l.unstable_now())},Z)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(K){K.callback=null},l.unstable_continueExecution=function(){k||x||(k=!0,nt(O))},l.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ct=0<K?Math.floor(1e3/K):5},l.unstable_getCurrentPriorityLevel=function(){return v},l.unstable_getFirstCallbackNode=function(){return e(d)},l.unstable_next=function(K){switch(v){case 1:case 2:case 3:var Z=3;break;default:Z=v}var X=v;v=Z;try{return K()}finally{v=X}},l.unstable_pauseExecution=function(){},l.unstable_requestPaint=function(){},l.unstable_runWithPriority=function(K,Z){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var X=v;v=K;try{return Z()}finally{v=X}},l.unstable_scheduleCallback=function(K,Z,X){var R=l.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?R+X:R):X=R,K){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=X+U,K={id:m++,callback:Z,priorityLevel:K,startTime:X,expirationTime:U,sortIndex:-1},X>R?(K.sortIndex=X,t(f,K),e(d)===null&&K===e(f)&&(S?(z(Y),Y=-1):S=!0,wt(I,X-R))):(K.sortIndex=U,t(d,K),k||x||(k=!0,nt(O))),K},l.unstable_shouldYield=et,l.unstable_wrapCallback=function(K){var Z=v;return function(){var X=v;v=Z;try{return K.apply(this,arguments)}finally{v=X}}}}(zu)),zu}var xp;function Ng(){return xp||(xp=1,Pu.exports=zg()),Pu.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wp;function Fg(){if(wp)return Ye;wp=1;var l=xy(),t=Ng();function e(n){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,s={};function o(n,r){c(n,r),c(n+"Capture",r)}function c(n,r){for(s[n]=r,n=0;n<r.length;n++)i.add(r[n])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},y={};function v(n){return d.call(y,n)?!0:d.call(m,n)?!1:f.test(n)?y[n]=!0:(m[n]=!0,!1)}function x(n,r,a,h){if(a!==null&&a.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return h?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function k(n,r,a,h){if(r===null||typeof r>"u"||x(n,r,a,h))return!0;if(h)return!1;if(a!==null)switch(a.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function S(n,r,a,h,p,g,M){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=h,this.attributeNamespace=p,this.mustUseProperty=a,this.propertyName=n,this.type=r,this.sanitizeURL=g,this.removeEmptyString=M}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){_[n]=new S(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var r=n[0];_[r]=new S(r,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){_[n]=new S(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){_[n]=new S(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){_[n]=new S(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){_[n]=new S(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){_[n]=new S(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){_[n]=new S(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){_[n]=new S(n,5,!1,n.toLowerCase(),null,!1,!1)});var z=/[\-:]([a-z])/g;function H(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var r=n.replace(z,H);_[r]=new S(r,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var r=n.replace(z,H);_[r]=new S(r,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var r=n.replace(z,H);_[r]=new S(r,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){_[n]=new S(n,1,!1,n.toLowerCase(),null,!1,!1)}),_.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){_[n]=new S(n,1,!1,n.toLowerCase(),null,!0,!0)});function F(n,r,a,h){var p=_.hasOwnProperty(r)?_[r]:null;(p!==null?p.type!==0:h||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(k(r,a,p,h)&&(a=null),h||p===null?v(r)&&(a===null?n.removeAttribute(r):n.setAttribute(r,""+a)):p.mustUseProperty?n[p.propertyName]=a===null?p.type===3?!1:"":a:(r=p.attributeName,h=p.attributeNamespace,a===null?n.removeAttribute(r):(p=p.type,a=p===3||p===4&&a===!0?"":""+a,h?n.setAttributeNS(h,r,a):n.setAttribute(r,a))))}var I=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,O=Symbol.for("react.element"),q=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),ct=Symbol.for("react.profiler"),pt=Symbol.for("react.provider"),et=Symbol.for("react.context"),ht=Symbol.for("react.forward_ref"),Tt=Symbol.for("react.suspense"),Ft=Symbol.for("react.suspense_list"),St=Symbol.for("react.memo"),nt=Symbol.for("react.lazy"),wt=Symbol.for("react.offscreen"),K=Symbol.iterator;function Z(n){return n===null||typeof n!="object"?null:(n=K&&n[K]||n["@@iterator"],typeof n=="function"?n:null)}var X=Object.assign,R;function U(n){if(R===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);R=r&&r[1]||""}return`
`+R+n}var rt=!1;function ot(n,r){if(!n||rt)return"";rt=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(j){var h=j}Reflect.construct(n,[],r)}else{try{r.call()}catch(j){h=j}n.call(r.prototype)}else{try{throw Error()}catch(j){h=j}n()}}catch(j){if(j&&h&&typeof j.stack=="string"){for(var p=j.stack.split(`
`),g=h.stack.split(`
`),M=p.length-1,C=g.length-1;1<=M&&0<=C&&p[M]!==g[C];)C--;for(;1<=M&&0<=C;M--,C--)if(p[M]!==g[C]){if(M!==1||C!==1)do if(M--,C--,0>C||p[M]!==g[C]){var P=`
`+p[M].replace(" at new "," at ");return n.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",n.displayName)),P}while(1<=M&&0<=C);break}}}finally{rt=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?U(n):""}function st(n){switch(n.tag){case 5:return U(n.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return n=ot(n.type,!1),n;case 11:return n=ot(n.type.render,!1),n;case 1:return n=ot(n.type,!0),n;default:return""}}function Q(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case G:return"Fragment";case q:return"Portal";case ct:return"Profiler";case Y:return"StrictMode";case Tt:return"Suspense";case Ft:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case et:return(n.displayName||"Context")+".Consumer";case pt:return(n._context.displayName||"Context")+".Provider";case ht:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case St:return r=n.displayName||null,r!==null?r:Q(n.type)||"Memo";case nt:r=n._payload,n=n._init;try{return Q(n(r))}catch{}}return null}function ut(n){var r=n.type;switch(n.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=r.render,n=n.displayName||n.name||"",r.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Q(r);case 8:return r===Y?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function At(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Lt(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function re(n){var r=Lt(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),h=""+n[r];if(!n.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var p=a.get,g=a.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return p.call(this)},set:function(M){h=""+M,g.call(this,M)}}),Object.defineProperty(n,r,{enumerable:a.enumerable}),{getValue:function(){return h},setValue:function(M){h=""+M},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Bn(n){n._valueTracker||(n._valueTracker=re(n))}function Hi(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var a=r.getValue(),h="";return n&&(h=Lt(n)?n.checked?"true":"false":n.value),n=h,n!==a?(r.setValue(n),!0):!1}function Vn(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function xs(n,r){var a=r.checked;return X({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function zo(n,r){var a=r.defaultValue==null?"":r.defaultValue,h=r.checked!=null?r.checked:r.defaultChecked;a=At(r.value!=null?r.value:a),n._wrapperState={initialChecked:h,initialValue:a,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function ws(n,r){r=r.checked,r!=null&&F(n,"checked",r,!1)}function gr(n,r){ws(n,r);var a=At(r.value),h=r.type;if(a!=null)h==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(h==="submit"||h==="reset"){n.removeAttribute("value");return}r.hasOwnProperty("value")?Es(n,r.type,a):r.hasOwnProperty("defaultValue")&&Es(n,r.type,At(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(n.defaultChecked=!!r.defaultChecked)}function No(n,r,a){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var h=r.type;if(!(h!=="submit"&&h!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+n._wrapperState.initialValue,a||r===n.value||(n.value=r),n.defaultValue=r}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function Es(n,r,a){(r!=="number"||Vn(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var si=Array.isArray;function oi(n,r,a,h){if(n=n.options,r){r={};for(var p=0;p<a.length;p++)r["$"+a[p]]=!0;for(a=0;a<n.length;a++)p=r.hasOwnProperty("$"+n[a].value),n[a].selected!==p&&(n[a].selected=p),p&&h&&(n[a].defaultSelected=!0)}else{for(a=""+At(a),r=null,p=0;p<n.length;p++){if(n[p].value===a){n[p].selected=!0,h&&(n[p].defaultSelected=!0);return}r!==null||n[p].disabled||(r=n[p])}r!==null&&(r.selected=!0)}}function vr(n,r){if(r.dangerouslySetInnerHTML!=null)throw Error(e(91));return X({},r,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function ks(n,r){var a=r.value;if(a==null){if(a=r.children,r=r.defaultValue,a!=null){if(r!=null)throw Error(e(92));if(si(a)){if(1<a.length)throw Error(e(93));a=a[0]}r=a}r==null&&(r=""),a=r}n._wrapperState={initialValue:At(a)}}function Fo(n,r){var a=At(r.value),h=At(r.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),r.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),h!=null&&(n.defaultValue=""+h)}function Lo(n){var r=n.textContent;r===n._wrapperState.initialValue&&r!==""&&r!==null&&(n.value=r)}function Io(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xr(n,r){return n==null||n==="http://www.w3.org/1999/xhtml"?Io(r):n==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var wr,Do=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,a,h,p){MSApp.execUnsafeLocalFunction(function(){return n(r,a,h,p)})}:n}(function(n,r){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=r;else{for(wr=wr||document.createElement("div"),wr.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=wr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;r.firstChild;)n.appendChild(r.firstChild)}});function Ui(n,r){if(r){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=r;return}}n.textContent=r}var Wi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ql=["Webkit","ms","Moz","O"];Object.keys(Wi).forEach(function(n){ql.forEach(function(r){r=r+n.charAt(0).toUpperCase()+n.substring(1),Wi[r]=Wi[n]})});function Ms(n,r,a){return r==null||typeof r=="boolean"||r===""?"":a||typeof r!="number"||r===0||Wi.hasOwnProperty(n)&&Wi[n]?(""+r).trim():r+"px"}function Oo(n,r){n=n.style;for(var a in r)if(r.hasOwnProperty(a)){var h=a.indexOf("--")===0,p=Ms(a,r[a],h);a==="float"&&(a="cssFloat"),h?n.setProperty(a,p):n[a]=p}}var Kl=X({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bs(n,r){if(r){if(Kl[n]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(e(137,n));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(e(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(e(61))}if(r.style!=null&&typeof r.style!="object")throw Error(e(62))}}function Ss(n,r){if(n.indexOf("-")===-1)return typeof r.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Er=null;function As(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ts=null,Rn=null,ai=null;function Bo(n){if(n=Xs(n)){if(typeof Ts!="function")throw Error(e(280));var r=n.stateNode;r&&(r=pa(r),Ts(n.stateNode,n.type,r))}}function Vo(n){Rn?ai?ai.push(n):ai=[n]:Rn=n}function jo(){if(Rn){var n=Rn,r=ai;if(ai=Rn=null,Bo(n),r)for(n=0;n<r.length;n++)Bo(r[n])}}function _s(n,r){return n(r)}function Ho(){}var De=!1;function Cs(n,r,a){if(De)return n(r,a);De=!0;try{return _s(n,r,a)}finally{De=!1,(Rn!==null||ai!==null)&&(Ho(),jo())}}function Gi(n,r){var a=n.stateNode;if(a===null)return null;var h=pa(a);if(h===null)return null;a=h[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(n=n.type,h=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!h;break t;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(e(231,r,typeof a));return a}var Rs=!1;if(u)try{var qi={};Object.defineProperty(qi,"passive",{get:function(){Rs=!0}}),window.addEventListener("test",qi,qi),window.removeEventListener("test",qi,qi)}catch{Rs=!1}function Xl(n,r,a,h,p,g,M,C,P){var j=Array.prototype.slice.call(arguments,3);try{r.apply(a,j)}catch($){this.onError($)}}var Ki=!1,kr=null,Xi=!1,Ps=null,Uo={onError:function(n){Ki=!0,kr=n}};function Zl(n,r,a,h,p,g,M,C,P){Ki=!1,kr=null,Xl.apply(Uo,arguments)}function Yl(n,r,a,h,p,g,M,C,P){if(Zl.apply(this,arguments),Ki){if(Ki){var j=kr;Ki=!1,kr=null}else throw Error(e(198));Xi||(Xi=!0,Ps=j)}}function jn(n){var r=n,a=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,r.flags&4098&&(a=r.return),n=r.return;while(n)}return r.tag===3?a:null}function Wo(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function Go(n){if(jn(n)!==n)throw Error(e(188))}function Jl(n){var r=n.alternate;if(!r){if(r=jn(n),r===null)throw Error(e(188));return r!==n?null:n}for(var a=n,h=r;;){var p=a.return;if(p===null)break;var g=p.alternate;if(g===null){if(h=p.return,h!==null){a=h;continue}break}if(p.child===g.child){for(g=p.child;g;){if(g===a)return Go(p),n;if(g===h)return Go(p),r;g=g.sibling}throw Error(e(188))}if(a.return!==h.return)a=p,h=g;else{for(var M=!1,C=p.child;C;){if(C===a){M=!0,a=p,h=g;break}if(C===h){M=!0,h=p,a=g;break}C=C.sibling}if(!M){for(C=g.child;C;){if(C===a){M=!0,a=g,h=p;break}if(C===h){M=!0,h=g,a=p;break}C=C.sibling}if(!M)throw Error(e(189))}}if(a.alternate!==h)throw Error(e(190))}if(a.tag!==3)throw Error(e(188));return a.stateNode.current===a?n:r}function qo(n){return n=Jl(n),n!==null?Ko(n):null}function Ko(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var r=Ko(n);if(r!==null)return r;n=n.sibling}return null}var Xo=t.unstable_scheduleCallback,Zo=t.unstable_cancelCallback,Oe=t.unstable_shouldYield,li=t.unstable_requestPaint,Xt=t.unstable_now,Yo=t.unstable_getCurrentPriorityLevel,zs=t.unstable_ImmediatePriority,Ns=t.unstable_UserBlockingPriority,Mr=t.unstable_NormalPriority,Ql=t.unstable_LowPriority,Jo=t.unstable_IdlePriority,Zi=null,Qe=null;function ci(n){if(Qe&&typeof Qe.onCommitFiberRoot=="function")try{Qe.onCommitFiberRoot(Zi,n,void 0,(n.current.flags&128)===128)}catch{}}var $e=Math.clz32?Math.clz32:$o,Qo=Math.log,$l=Math.LN2;function $o(n){return n>>>=0,n===0?32:31-(Qo(n)/$l|0)|0}var br=64,Sr=4194304;function Yi(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Ji(n,r){var a=n.pendingLanes;if(a===0)return 0;var h=0,p=n.suspendedLanes,g=n.pingedLanes,M=a&268435455;if(M!==0){var C=M&~p;C!==0?h=Yi(C):(g&=M,g!==0&&(h=Yi(g)))}else M=a&~p,M!==0?h=Yi(M):g!==0&&(h=Yi(g));if(h===0)return 0;if(r!==0&&r!==h&&!(r&p)&&(p=h&-h,g=r&-r,p>=g||p===16&&(g&4194240)!==0))return r;if(h&4&&(h|=a&16),r=n.entangledLanes,r!==0)for(n=n.entanglements,r&=h;0<r;)a=31-$e(r),p=1<<a,h|=n[a],r&=~p;return h}function le(n,r){switch(n){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fs(n,r){for(var a=n.suspendedLanes,h=n.pingedLanes,p=n.expirationTimes,g=n.pendingLanes;0<g;){var M=31-$e(g),C=1<<M,P=p[M];P===-1?(!(C&a)||C&h)&&(p[M]=le(C,r)):P<=r&&(n.expiredLanes|=C),g&=~C}}function Ls(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Is(){var n=br;return br<<=1,!(br&4194240)&&(br=64),n}function Ar(n){for(var r=[],a=0;31>a;a++)r.push(n);return r}function Hn(n,r,a){n.pendingLanes|=r,r!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,r=31-$e(r),n[r]=a}function Tr(n,r){var a=n.pendingLanes&~r;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=r,n.mutableReadLanes&=r,n.entangledLanes&=r,r=n.entanglements;var h=n.eventTimes;for(n=n.expirationTimes;0<a;){var p=31-$e(a),g=1<<p;r[p]=0,h[p]=-1,n[p]=-1,a&=~g}}function ui(n,r){var a=n.entangledLanes|=r;for(n=n.entanglements;a;){var h=31-$e(a),p=1<<h;p&r|n[h]&r&&(n[h]|=r),a&=~p}}var Ht=0;function ta(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var Rt,hi,E,w,A,b=!1,T=[],V=null,W=null,ft=null,lt=new Map,dt=new Map,gt=[],tt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Et(n,r){switch(n){case"focusin":case"focusout":V=null;break;case"dragenter":case"dragleave":W=null;break;case"mouseover":case"mouseout":ft=null;break;case"pointerover":case"pointerout":lt.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":dt.delete(r.pointerId)}}function yt(n,r,a,h,p,g){return n===null||n.nativeEvent!==g?(n={blockedOn:r,domEventName:a,eventSystemFlags:h,nativeEvent:g,targetContainers:[p]},r!==null&&(r=Xs(r),r!==null&&hi(r)),n):(n.eventSystemFlags|=h,r=n.targetContainers,p!==null&&r.indexOf(p)===-1&&r.push(p),n)}function Ct(n,r,a,h,p){switch(r){case"focusin":return V=yt(V,n,r,a,h,p),!0;case"dragenter":return W=yt(W,n,r,a,h,p),!0;case"mouseover":return ft=yt(ft,n,r,a,h,p),!0;case"pointerover":var g=p.pointerId;return lt.set(g,yt(lt.get(g)||null,n,r,a,h,p)),!0;case"gotpointercapture":return g=p.pointerId,dt.set(g,yt(dt.get(g)||null,n,r,a,h,p)),!0}return!1}function _t(n){var r=Qi(n.target);if(r!==null){var a=jn(r);if(a!==null){if(r=a.tag,r===13){if(r=Wo(a),r!==null){n.blockedOn=r,A(n.priority,function(){E(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function qt(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var a=nc(n.domEventName,n.eventSystemFlags,r[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var h=new a.constructor(a.type,a);Er=h,a.target.dispatchEvent(h),Er=null}else return r=Xs(a),r!==null&&hi(r),n.blockedOn=a,!1;r.shift()}return!0}function Ut(n,r,a){qt(n)&&a.delete(r)}function Vt(){b=!1,V!==null&&qt(V)&&(V=null),W!==null&&qt(W)&&(W=null),ft!==null&&qt(ft)&&(ft=null),lt.forEach(Ut),dt.forEach(Ut)}function Ot(n,r){n.blockedOn===r&&(n.blockedOn=null,b||(b=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Vt)))}function Be(n){function r(p){return Ot(p,n)}if(0<T.length){Ot(T[0],n);for(var a=1;a<T.length;a++){var h=T[a];h.blockedOn===n&&(h.blockedOn=null)}}for(V!==null&&Ot(V,n),W!==null&&Ot(W,n),ft!==null&&Ot(ft,n),lt.forEach(r),dt.forEach(r),a=0;a<gt.length;a++)h=gt[a],h.blockedOn===n&&(h.blockedOn=null);for(;0<gt.length&&(a=gt[0],a.blockedOn===null);)_t(a),a.blockedOn===null&&gt.shift()}var ce=I.ReactCurrentBatchConfig,yn=!0;function tc(n,r,a,h){var p=Ht,g=ce.transition;ce.transition=null;try{Ht=1,ec(n,r,a,h)}finally{Ht=p,ce.transition=g}}function ea(n,r,a,h){var p=Ht,g=ce.transition;ce.transition=null;try{Ht=4,ec(n,r,a,h)}finally{Ht=p,ce.transition=g}}function ec(n,r,a,h){if(yn){var p=nc(n,r,a,h);if(p===null)xc(n,r,h,na,a),Et(n,h);else if(Ct(p,n,r,a,h))h.stopPropagation();else if(Et(n,h),r&4&&-1<tt.indexOf(n)){for(;p!==null;){var g=Xs(p);if(g!==null&&Rt(g),g=nc(n,r,a,h),g===null&&xc(n,r,h,na,a),g===p)break;p=g}p!==null&&h.stopPropagation()}else xc(n,r,h,null,a)}}var na=null;function nc(n,r,a,h){if(na=null,n=As(h),n=Qi(n),n!==null)if(r=jn(n),r===null)n=null;else if(a=r.tag,a===13){if(n=Wo(r),n!==null)return n;n=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null);return na=n,null}function ed(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Yo()){case zs:return 1;case Ns:return 4;case Mr:case Ql:return 16;case Jo:return 536870912;default:return 16}default:return 16}}var di=null,ic=null,ia=null;function nd(){if(ia)return ia;var n,r=ic,a=r.length,h,p="value"in di?di.value:di.textContent,g=p.length;for(n=0;n<a&&r[n]===p[n];n++);var M=a-n;for(h=1;h<=M&&r[a-h]===p[g-h];h++);return ia=p.slice(n,1<h?1-h:void 0)}function ra(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function sa(){return!0}function id(){return!1}function tn(n){function r(a,h,p,g,M){this._reactName=a,this._targetInst=p,this.type=h,this.nativeEvent=g,this.target=M,this.currentTarget=null;for(var C in n)n.hasOwnProperty(C)&&(a=n[C],this[C]=a?a(g):g[C]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?sa:id,this.isPropagationStopped=id,this}return X(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=sa)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=sa)},persist:function(){},isPersistent:sa}),r}var _r={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rc=tn(_r),Ds=X({},_r,{view:0,detail:0}),i0=tn(Ds),sc,oc,Os,oa=X({},Ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lc,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Os&&(Os&&n.type==="mousemove"?(sc=n.screenX-Os.screenX,oc=n.screenY-Os.screenY):oc=sc=0,Os=n),sc)},movementY:function(n){return"movementY"in n?n.movementY:oc}}),rd=tn(oa),r0=X({},oa,{dataTransfer:0}),s0=tn(r0),o0=X({},Ds,{relatedTarget:0}),ac=tn(o0),a0=X({},_r,{animationName:0,elapsedTime:0,pseudoElement:0}),l0=tn(a0),c0=X({},_r,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),u0=tn(c0),h0=X({},_r,{data:0}),sd=tn(h0),d0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},f0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},p0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function m0(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=p0[n])?!!r[n]:!1}function lc(){return m0}var y0=X({},Ds,{key:function(n){if(n.key){var r=d0[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=ra(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?f0[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lc,charCode:function(n){return n.type==="keypress"?ra(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ra(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),g0=tn(y0),v0=X({},oa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),od=tn(v0),x0=X({},Ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lc}),w0=tn(x0),E0=X({},_r,{propertyName:0,elapsedTime:0,pseudoElement:0}),k0=tn(E0),M0=X({},oa,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),b0=tn(M0),S0=[9,13,27,32],cc=u&&"CompositionEvent"in window,Bs=null;u&&"documentMode"in document&&(Bs=document.documentMode);var A0=u&&"TextEvent"in window&&!Bs,ad=u&&(!cc||Bs&&8<Bs&&11>=Bs),ld=" ",cd=!1;function ud(n,r){switch(n){case"keyup":return S0.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hd(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Cr=!1;function T0(n,r){switch(n){case"compositionend":return hd(r);case"keypress":return r.which!==32?null:(cd=!0,ld);case"textInput":return n=r.data,n===ld&&cd?null:n;default:return null}}function _0(n,r){if(Cr)return n==="compositionend"||!cc&&ud(n,r)?(n=nd(),ia=ic=di=null,Cr=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return ad&&r.locale!=="ko"?null:r.data;default:return null}}var C0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dd(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!C0[n.type]:r==="textarea"}function fd(n,r,a,h){Vo(h),r=ha(r,"onChange"),0<r.length&&(a=new rc("onChange","change",null,a,h),n.push({event:a,listeners:r}))}var Vs=null,js=null;function R0(n){Pd(n,0)}function aa(n){var r=Fr(n);if(Hi(r))return n}function P0(n,r){if(n==="change")return r}var pd=!1;if(u){var uc;if(u){var hc="oninput"in document;if(!hc){var md=document.createElement("div");md.setAttribute("oninput","return;"),hc=typeof md.oninput=="function"}uc=hc}else uc=!1;pd=uc&&(!document.documentMode||9<document.documentMode)}function yd(){Vs&&(Vs.detachEvent("onpropertychange",gd),js=Vs=null)}function gd(n){if(n.propertyName==="value"&&aa(js)){var r=[];fd(r,js,n,As(n)),Cs(R0,r)}}function z0(n,r,a){n==="focusin"?(yd(),Vs=r,js=a,Vs.attachEvent("onpropertychange",gd)):n==="focusout"&&yd()}function N0(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return aa(js)}function F0(n,r){if(n==="click")return aa(r)}function L0(n,r){if(n==="input"||n==="change")return aa(r)}function I0(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var gn=typeof Object.is=="function"?Object.is:I0;function Hs(n,r){if(gn(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var a=Object.keys(n),h=Object.keys(r);if(a.length!==h.length)return!1;for(h=0;h<a.length;h++){var p=a[h];if(!d.call(r,p)||!gn(n[p],r[p]))return!1}return!0}function vd(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function xd(n,r){var a=vd(n);n=0;for(var h;a;){if(a.nodeType===3){if(h=n+a.textContent.length,n<=r&&h>=r)return{node:a,offset:r-n};n=h}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=vd(a)}}function wd(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?wd(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function Ed(){for(var n=window,r=Vn();r instanceof n.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)n=r.contentWindow;else break;r=Vn(n.document)}return r}function dc(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}function D0(n){var r=Ed(),a=n.focusedElem,h=n.selectionRange;if(r!==a&&a&&a.ownerDocument&&wd(a.ownerDocument.documentElement,a)){if(h!==null&&dc(a)){if(r=h.start,n=h.end,n===void 0&&(n=r),"selectionStart"in a)a.selectionStart=r,a.selectionEnd=Math.min(n,a.value.length);else if(n=(r=a.ownerDocument||document)&&r.defaultView||window,n.getSelection){n=n.getSelection();var p=a.textContent.length,g=Math.min(h.start,p);h=h.end===void 0?g:Math.min(h.end,p),!n.extend&&g>h&&(p=h,h=g,g=p),p=xd(a,g);var M=xd(a,h);p&&M&&(n.rangeCount!==1||n.anchorNode!==p.node||n.anchorOffset!==p.offset||n.focusNode!==M.node||n.focusOffset!==M.offset)&&(r=r.createRange(),r.setStart(p.node,p.offset),n.removeAllRanges(),g>h?(n.addRange(r),n.extend(M.node,M.offset)):(r.setEnd(M.node,M.offset),n.addRange(r)))}}for(r=[],n=a;n=n.parentNode;)n.nodeType===1&&r.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<r.length;a++)n=r[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var O0=u&&"documentMode"in document&&11>=document.documentMode,Rr=null,fc=null,Us=null,pc=!1;function kd(n,r,a){var h=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;pc||Rr==null||Rr!==Vn(h)||(h=Rr,"selectionStart"in h&&dc(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Us&&Hs(Us,h)||(Us=h,h=ha(fc,"onSelect"),0<h.length&&(r=new rc("onSelect","select",null,r,a),n.push({event:r,listeners:h}),r.target=Rr)))}function la(n,r){var a={};return a[n.toLowerCase()]=r.toLowerCase(),a["Webkit"+n]="webkit"+r,a["Moz"+n]="moz"+r,a}var Pr={animationend:la("Animation","AnimationEnd"),animationiteration:la("Animation","AnimationIteration"),animationstart:la("Animation","AnimationStart"),transitionend:la("Transition","TransitionEnd")},mc={},Md={};u&&(Md=document.createElement("div").style,"AnimationEvent"in window||(delete Pr.animationend.animation,delete Pr.animationiteration.animation,delete Pr.animationstart.animation),"TransitionEvent"in window||delete Pr.transitionend.transition);function ca(n){if(mc[n])return mc[n];if(!Pr[n])return n;var r=Pr[n],a;for(a in r)if(r.hasOwnProperty(a)&&a in Md)return mc[n]=r[a];return n}var bd=ca("animationend"),Sd=ca("animationiteration"),Ad=ca("animationstart"),Td=ca("transitionend"),_d=new Map,Cd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fi(n,r){_d.set(n,r),o(r,[n])}for(var yc=0;yc<Cd.length;yc++){var gc=Cd[yc],B0=gc.toLowerCase(),V0=gc[0].toUpperCase()+gc.slice(1);fi(B0,"on"+V0)}fi(bd,"onAnimationEnd"),fi(Sd,"onAnimationIteration"),fi(Ad,"onAnimationStart"),fi("dblclick","onDoubleClick"),fi("focusin","onFocus"),fi("focusout","onBlur"),fi(Td,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ws="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),j0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ws));function Rd(n,r,a){var h=n.type||"unknown-event";n.currentTarget=a,Yl(h,r,void 0,n),n.currentTarget=null}function Pd(n,r){r=(r&4)!==0;for(var a=0;a<n.length;a++){var h=n[a],p=h.event;h=h.listeners;t:{var g=void 0;if(r)for(var M=h.length-1;0<=M;M--){var C=h[M],P=C.instance,j=C.currentTarget;if(C=C.listener,P!==g&&p.isPropagationStopped())break t;Rd(p,C,j),g=P}else for(M=0;M<h.length;M++){if(C=h[M],P=C.instance,j=C.currentTarget,C=C.listener,P!==g&&p.isPropagationStopped())break t;Rd(p,C,j),g=P}}}if(Xi)throw n=Ps,Xi=!1,Ps=null,n}function Zt(n,r){var a=r[Sc];a===void 0&&(a=r[Sc]=new Set);var h=n+"__bubble";a.has(h)||(zd(r,n,2,!1),a.add(h))}function vc(n,r,a){var h=0;r&&(h|=4),zd(a,n,h,r)}var ua="_reactListening"+Math.random().toString(36).slice(2);function Gs(n){if(!n[ua]){n[ua]=!0,i.forEach(function(a){a!=="selectionchange"&&(j0.has(a)||vc(a,!1,n),vc(a,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[ua]||(r[ua]=!0,vc("selectionchange",!1,r))}}function zd(n,r,a,h){switch(ed(r)){case 1:var p=tc;break;case 4:p=ea;break;default:p=ec}a=p.bind(null,r,a,n),p=void 0,!Rs||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(p=!0),h?p!==void 0?n.addEventListener(r,a,{capture:!0,passive:p}):n.addEventListener(r,a,!0):p!==void 0?n.addEventListener(r,a,{passive:p}):n.addEventListener(r,a,!1)}function xc(n,r,a,h,p){var g=h;if(!(r&1)&&!(r&2)&&h!==null)t:for(;;){if(h===null)return;var M=h.tag;if(M===3||M===4){var C=h.stateNode.containerInfo;if(C===p||C.nodeType===8&&C.parentNode===p)break;if(M===4)for(M=h.return;M!==null;){var P=M.tag;if((P===3||P===4)&&(P=M.stateNode.containerInfo,P===p||P.nodeType===8&&P.parentNode===p))return;M=M.return}for(;C!==null;){if(M=Qi(C),M===null)return;if(P=M.tag,P===5||P===6){h=g=M;continue t}C=C.parentNode}}h=h.return}Cs(function(){var j=g,$=As(a),it=[];t:{var J=_d.get(n);if(J!==void 0){var mt=rc,xt=n;switch(n){case"keypress":if(ra(a)===0)break t;case"keydown":case"keyup":mt=g0;break;case"focusin":xt="focus",mt=ac;break;case"focusout":xt="blur",mt=ac;break;case"beforeblur":case"afterblur":mt=ac;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":mt=rd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":mt=s0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":mt=w0;break;case bd:case Sd:case Ad:mt=l0;break;case Td:mt=k0;break;case"scroll":mt=i0;break;case"wheel":mt=b0;break;case"copy":case"cut":case"paste":mt=u0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":mt=od}var kt=(r&4)!==0,ue=!kt&&n==="scroll",D=kt?J!==null?J+"Capture":null:J;kt=[];for(var N=j,B;N!==null;){B=N;var at=B.stateNode;if(B.tag===5&&at!==null&&(B=at,D!==null&&(at=Gi(N,D),at!=null&&kt.push(qs(N,at,B)))),ue)break;N=N.return}0<kt.length&&(J=new mt(J,xt,null,a,$),it.push({event:J,listeners:kt}))}}if(!(r&7)){t:{if(J=n==="mouseover"||n==="pointerover",mt=n==="mouseout"||n==="pointerout",J&&a!==Er&&(xt=a.relatedTarget||a.fromElement)&&(Qi(xt)||xt[Un]))break t;if((mt||J)&&(J=$.window===$?$:(J=$.ownerDocument)?J.defaultView||J.parentWindow:window,mt?(xt=a.relatedTarget||a.toElement,mt=j,xt=xt?Qi(xt):null,xt!==null&&(ue=jn(xt),xt!==ue||xt.tag!==5&&xt.tag!==6)&&(xt=null)):(mt=null,xt=j),mt!==xt)){if(kt=rd,at="onMouseLeave",D="onMouseEnter",N="mouse",(n==="pointerout"||n==="pointerover")&&(kt=od,at="onPointerLeave",D="onPointerEnter",N="pointer"),ue=mt==null?J:Fr(mt),B=xt==null?J:Fr(xt),J=new kt(at,N+"leave",mt,a,$),J.target=ue,J.relatedTarget=B,at=null,Qi($)===j&&(kt=new kt(D,N+"enter",xt,a,$),kt.target=B,kt.relatedTarget=ue,at=kt),ue=at,mt&&xt)e:{for(kt=mt,D=xt,N=0,B=kt;B;B=zr(B))N++;for(B=0,at=D;at;at=zr(at))B++;for(;0<N-B;)kt=zr(kt),N--;for(;0<B-N;)D=zr(D),B--;for(;N--;){if(kt===D||D!==null&&kt===D.alternate)break e;kt=zr(kt),D=zr(D)}kt=null}else kt=null;mt!==null&&Nd(it,J,mt,kt,!1),xt!==null&&ue!==null&&Nd(it,ue,xt,kt,!0)}}t:{if(J=j?Fr(j):window,mt=J.nodeName&&J.nodeName.toLowerCase(),mt==="select"||mt==="input"&&J.type==="file")var bt=P0;else if(dd(J))if(pd)bt=L0;else{bt=N0;var Pt=z0}else(mt=J.nodeName)&&mt.toLowerCase()==="input"&&(J.type==="checkbox"||J.type==="radio")&&(bt=F0);if(bt&&(bt=bt(n,j))){fd(it,bt,a,$);break t}Pt&&Pt(n,J,j),n==="focusout"&&(Pt=J._wrapperState)&&Pt.controlled&&J.type==="number"&&Es(J,"number",J.value)}switch(Pt=j?Fr(j):window,n){case"focusin":(dd(Pt)||Pt.contentEditable==="true")&&(Rr=Pt,fc=j,Us=null);break;case"focusout":Us=fc=Rr=null;break;case"mousedown":pc=!0;break;case"contextmenu":case"mouseup":case"dragend":pc=!1,kd(it,a,$);break;case"selectionchange":if(O0)break;case"keydown":case"keyup":kd(it,a,$)}var zt;if(cc)t:{switch(n){case"compositionstart":var Nt="onCompositionStart";break t;case"compositionend":Nt="onCompositionEnd";break t;case"compositionupdate":Nt="onCompositionUpdate";break t}Nt=void 0}else Cr?ud(n,a)&&(Nt="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Nt="onCompositionStart");Nt&&(ad&&a.locale!=="ko"&&(Cr||Nt!=="onCompositionStart"?Nt==="onCompositionEnd"&&Cr&&(zt=nd()):(di=$,ic="value"in di?di.value:di.textContent,Cr=!0)),Pt=ha(j,Nt),0<Pt.length&&(Nt=new sd(Nt,n,null,a,$),it.push({event:Nt,listeners:Pt}),zt?Nt.data=zt:(zt=hd(a),zt!==null&&(Nt.data=zt)))),(zt=A0?T0(n,a):_0(n,a))&&(j=ha(j,"onBeforeInput"),0<j.length&&($=new sd("onBeforeInput","beforeinput",null,a,$),it.push({event:$,listeners:j}),$.data=zt))}Pd(it,r)})}function qs(n,r,a){return{instance:n,listener:r,currentTarget:a}}function ha(n,r){for(var a=r+"Capture",h=[];n!==null;){var p=n,g=p.stateNode;p.tag===5&&g!==null&&(p=g,g=Gi(n,a),g!=null&&h.unshift(qs(n,g,p)),g=Gi(n,r),g!=null&&h.push(qs(n,g,p))),n=n.return}return h}function zr(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Nd(n,r,a,h,p){for(var g=r._reactName,M=[];a!==null&&a!==h;){var C=a,P=C.alternate,j=C.stateNode;if(P!==null&&P===h)break;C.tag===5&&j!==null&&(C=j,p?(P=Gi(a,g),P!=null&&M.unshift(qs(a,P,C))):p||(P=Gi(a,g),P!=null&&M.push(qs(a,P,C)))),a=a.return}M.length!==0&&n.push({event:r,listeners:M})}var H0=/\r\n?/g,U0=/\u0000|\uFFFD/g;function Fd(n){return(typeof n=="string"?n:""+n).replace(H0,`
`).replace(U0,"")}function da(n,r,a){if(r=Fd(r),Fd(n)!==r&&a)throw Error(e(425))}function fa(){}var wc=null,Ec=null;function kc(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Mc=typeof setTimeout=="function"?setTimeout:void 0,W0=typeof clearTimeout=="function"?clearTimeout:void 0,Ld=typeof Promise=="function"?Promise:void 0,G0=typeof queueMicrotask=="function"?queueMicrotask:typeof Ld<"u"?function(n){return Ld.resolve(null).then(n).catch(q0)}:Mc;function q0(n){setTimeout(function(){throw n})}function bc(n,r){var a=r,h=0;do{var p=a.nextSibling;if(n.removeChild(a),p&&p.nodeType===8)if(a=p.data,a==="/$"){if(h===0){n.removeChild(p),Be(r);return}h--}else a!=="$"&&a!=="$?"&&a!=="$!"||h++;a=p}while(a);Be(r)}function pi(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return n}function Id(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return n;r--}else a==="/$"&&r++}n=n.previousSibling}return null}var Nr=Math.random().toString(36).slice(2),Pn="__reactFiber$"+Nr,Ks="__reactProps$"+Nr,Un="__reactContainer$"+Nr,Sc="__reactEvents$"+Nr,K0="__reactListeners$"+Nr,X0="__reactHandles$"+Nr;function Qi(n){var r=n[Pn];if(r)return r;for(var a=n.parentNode;a;){if(r=a[Un]||a[Pn]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(n=Id(n);n!==null;){if(a=n[Pn])return a;n=Id(n)}return r}n=a,a=n.parentNode}return null}function Xs(n){return n=n[Pn]||n[Un],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Fr(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(e(33))}function pa(n){return n[Ks]||null}var Ac=[],Lr=-1;function mi(n){return{current:n}}function Yt(n){0>Lr||(n.current=Ac[Lr],Ac[Lr]=null,Lr--)}function Kt(n,r){Lr++,Ac[Lr]=n.current,n.current=r}var yi={},Re=mi(yi),Ge=mi(!1),$i=yi;function Ir(n,r){var a=n.type.contextTypes;if(!a)return yi;var h=n.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===r)return h.__reactInternalMemoizedMaskedChildContext;var p={},g;for(g in a)p[g]=r[g];return h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=p),p}function qe(n){return n=n.childContextTypes,n!=null}function ma(){Yt(Ge),Yt(Re)}function Dd(n,r,a){if(Re.current!==yi)throw Error(e(168));Kt(Re,r),Kt(Ge,a)}function Od(n,r,a){var h=n.stateNode;if(r=r.childContextTypes,typeof h.getChildContext!="function")return a;h=h.getChildContext();for(var p in h)if(!(p in r))throw Error(e(108,ut(n)||"Unknown",p));return X({},a,h)}function ya(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||yi,$i=Re.current,Kt(Re,n),Kt(Ge,Ge.current),!0}function Bd(n,r,a){var h=n.stateNode;if(!h)throw Error(e(169));a?(n=Od(n,r,$i),h.__reactInternalMemoizedMergedChildContext=n,Yt(Ge),Yt(Re),Kt(Re,n)):Yt(Ge),Kt(Ge,a)}var Wn=null,ga=!1,Tc=!1;function Vd(n){Wn===null?Wn=[n]:Wn.push(n)}function Z0(n){ga=!0,Vd(n)}function gi(){if(!Tc&&Wn!==null){Tc=!0;var n=0,r=Ht;try{var a=Wn;for(Ht=1;n<a.length;n++){var h=a[n];do h=h(!0);while(h!==null)}Wn=null,ga=!1}catch(p){throw Wn!==null&&(Wn=Wn.slice(n+1)),Xo(zs,gi),p}finally{Ht=r,Tc=!1}}return null}var Dr=[],Or=0,va=null,xa=0,an=[],ln=0,tr=null,Gn=1,qn="";function er(n,r){Dr[Or++]=xa,Dr[Or++]=va,va=n,xa=r}function jd(n,r,a){an[ln++]=Gn,an[ln++]=qn,an[ln++]=tr,tr=n;var h=Gn;n=qn;var p=32-$e(h)-1;h&=~(1<<p),a+=1;var g=32-$e(r)+p;if(30<g){var M=p-p%5;g=(h&(1<<M)-1).toString(32),h>>=M,p-=M,Gn=1<<32-$e(r)+p|a<<p|h,qn=g+n}else Gn=1<<g|a<<p|h,qn=n}function _c(n){n.return!==null&&(er(n,1),jd(n,1,0))}function Cc(n){for(;n===va;)va=Dr[--Or],Dr[Or]=null,xa=Dr[--Or],Dr[Or]=null;for(;n===tr;)tr=an[--ln],an[ln]=null,qn=an[--ln],an[ln]=null,Gn=an[--ln],an[ln]=null}var en=null,nn=null,$t=!1,vn=null;function Hd(n,r){var a=dn(5,null,null,0);a.elementType="DELETED",a.stateNode=r,a.return=n,r=n.deletions,r===null?(n.deletions=[a],n.flags|=16):r.push(a)}function Ud(n,r){switch(n.tag){case 5:var a=n.type;return r=r.nodeType!==1||a.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(n.stateNode=r,en=n,nn=pi(r.firstChild),!0):!1;case 6:return r=n.pendingProps===""||r.nodeType!==3?null:r,r!==null?(n.stateNode=r,en=n,nn=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(a=tr!==null?{id:Gn,overflow:qn}:null,n.memoizedState={dehydrated:r,treeContext:a,retryLane:1073741824},a=dn(18,null,null,0),a.stateNode=r,a.return=n,n.child=a,en=n,nn=null,!0):!1;default:return!1}}function Rc(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Pc(n){if($t){var r=nn;if(r){var a=r;if(!Ud(n,r)){if(Rc(n))throw Error(e(418));r=pi(a.nextSibling);var h=en;r&&Ud(n,r)?Hd(h,a):(n.flags=n.flags&-4097|2,$t=!1,en=n)}}else{if(Rc(n))throw Error(e(418));n.flags=n.flags&-4097|2,$t=!1,en=n}}}function Wd(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;en=n}function wa(n){if(n!==en)return!1;if(!$t)return Wd(n),$t=!0,!1;var r;if((r=n.tag!==3)&&!(r=n.tag!==5)&&(r=n.type,r=r!=="head"&&r!=="body"&&!kc(n.type,n.memoizedProps)),r&&(r=nn)){if(Rc(n))throw Gd(),Error(e(418));for(;r;)Hd(n,r),r=pi(r.nextSibling)}if(Wd(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(e(317));t:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(r===0){nn=pi(n.nextSibling);break t}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++}n=n.nextSibling}nn=null}}else nn=en?pi(n.stateNode.nextSibling):null;return!0}function Gd(){for(var n=nn;n;)n=pi(n.nextSibling)}function Br(){nn=en=null,$t=!1}function zc(n){vn===null?vn=[n]:vn.push(n)}var Y0=I.ReactCurrentBatchConfig;function Zs(n,r,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(e(309));var h=a.stateNode}if(!h)throw Error(e(147,n));var p=h,g=""+n;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===g?r.ref:(r=function(M){var C=p.refs;M===null?delete C[g]:C[g]=M},r._stringRef=g,r)}if(typeof n!="string")throw Error(e(284));if(!a._owner)throw Error(e(290,n))}return n}function Ea(n,r){throw n=Object.prototype.toString.call(r),Error(e(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n))}function qd(n){var r=n._init;return r(n._payload)}function Kd(n){function r(D,N){if(n){var B=D.deletions;B===null?(D.deletions=[N],D.flags|=16):B.push(N)}}function a(D,N){if(!n)return null;for(;N!==null;)r(D,N),N=N.sibling;return null}function h(D,N){for(D=new Map;N!==null;)N.key!==null?D.set(N.key,N):D.set(N.index,N),N=N.sibling;return D}function p(D,N){return D=Si(D,N),D.index=0,D.sibling=null,D}function g(D,N,B){return D.index=B,n?(B=D.alternate,B!==null?(B=B.index,B<N?(D.flags|=2,N):B):(D.flags|=2,N)):(D.flags|=1048576,N)}function M(D){return n&&D.alternate===null&&(D.flags|=2),D}function C(D,N,B,at){return N===null||N.tag!==6?(N=Mu(B,D.mode,at),N.return=D,N):(N=p(N,B),N.return=D,N)}function P(D,N,B,at){var bt=B.type;return bt===G?$(D,N,B.props.children,at,B.key):N!==null&&(N.elementType===bt||typeof bt=="object"&&bt!==null&&bt.$$typeof===nt&&qd(bt)===N.type)?(at=p(N,B.props),at.ref=Zs(D,N,B),at.return=D,at):(at=Ga(B.type,B.key,B.props,null,D.mode,at),at.ref=Zs(D,N,B),at.return=D,at)}function j(D,N,B,at){return N===null||N.tag!==4||N.stateNode.containerInfo!==B.containerInfo||N.stateNode.implementation!==B.implementation?(N=bu(B,D.mode,at),N.return=D,N):(N=p(N,B.children||[]),N.return=D,N)}function $(D,N,B,at,bt){return N===null||N.tag!==7?(N=cr(B,D.mode,at,bt),N.return=D,N):(N=p(N,B),N.return=D,N)}function it(D,N,B){if(typeof N=="string"&&N!==""||typeof N=="number")return N=Mu(""+N,D.mode,B),N.return=D,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case O:return B=Ga(N.type,N.key,N.props,null,D.mode,B),B.ref=Zs(D,null,N),B.return=D,B;case q:return N=bu(N,D.mode,B),N.return=D,N;case nt:var at=N._init;return it(D,at(N._payload),B)}if(si(N)||Z(N))return N=cr(N,D.mode,B,null),N.return=D,N;Ea(D,N)}return null}function J(D,N,B,at){var bt=N!==null?N.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return bt!==null?null:C(D,N,""+B,at);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case O:return B.key===bt?P(D,N,B,at):null;case q:return B.key===bt?j(D,N,B,at):null;case nt:return bt=B._init,J(D,N,bt(B._payload),at)}if(si(B)||Z(B))return bt!==null?null:$(D,N,B,at,null);Ea(D,B)}return null}function mt(D,N,B,at,bt){if(typeof at=="string"&&at!==""||typeof at=="number")return D=D.get(B)||null,C(N,D,""+at,bt);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case O:return D=D.get(at.key===null?B:at.key)||null,P(N,D,at,bt);case q:return D=D.get(at.key===null?B:at.key)||null,j(N,D,at,bt);case nt:var Pt=at._init;return mt(D,N,B,Pt(at._payload),bt)}if(si(at)||Z(at))return D=D.get(B)||null,$(N,D,at,bt,null);Ea(N,at)}return null}function xt(D,N,B,at){for(var bt=null,Pt=null,zt=N,Nt=N=0,be=null;zt!==null&&Nt<B.length;Nt++){zt.index>Nt?(be=zt,zt=null):be=zt.sibling;var Wt=J(D,zt,B[Nt],at);if(Wt===null){zt===null&&(zt=be);break}n&&zt&&Wt.alternate===null&&r(D,zt),N=g(Wt,N,Nt),Pt===null?bt=Wt:Pt.sibling=Wt,Pt=Wt,zt=be}if(Nt===B.length)return a(D,zt),$t&&er(D,Nt),bt;if(zt===null){for(;Nt<B.length;Nt++)zt=it(D,B[Nt],at),zt!==null&&(N=g(zt,N,Nt),Pt===null?bt=zt:Pt.sibling=zt,Pt=zt);return $t&&er(D,Nt),bt}for(zt=h(D,zt);Nt<B.length;Nt++)be=mt(zt,D,Nt,B[Nt],at),be!==null&&(n&&be.alternate!==null&&zt.delete(be.key===null?Nt:be.key),N=g(be,N,Nt),Pt===null?bt=be:Pt.sibling=be,Pt=be);return n&&zt.forEach(function(Ai){return r(D,Ai)}),$t&&er(D,Nt),bt}function kt(D,N,B,at){var bt=Z(B);if(typeof bt!="function")throw Error(e(150));if(B=bt.call(B),B==null)throw Error(e(151));for(var Pt=bt=null,zt=N,Nt=N=0,be=null,Wt=B.next();zt!==null&&!Wt.done;Nt++,Wt=B.next()){zt.index>Nt?(be=zt,zt=null):be=zt.sibling;var Ai=J(D,zt,Wt.value,at);if(Ai===null){zt===null&&(zt=be);break}n&&zt&&Ai.alternate===null&&r(D,zt),N=g(Ai,N,Nt),Pt===null?bt=Ai:Pt.sibling=Ai,Pt=Ai,zt=be}if(Wt.done)return a(D,zt),$t&&er(D,Nt),bt;if(zt===null){for(;!Wt.done;Nt++,Wt=B.next())Wt=it(D,Wt.value,at),Wt!==null&&(N=g(Wt,N,Nt),Pt===null?bt=Wt:Pt.sibling=Wt,Pt=Wt);return $t&&er(D,Nt),bt}for(zt=h(D,zt);!Wt.done;Nt++,Wt=B.next())Wt=mt(zt,D,Nt,Wt.value,at),Wt!==null&&(n&&Wt.alternate!==null&&zt.delete(Wt.key===null?Nt:Wt.key),N=g(Wt,N,Nt),Pt===null?bt=Wt:Pt.sibling=Wt,Pt=Wt);return n&&zt.forEach(function(Cg){return r(D,Cg)}),$t&&er(D,Nt),bt}function ue(D,N,B,at){if(typeof B=="object"&&B!==null&&B.type===G&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case O:t:{for(var bt=B.key,Pt=N;Pt!==null;){if(Pt.key===bt){if(bt=B.type,bt===G){if(Pt.tag===7){a(D,Pt.sibling),N=p(Pt,B.props.children),N.return=D,D=N;break t}}else if(Pt.elementType===bt||typeof bt=="object"&&bt!==null&&bt.$$typeof===nt&&qd(bt)===Pt.type){a(D,Pt.sibling),N=p(Pt,B.props),N.ref=Zs(D,Pt,B),N.return=D,D=N;break t}a(D,Pt);break}else r(D,Pt);Pt=Pt.sibling}B.type===G?(N=cr(B.props.children,D.mode,at,B.key),N.return=D,D=N):(at=Ga(B.type,B.key,B.props,null,D.mode,at),at.ref=Zs(D,N,B),at.return=D,D=at)}return M(D);case q:t:{for(Pt=B.key;N!==null;){if(N.key===Pt)if(N.tag===4&&N.stateNode.containerInfo===B.containerInfo&&N.stateNode.implementation===B.implementation){a(D,N.sibling),N=p(N,B.children||[]),N.return=D,D=N;break t}else{a(D,N);break}else r(D,N);N=N.sibling}N=bu(B,D.mode,at),N.return=D,D=N}return M(D);case nt:return Pt=B._init,ue(D,N,Pt(B._payload),at)}if(si(B))return xt(D,N,B,at);if(Z(B))return kt(D,N,B,at);Ea(D,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,N!==null&&N.tag===6?(a(D,N.sibling),N=p(N,B),N.return=D,D=N):(a(D,N),N=Mu(B,D.mode,at),N.return=D,D=N),M(D)):a(D,N)}return ue}var Vr=Kd(!0),Xd=Kd(!1),ka=mi(null),Ma=null,jr=null,Nc=null;function Fc(){Nc=jr=Ma=null}function Lc(n){var r=ka.current;Yt(ka),n._currentValue=r}function Ic(n,r,a){for(;n!==null;){var h=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,h!==null&&(h.childLanes|=r)):h!==null&&(h.childLanes&r)!==r&&(h.childLanes|=r),n===a)break;n=n.return}}function Hr(n,r){Ma=n,Nc=jr=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&r&&(Ke=!0),n.firstContext=null)}function cn(n){var r=n._currentValue;if(Nc!==n)if(n={context:n,memoizedValue:r,next:null},jr===null){if(Ma===null)throw Error(e(308));jr=n,Ma.dependencies={lanes:0,firstContext:n}}else jr=jr.next=n;return r}var nr=null;function Dc(n){nr===null?nr=[n]:nr.push(n)}function Zd(n,r,a,h){var p=r.interleaved;return p===null?(a.next=a,Dc(r)):(a.next=p.next,p.next=a),r.interleaved=a,Kn(n,h)}function Kn(n,r){n.lanes|=r;var a=n.alternate;for(a!==null&&(a.lanes|=r),a=n,n=n.return;n!==null;)n.childLanes|=r,a=n.alternate,a!==null&&(a.childLanes|=r),a=n,n=n.return;return a.tag===3?a.stateNode:null}var vi=!1;function Oc(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yd(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Xn(n,r){return{eventTime:n,lane:r,tag:0,payload:null,callback:null,next:null}}function xi(n,r,a){var h=n.updateQueue;if(h===null)return null;if(h=h.shared,jt&2){var p=h.pending;return p===null?r.next=r:(r.next=p.next,p.next=r),h.pending=r,Kn(n,a)}return p=h.interleaved,p===null?(r.next=r,Dc(h)):(r.next=p.next,p.next=r),h.interleaved=r,Kn(n,a)}function ba(n,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194240)!==0)){var h=r.lanes;h&=n.pendingLanes,a|=h,r.lanes=a,ui(n,a)}}function Jd(n,r){var a=n.updateQueue,h=n.alternate;if(h!==null&&(h=h.updateQueue,a===h)){var p=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var M={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?p=g=M:g=g.next=M,a=a.next}while(a!==null);g===null?p=g=r:g=g.next=r}else p=g=r;a={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:g,shared:h.shared,effects:h.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=r:n.next=r,a.lastBaseUpdate=r}function Sa(n,r,a,h){var p=n.updateQueue;vi=!1;var g=p.firstBaseUpdate,M=p.lastBaseUpdate,C=p.shared.pending;if(C!==null){p.shared.pending=null;var P=C,j=P.next;P.next=null,M===null?g=j:M.next=j,M=P;var $=n.alternate;$!==null&&($=$.updateQueue,C=$.lastBaseUpdate,C!==M&&(C===null?$.firstBaseUpdate=j:C.next=j,$.lastBaseUpdate=P))}if(g!==null){var it=p.baseState;M=0,$=j=P=null,C=g;do{var J=C.lane,mt=C.eventTime;if((h&J)===J){$!==null&&($=$.next={eventTime:mt,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});t:{var xt=n,kt=C;switch(J=r,mt=a,kt.tag){case 1:if(xt=kt.payload,typeof xt=="function"){it=xt.call(mt,it,J);break t}it=xt;break t;case 3:xt.flags=xt.flags&-65537|128;case 0:if(xt=kt.payload,J=typeof xt=="function"?xt.call(mt,it,J):xt,J==null)break t;it=X({},it,J);break t;case 2:vi=!0}}C.callback!==null&&C.lane!==0&&(n.flags|=64,J=p.effects,J===null?p.effects=[C]:J.push(C))}else mt={eventTime:mt,lane:J,tag:C.tag,payload:C.payload,callback:C.callback,next:null},$===null?(j=$=mt,P=it):$=$.next=mt,M|=J;if(C=C.next,C===null){if(C=p.shared.pending,C===null)break;J=C,C=J.next,J.next=null,p.lastBaseUpdate=J,p.shared.pending=null}}while(!0);if($===null&&(P=it),p.baseState=P,p.firstBaseUpdate=j,p.lastBaseUpdate=$,r=p.shared.interleaved,r!==null){p=r;do M|=p.lane,p=p.next;while(p!==r)}else g===null&&(p.shared.lanes=0);sr|=M,n.lanes=M,n.memoizedState=it}}function Qd(n,r,a){if(n=r.effects,r.effects=null,n!==null)for(r=0;r<n.length;r++){var h=n[r],p=h.callback;if(p!==null){if(h.callback=null,h=a,typeof p!="function")throw Error(e(191,p));p.call(h)}}}var Ys={},zn=mi(Ys),Js=mi(Ys),Qs=mi(Ys);function ir(n){if(n===Ys)throw Error(e(174));return n}function Bc(n,r){switch(Kt(Qs,r),Kt(Js,n),Kt(zn,Ys),n=r.nodeType,n){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:xr(null,"");break;default:n=n===8?r.parentNode:r,r=n.namespaceURI||null,n=n.tagName,r=xr(r,n)}Yt(zn),Kt(zn,r)}function Ur(){Yt(zn),Yt(Js),Yt(Qs)}function $d(n){ir(Qs.current);var r=ir(zn.current),a=xr(r,n.type);r!==a&&(Kt(Js,n),Kt(zn,a))}function Vc(n){Js.current===n&&(Yt(zn),Yt(Js))}var ee=mi(0);function Aa(n){for(var r=n;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if(r.flags&128)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var jc=[];function Hc(){for(var n=0;n<jc.length;n++)jc[n]._workInProgressVersionPrimary=null;jc.length=0}var Ta=I.ReactCurrentDispatcher,Uc=I.ReactCurrentBatchConfig,rr=0,ne=null,ve=null,ke=null,_a=!1,$s=!1,to=0,J0=0;function Pe(){throw Error(e(321))}function Wc(n,r){if(r===null)return!1;for(var a=0;a<r.length&&a<n.length;a++)if(!gn(n[a],r[a]))return!1;return!0}function Gc(n,r,a,h,p,g){if(rr=g,ne=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Ta.current=n===null||n.memoizedState===null?eg:ng,n=a(h,p),$s){g=0;do{if($s=!1,to=0,25<=g)throw Error(e(301));g+=1,ke=ve=null,r.updateQueue=null,Ta.current=ig,n=a(h,p)}while($s)}if(Ta.current=Pa,r=ve!==null&&ve.next!==null,rr=0,ke=ve=ne=null,_a=!1,r)throw Error(e(300));return n}function qc(){var n=to!==0;return to=0,n}function Nn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ke===null?ne.memoizedState=ke=n:ke=ke.next=n,ke}function un(){if(ve===null){var n=ne.alternate;n=n!==null?n.memoizedState:null}else n=ve.next;var r=ke===null?ne.memoizedState:ke.next;if(r!==null)ke=r,ve=n;else{if(n===null)throw Error(e(310));ve=n,n={memoizedState:ve.memoizedState,baseState:ve.baseState,baseQueue:ve.baseQueue,queue:ve.queue,next:null},ke===null?ne.memoizedState=ke=n:ke=ke.next=n}return ke}function eo(n,r){return typeof r=="function"?r(n):r}function Kc(n){var r=un(),a=r.queue;if(a===null)throw Error(e(311));a.lastRenderedReducer=n;var h=ve,p=h.baseQueue,g=a.pending;if(g!==null){if(p!==null){var M=p.next;p.next=g.next,g.next=M}h.baseQueue=p=g,a.pending=null}if(p!==null){g=p.next,h=h.baseState;var C=M=null,P=null,j=g;do{var $=j.lane;if((rr&$)===$)P!==null&&(P=P.next={lane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),h=j.hasEagerState?j.eagerState:n(h,j.action);else{var it={lane:$,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null};P===null?(C=P=it,M=h):P=P.next=it,ne.lanes|=$,sr|=$}j=j.next}while(j!==null&&j!==g);P===null?M=h:P.next=C,gn(h,r.memoizedState)||(Ke=!0),r.memoizedState=h,r.baseState=M,r.baseQueue=P,a.lastRenderedState=h}if(n=a.interleaved,n!==null){p=n;do g=p.lane,ne.lanes|=g,sr|=g,p=p.next;while(p!==n)}else p===null&&(a.lanes=0);return[r.memoizedState,a.dispatch]}function Xc(n){var r=un(),a=r.queue;if(a===null)throw Error(e(311));a.lastRenderedReducer=n;var h=a.dispatch,p=a.pending,g=r.memoizedState;if(p!==null){a.pending=null;var M=p=p.next;do g=n(g,M.action),M=M.next;while(M!==p);gn(g,r.memoizedState)||(Ke=!0),r.memoizedState=g,r.baseQueue===null&&(r.baseState=g),a.lastRenderedState=g}return[g,h]}function tf(){}function ef(n,r){var a=ne,h=un(),p=r(),g=!gn(h.memoizedState,p);if(g&&(h.memoizedState=p,Ke=!0),h=h.queue,Zc(sf.bind(null,a,h,n),[n]),h.getSnapshot!==r||g||ke!==null&&ke.memoizedState.tag&1){if(a.flags|=2048,no(9,rf.bind(null,a,h,p,r),void 0,null),Me===null)throw Error(e(349));rr&30||nf(a,r,p)}return p}function nf(n,r,a){n.flags|=16384,n={getSnapshot:r,value:a},r=ne.updateQueue,r===null?(r={lastEffect:null,stores:null},ne.updateQueue=r,r.stores=[n]):(a=r.stores,a===null?r.stores=[n]:a.push(n))}function rf(n,r,a,h){r.value=a,r.getSnapshot=h,of(r)&&af(n)}function sf(n,r,a){return a(function(){of(r)&&af(n)})}function of(n){var r=n.getSnapshot;n=n.value;try{var a=r();return!gn(n,a)}catch{return!0}}function af(n){var r=Kn(n,1);r!==null&&kn(r,n,1,-1)}function lf(n){var r=Nn();return typeof n=="function"&&(n=n()),r.memoizedState=r.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:eo,lastRenderedState:n},r.queue=n,n=n.dispatch=tg.bind(null,ne,n),[r.memoizedState,n]}function no(n,r,a,h){return n={tag:n,create:r,destroy:a,deps:h,next:null},r=ne.updateQueue,r===null?(r={lastEffect:null,stores:null},ne.updateQueue=r,r.lastEffect=n.next=n):(a=r.lastEffect,a===null?r.lastEffect=n.next=n:(h=a.next,a.next=n,n.next=h,r.lastEffect=n)),n}function cf(){return un().memoizedState}function Ca(n,r,a,h){var p=Nn();ne.flags|=n,p.memoizedState=no(1|r,a,void 0,h===void 0?null:h)}function Ra(n,r,a,h){var p=un();h=h===void 0?null:h;var g=void 0;if(ve!==null){var M=ve.memoizedState;if(g=M.destroy,h!==null&&Wc(h,M.deps)){p.memoizedState=no(r,a,g,h);return}}ne.flags|=n,p.memoizedState=no(1|r,a,g,h)}function uf(n,r){return Ca(8390656,8,n,r)}function Zc(n,r){return Ra(2048,8,n,r)}function hf(n,r){return Ra(4,2,n,r)}function df(n,r){return Ra(4,4,n,r)}function ff(n,r){if(typeof r=="function")return n=n(),r(n),function(){r(null)};if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function pf(n,r,a){return a=a!=null?a.concat([n]):null,Ra(4,4,ff.bind(null,r,n),a)}function Yc(){}function mf(n,r){var a=un();r=r===void 0?null:r;var h=a.memoizedState;return h!==null&&r!==null&&Wc(r,h[1])?h[0]:(a.memoizedState=[n,r],n)}function yf(n,r){var a=un();r=r===void 0?null:r;var h=a.memoizedState;return h!==null&&r!==null&&Wc(r,h[1])?h[0]:(n=n(),a.memoizedState=[n,r],n)}function gf(n,r,a){return rr&21?(gn(a,r)||(a=Is(),ne.lanes|=a,sr|=a,n.baseState=!0),r):(n.baseState&&(n.baseState=!1,Ke=!0),n.memoizedState=a)}function Q0(n,r){var a=Ht;Ht=a!==0&&4>a?a:4,n(!0);var h=Uc.transition;Uc.transition={};try{n(!1),r()}finally{Ht=a,Uc.transition=h}}function vf(){return un().memoizedState}function $0(n,r,a){var h=Mi(n);if(a={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null},xf(n))wf(r,a);else if(a=Zd(n,r,a,h),a!==null){var p=je();kn(a,n,h,p),Ef(a,r,h)}}function tg(n,r,a){var h=Mi(n),p={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null};if(xf(n))wf(r,p);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=r.lastRenderedReducer,g!==null))try{var M=r.lastRenderedState,C=g(M,a);if(p.hasEagerState=!0,p.eagerState=C,gn(C,M)){var P=r.interleaved;P===null?(p.next=p,Dc(r)):(p.next=P.next,P.next=p),r.interleaved=p;return}}catch{}finally{}a=Zd(n,r,p,h),a!==null&&(p=je(),kn(a,n,h,p),Ef(a,r,h))}}function xf(n){var r=n.alternate;return n===ne||r!==null&&r===ne}function wf(n,r){$s=_a=!0;var a=n.pending;a===null?r.next=r:(r.next=a.next,a.next=r),n.pending=r}function Ef(n,r,a){if(a&4194240){var h=r.lanes;h&=n.pendingLanes,a|=h,r.lanes=a,ui(n,a)}}var Pa={readContext:cn,useCallback:Pe,useContext:Pe,useEffect:Pe,useImperativeHandle:Pe,useInsertionEffect:Pe,useLayoutEffect:Pe,useMemo:Pe,useReducer:Pe,useRef:Pe,useState:Pe,useDebugValue:Pe,useDeferredValue:Pe,useTransition:Pe,useMutableSource:Pe,useSyncExternalStore:Pe,useId:Pe,unstable_isNewReconciler:!1},eg={readContext:cn,useCallback:function(n,r){return Nn().memoizedState=[n,r===void 0?null:r],n},useContext:cn,useEffect:uf,useImperativeHandle:function(n,r,a){return a=a!=null?a.concat([n]):null,Ca(4194308,4,ff.bind(null,r,n),a)},useLayoutEffect:function(n,r){return Ca(4194308,4,n,r)},useInsertionEffect:function(n,r){return Ca(4,2,n,r)},useMemo:function(n,r){var a=Nn();return r=r===void 0?null:r,n=n(),a.memoizedState=[n,r],n},useReducer:function(n,r,a){var h=Nn();return r=a!==void 0?a(r):r,h.memoizedState=h.baseState=r,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:r},h.queue=n,n=n.dispatch=$0.bind(null,ne,n),[h.memoizedState,n]},useRef:function(n){var r=Nn();return n={current:n},r.memoizedState=n},useState:lf,useDebugValue:Yc,useDeferredValue:function(n){return Nn().memoizedState=n},useTransition:function(){var n=lf(!1),r=n[0];return n=Q0.bind(null,n[1]),Nn().memoizedState=n,[r,n]},useMutableSource:function(){},useSyncExternalStore:function(n,r,a){var h=ne,p=Nn();if($t){if(a===void 0)throw Error(e(407));a=a()}else{if(a=r(),Me===null)throw Error(e(349));rr&30||nf(h,r,a)}p.memoizedState=a;var g={value:a,getSnapshot:r};return p.queue=g,uf(sf.bind(null,h,g,n),[n]),h.flags|=2048,no(9,rf.bind(null,h,g,a,r),void 0,null),a},useId:function(){var n=Nn(),r=Me.identifierPrefix;if($t){var a=qn,h=Gn;a=(h&~(1<<32-$e(h)-1)).toString(32)+a,r=":"+r+"R"+a,a=to++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=J0++,r=":"+r+"r"+a.toString(32)+":";return n.memoizedState=r},unstable_isNewReconciler:!1},ng={readContext:cn,useCallback:mf,useContext:cn,useEffect:Zc,useImperativeHandle:pf,useInsertionEffect:hf,useLayoutEffect:df,useMemo:yf,useReducer:Kc,useRef:cf,useState:function(){return Kc(eo)},useDebugValue:Yc,useDeferredValue:function(n){var r=un();return gf(r,ve.memoizedState,n)},useTransition:function(){var n=Kc(eo)[0],r=un().memoizedState;return[n,r]},useMutableSource:tf,useSyncExternalStore:ef,useId:vf,unstable_isNewReconciler:!1},ig={readContext:cn,useCallback:mf,useContext:cn,useEffect:Zc,useImperativeHandle:pf,useInsertionEffect:hf,useLayoutEffect:df,useMemo:yf,useReducer:Xc,useRef:cf,useState:function(){return Xc(eo)},useDebugValue:Yc,useDeferredValue:function(n){var r=un();return ve===null?r.memoizedState=n:gf(r,ve.memoizedState,n)},useTransition:function(){var n=Xc(eo)[0],r=un().memoizedState;return[n,r]},useMutableSource:tf,useSyncExternalStore:ef,useId:vf,unstable_isNewReconciler:!1};function xn(n,r){if(n&&n.defaultProps){r=X({},r),n=n.defaultProps;for(var a in n)r[a]===void 0&&(r[a]=n[a]);return r}return r}function Jc(n,r,a,h){r=n.memoizedState,a=a(h,r),a=a==null?r:X({},r,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var za={isMounted:function(n){return(n=n._reactInternals)?jn(n)===n:!1},enqueueSetState:function(n,r,a){n=n._reactInternals;var h=je(),p=Mi(n),g=Xn(h,p);g.payload=r,a!=null&&(g.callback=a),r=xi(n,g,p),r!==null&&(kn(r,n,p,h),ba(r,n,p))},enqueueReplaceState:function(n,r,a){n=n._reactInternals;var h=je(),p=Mi(n),g=Xn(h,p);g.tag=1,g.payload=r,a!=null&&(g.callback=a),r=xi(n,g,p),r!==null&&(kn(r,n,p,h),ba(r,n,p))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var a=je(),h=Mi(n),p=Xn(a,h);p.tag=2,r!=null&&(p.callback=r),r=xi(n,p,h),r!==null&&(kn(r,n,h,a),ba(r,n,h))}};function kf(n,r,a,h,p,g,M){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(h,g,M):r.prototype&&r.prototype.isPureReactComponent?!Hs(a,h)||!Hs(p,g):!0}function Mf(n,r,a){var h=!1,p=yi,g=r.contextType;return typeof g=="object"&&g!==null?g=cn(g):(p=qe(r)?$i:Re.current,h=r.contextTypes,g=(h=h!=null)?Ir(n,p):yi),r=new r(a,g),n.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=za,n.stateNode=r,r._reactInternals=n,h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=p,n.__reactInternalMemoizedMaskedChildContext=g),r}function bf(n,r,a,h){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,h),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,h),r.state!==n&&za.enqueueReplaceState(r,r.state,null)}function Qc(n,r,a,h){var p=n.stateNode;p.props=a,p.state=n.memoizedState,p.refs={},Oc(n);var g=r.contextType;typeof g=="object"&&g!==null?p.context=cn(g):(g=qe(r)?$i:Re.current,p.context=Ir(n,g)),p.state=n.memoizedState,g=r.getDerivedStateFromProps,typeof g=="function"&&(Jc(n,r,g,a),p.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(r=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),r!==p.state&&za.enqueueReplaceState(p,p.state,null),Sa(n,a,p,h),p.state=n.memoizedState),typeof p.componentDidMount=="function"&&(n.flags|=4194308)}function Wr(n,r){try{var a="",h=r;do a+=st(h),h=h.return;while(h);var p=a}catch(g){p=`
Error generating stack: `+g.message+`
`+g.stack}return{value:n,source:r,stack:p,digest:null}}function $c(n,r,a){return{value:n,source:null,stack:a??null,digest:r??null}}function tu(n,r){try{console.error(r.value)}catch(a){setTimeout(function(){throw a})}}var rg=typeof WeakMap=="function"?WeakMap:Map;function Sf(n,r,a){a=Xn(-1,a),a.tag=3,a.payload={element:null};var h=r.value;return a.callback=function(){Ba||(Ba=!0,mu=h),tu(n,r)},a}function Af(n,r,a){a=Xn(-1,a),a.tag=3;var h=n.type.getDerivedStateFromError;if(typeof h=="function"){var p=r.value;a.payload=function(){return h(p)},a.callback=function(){tu(n,r)}}var g=n.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){tu(n,r),typeof h!="function"&&(Ei===null?Ei=new Set([this]):Ei.add(this));var M=r.stack;this.componentDidCatch(r.value,{componentStack:M!==null?M:""})}),a}function Tf(n,r,a){var h=n.pingCache;if(h===null){h=n.pingCache=new rg;var p=new Set;h.set(r,p)}else p=h.get(r),p===void 0&&(p=new Set,h.set(r,p));p.has(a)||(p.add(a),n=vg.bind(null,n,r,a),r.then(n,n))}function _f(n){do{var r;if((r=n.tag===13)&&(r=n.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return n;n=n.return}while(n!==null);return null}function Cf(n,r,a,h,p){return n.mode&1?(n.flags|=65536,n.lanes=p,n):(n===r?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(r=Xn(-1,1),r.tag=2,xi(a,r,1))),a.lanes|=1),n)}var sg=I.ReactCurrentOwner,Ke=!1;function Ve(n,r,a,h){r.child=n===null?Xd(r,null,a,h):Vr(r,n.child,a,h)}function Rf(n,r,a,h,p){a=a.render;var g=r.ref;return Hr(r,p),h=Gc(n,r,a,h,g,p),a=qc(),n!==null&&!Ke?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~p,Zn(n,r,p)):($t&&a&&_c(r),r.flags|=1,Ve(n,r,h,p),r.child)}function Pf(n,r,a,h,p){if(n===null){var g=a.type;return typeof g=="function"&&!ku(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(r.tag=15,r.type=g,zf(n,r,g,h,p)):(n=Ga(a.type,null,h,r,r.mode,p),n.ref=r.ref,n.return=r,r.child=n)}if(g=n.child,!(n.lanes&p)){var M=g.memoizedProps;if(a=a.compare,a=a!==null?a:Hs,a(M,h)&&n.ref===r.ref)return Zn(n,r,p)}return r.flags|=1,n=Si(g,h),n.ref=r.ref,n.return=r,r.child=n}function zf(n,r,a,h,p){if(n!==null){var g=n.memoizedProps;if(Hs(g,h)&&n.ref===r.ref)if(Ke=!1,r.pendingProps=h=g,(n.lanes&p)!==0)n.flags&131072&&(Ke=!0);else return r.lanes=n.lanes,Zn(n,r,p)}return eu(n,r,a,h,p)}function Nf(n,r,a){var h=r.pendingProps,p=h.children,g=n!==null?n.memoizedState:null;if(h.mode==="hidden")if(!(r.mode&1))r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Kt(qr,rn),rn|=a;else{if(!(a&1073741824))return n=g!==null?g.baseLanes|a:a,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:n,cachePool:null,transitions:null},r.updateQueue=null,Kt(qr,rn),rn|=n,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=g!==null?g.baseLanes:a,Kt(qr,rn),rn|=h}else g!==null?(h=g.baseLanes|a,r.memoizedState=null):h=a,Kt(qr,rn),rn|=h;return Ve(n,r,p,a),r.child}function Ff(n,r){var a=r.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(r.flags|=512,r.flags|=2097152)}function eu(n,r,a,h,p){var g=qe(a)?$i:Re.current;return g=Ir(r,g),Hr(r,p),a=Gc(n,r,a,h,g,p),h=qc(),n!==null&&!Ke?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~p,Zn(n,r,p)):($t&&h&&_c(r),r.flags|=1,Ve(n,r,a,p),r.child)}function Lf(n,r,a,h,p){if(qe(a)){var g=!0;ya(r)}else g=!1;if(Hr(r,p),r.stateNode===null)Fa(n,r),Mf(r,a,h),Qc(r,a,h,p),h=!0;else if(n===null){var M=r.stateNode,C=r.memoizedProps;M.props=C;var P=M.context,j=a.contextType;typeof j=="object"&&j!==null?j=cn(j):(j=qe(a)?$i:Re.current,j=Ir(r,j));var $=a.getDerivedStateFromProps,it=typeof $=="function"||typeof M.getSnapshotBeforeUpdate=="function";it||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(C!==h||P!==j)&&bf(r,M,h,j),vi=!1;var J=r.memoizedState;M.state=J,Sa(r,h,M,p),P=r.memoizedState,C!==h||J!==P||Ge.current||vi?(typeof $=="function"&&(Jc(r,a,$,h),P=r.memoizedState),(C=vi||kf(r,a,C,h,J,P,j))?(it||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(r.flags|=4194308)):(typeof M.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=h,r.memoizedState=P),M.props=h,M.state=P,M.context=j,h=C):(typeof M.componentDidMount=="function"&&(r.flags|=4194308),h=!1)}else{M=r.stateNode,Yd(n,r),C=r.memoizedProps,j=r.type===r.elementType?C:xn(r.type,C),M.props=j,it=r.pendingProps,J=M.context,P=a.contextType,typeof P=="object"&&P!==null?P=cn(P):(P=qe(a)?$i:Re.current,P=Ir(r,P));var mt=a.getDerivedStateFromProps;($=typeof mt=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(C!==it||J!==P)&&bf(r,M,h,P),vi=!1,J=r.memoizedState,M.state=J,Sa(r,h,M,p);var xt=r.memoizedState;C!==it||J!==xt||Ge.current||vi?(typeof mt=="function"&&(Jc(r,a,mt,h),xt=r.memoizedState),(j=vi||kf(r,a,j,h,J,xt,P)||!1)?($||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(h,xt,P),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(h,xt,P)),typeof M.componentDidUpdate=="function"&&(r.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof M.componentDidUpdate!="function"||C===n.memoizedProps&&J===n.memoizedState||(r.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&J===n.memoizedState||(r.flags|=1024),r.memoizedProps=h,r.memoizedState=xt),M.props=h,M.state=xt,M.context=P,h=j):(typeof M.componentDidUpdate!="function"||C===n.memoizedProps&&J===n.memoizedState||(r.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&J===n.memoizedState||(r.flags|=1024),h=!1)}return nu(n,r,a,h,g,p)}function nu(n,r,a,h,p,g){Ff(n,r);var M=(r.flags&128)!==0;if(!h&&!M)return p&&Bd(r,a,!1),Zn(n,r,g);h=r.stateNode,sg.current=r;var C=M&&typeof a.getDerivedStateFromError!="function"?null:h.render();return r.flags|=1,n!==null&&M?(r.child=Vr(r,n.child,null,g),r.child=Vr(r,null,C,g)):Ve(n,r,C,g),r.memoizedState=h.state,p&&Bd(r,a,!0),r.child}function If(n){var r=n.stateNode;r.pendingContext?Dd(n,r.pendingContext,r.pendingContext!==r.context):r.context&&Dd(n,r.context,!1),Bc(n,r.containerInfo)}function Df(n,r,a,h,p){return Br(),zc(p),r.flags|=256,Ve(n,r,a,h),r.child}var iu={dehydrated:null,treeContext:null,retryLane:0};function ru(n){return{baseLanes:n,cachePool:null,transitions:null}}function Of(n,r,a){var h=r.pendingProps,p=ee.current,g=!1,M=(r.flags&128)!==0,C;if((C=M)||(C=n!==null&&n.memoizedState===null?!1:(p&2)!==0),C?(g=!0,r.flags&=-129):(n===null||n.memoizedState!==null)&&(p|=1),Kt(ee,p&1),n===null)return Pc(r),n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(r.mode&1?n.data==="$!"?r.lanes=8:r.lanes=1073741824:r.lanes=1,null):(M=h.children,n=h.fallback,g?(h=r.mode,g=r.child,M={mode:"hidden",children:M},!(h&1)&&g!==null?(g.childLanes=0,g.pendingProps=M):g=qa(M,h,0,null),n=cr(n,h,a,null),g.return=r,n.return=r,g.sibling=n,r.child=g,r.child.memoizedState=ru(a),r.memoizedState=iu,n):su(r,M));if(p=n.memoizedState,p!==null&&(C=p.dehydrated,C!==null))return og(n,r,M,h,C,p,a);if(g){g=h.fallback,M=r.mode,p=n.child,C=p.sibling;var P={mode:"hidden",children:h.children};return!(M&1)&&r.child!==p?(h=r.child,h.childLanes=0,h.pendingProps=P,r.deletions=null):(h=Si(p,P),h.subtreeFlags=p.subtreeFlags&14680064),C!==null?g=Si(C,g):(g=cr(g,M,a,null),g.flags|=2),g.return=r,h.return=r,h.sibling=g,r.child=h,h=g,g=r.child,M=n.child.memoizedState,M=M===null?ru(a):{baseLanes:M.baseLanes|a,cachePool:null,transitions:M.transitions},g.memoizedState=M,g.childLanes=n.childLanes&~a,r.memoizedState=iu,h}return g=n.child,n=g.sibling,h=Si(g,{mode:"visible",children:h.children}),!(r.mode&1)&&(h.lanes=a),h.return=r,h.sibling=null,n!==null&&(a=r.deletions,a===null?(r.deletions=[n],r.flags|=16):a.push(n)),r.child=h,r.memoizedState=null,h}function su(n,r){return r=qa({mode:"visible",children:r},n.mode,0,null),r.return=n,n.child=r}function Na(n,r,a,h){return h!==null&&zc(h),Vr(r,n.child,null,a),n=su(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function og(n,r,a,h,p,g,M){if(a)return r.flags&256?(r.flags&=-257,h=$c(Error(e(422))),Na(n,r,M,h)):r.memoizedState!==null?(r.child=n.child,r.flags|=128,null):(g=h.fallback,p=r.mode,h=qa({mode:"visible",children:h.children},p,0,null),g=cr(g,p,M,null),g.flags|=2,h.return=r,g.return=r,h.sibling=g,r.child=h,r.mode&1&&Vr(r,n.child,null,M),r.child.memoizedState=ru(M),r.memoizedState=iu,g);if(!(r.mode&1))return Na(n,r,M,null);if(p.data==="$!"){if(h=p.nextSibling&&p.nextSibling.dataset,h)var C=h.dgst;return h=C,g=Error(e(419)),h=$c(g,h,void 0),Na(n,r,M,h)}if(C=(M&n.childLanes)!==0,Ke||C){if(h=Me,h!==null){switch(M&-M){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=p&(h.suspendedLanes|M)?0:p,p!==0&&p!==g.retryLane&&(g.retryLane=p,Kn(n,p),kn(h,n,p,-1))}return Eu(),h=$c(Error(e(421))),Na(n,r,M,h)}return p.data==="$?"?(r.flags|=128,r.child=n.child,r=xg.bind(null,n),p._reactRetry=r,null):(n=g.treeContext,nn=pi(p.nextSibling),en=r,$t=!0,vn=null,n!==null&&(an[ln++]=Gn,an[ln++]=qn,an[ln++]=tr,Gn=n.id,qn=n.overflow,tr=r),r=su(r,h.children),r.flags|=4096,r)}function Bf(n,r,a){n.lanes|=r;var h=n.alternate;h!==null&&(h.lanes|=r),Ic(n.return,r,a)}function ou(n,r,a,h,p){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:h,tail:a,tailMode:p}:(g.isBackwards=r,g.rendering=null,g.renderingStartTime=0,g.last=h,g.tail=a,g.tailMode=p)}function Vf(n,r,a){var h=r.pendingProps,p=h.revealOrder,g=h.tail;if(Ve(n,r,h.children,a),h=ee.current,h&2)h=h&1|2,r.flags|=128;else{if(n!==null&&n.flags&128)t:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Bf(n,a,r);else if(n.tag===19)Bf(n,a,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break t;for(;n.sibling===null;){if(n.return===null||n.return===r)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}h&=1}if(Kt(ee,h),!(r.mode&1))r.memoizedState=null;else switch(p){case"forwards":for(a=r.child,p=null;a!==null;)n=a.alternate,n!==null&&Aa(n)===null&&(p=a),a=a.sibling;a=p,a===null?(p=r.child,r.child=null):(p=a.sibling,a.sibling=null),ou(r,!1,p,a,g);break;case"backwards":for(a=null,p=r.child,r.child=null;p!==null;){if(n=p.alternate,n!==null&&Aa(n)===null){r.child=p;break}n=p.sibling,p.sibling=a,a=p,p=n}ou(r,!0,a,null,g);break;case"together":ou(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Fa(n,r){!(r.mode&1)&&n!==null&&(n.alternate=null,r.alternate=null,r.flags|=2)}function Zn(n,r,a){if(n!==null&&(r.dependencies=n.dependencies),sr|=r.lanes,!(a&r.childLanes))return null;if(n!==null&&r.child!==n.child)throw Error(e(153));if(r.child!==null){for(n=r.child,a=Si(n,n.pendingProps),r.child=a,a.return=r;n.sibling!==null;)n=n.sibling,a=a.sibling=Si(n,n.pendingProps),a.return=r;a.sibling=null}return r.child}function ag(n,r,a){switch(r.tag){case 3:If(r),Br();break;case 5:$d(r);break;case 1:qe(r.type)&&ya(r);break;case 4:Bc(r,r.stateNode.containerInfo);break;case 10:var h=r.type._context,p=r.memoizedProps.value;Kt(ka,h._currentValue),h._currentValue=p;break;case 13:if(h=r.memoizedState,h!==null)return h.dehydrated!==null?(Kt(ee,ee.current&1),r.flags|=128,null):a&r.child.childLanes?Of(n,r,a):(Kt(ee,ee.current&1),n=Zn(n,r,a),n!==null?n.sibling:null);Kt(ee,ee.current&1);break;case 19:if(h=(a&r.childLanes)!==0,n.flags&128){if(h)return Vf(n,r,a);r.flags|=128}if(p=r.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Kt(ee,ee.current),h)break;return null;case 22:case 23:return r.lanes=0,Nf(n,r,a)}return Zn(n,r,a)}var jf,au,Hf,Uf;jf=function(n,r){for(var a=r.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},au=function(){},Hf=function(n,r,a,h){var p=n.memoizedProps;if(p!==h){n=r.stateNode,ir(zn.current);var g=null;switch(a){case"input":p=xs(n,p),h=xs(n,h),g=[];break;case"select":p=X({},p,{value:void 0}),h=X({},h,{value:void 0}),g=[];break;case"textarea":p=vr(n,p),h=vr(n,h),g=[];break;default:typeof p.onClick!="function"&&typeof h.onClick=="function"&&(n.onclick=fa)}bs(a,h);var M;a=null;for(j in p)if(!h.hasOwnProperty(j)&&p.hasOwnProperty(j)&&p[j]!=null)if(j==="style"){var C=p[j];for(M in C)C.hasOwnProperty(M)&&(a||(a={}),a[M]="")}else j!=="dangerouslySetInnerHTML"&&j!=="children"&&j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(s.hasOwnProperty(j)?g||(g=[]):(g=g||[]).push(j,null));for(j in h){var P=h[j];if(C=p!=null?p[j]:void 0,h.hasOwnProperty(j)&&P!==C&&(P!=null||C!=null))if(j==="style")if(C){for(M in C)!C.hasOwnProperty(M)||P&&P.hasOwnProperty(M)||(a||(a={}),a[M]="");for(M in P)P.hasOwnProperty(M)&&C[M]!==P[M]&&(a||(a={}),a[M]=P[M])}else a||(g||(g=[]),g.push(j,a)),a=P;else j==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,C=C?C.__html:void 0,P!=null&&C!==P&&(g=g||[]).push(j,P)):j==="children"?typeof P!="string"&&typeof P!="number"||(g=g||[]).push(j,""+P):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&(s.hasOwnProperty(j)?(P!=null&&j==="onScroll"&&Zt("scroll",n),g||C===P||(g=[])):(g=g||[]).push(j,P))}a&&(g=g||[]).push("style",a);var j=g;(r.updateQueue=j)&&(r.flags|=4)}},Uf=function(n,r,a,h){a!==h&&(r.flags|=4)};function io(n,r){if(!$t)switch(n.tailMode){case"hidden":r=n.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:h.sibling=null}}function ze(n){var r=n.alternate!==null&&n.alternate.child===n.child,a=0,h=0;if(r)for(var p=n.child;p!==null;)a|=p.lanes|p.childLanes,h|=p.subtreeFlags&14680064,h|=p.flags&14680064,p.return=n,p=p.sibling;else for(p=n.child;p!==null;)a|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=n,p=p.sibling;return n.subtreeFlags|=h,n.childLanes=a,r}function lg(n,r,a){var h=r.pendingProps;switch(Cc(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ze(r),null;case 1:return qe(r.type)&&ma(),ze(r),null;case 3:return h=r.stateNode,Ur(),Yt(Ge),Yt(Re),Hc(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(n===null||n.child===null)&&(wa(r)?r.flags|=4:n===null||n.memoizedState.isDehydrated&&!(r.flags&256)||(r.flags|=1024,vn!==null&&(vu(vn),vn=null))),au(n,r),ze(r),null;case 5:Vc(r);var p=ir(Qs.current);if(a=r.type,n!==null&&r.stateNode!=null)Hf(n,r,a,h,p),n.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!h){if(r.stateNode===null)throw Error(e(166));return ze(r),null}if(n=ir(zn.current),wa(r)){h=r.stateNode,a=r.type;var g=r.memoizedProps;switch(h[Pn]=r,h[Ks]=g,n=(r.mode&1)!==0,a){case"dialog":Zt("cancel",h),Zt("close",h);break;case"iframe":case"object":case"embed":Zt("load",h);break;case"video":case"audio":for(p=0;p<Ws.length;p++)Zt(Ws[p],h);break;case"source":Zt("error",h);break;case"img":case"image":case"link":Zt("error",h),Zt("load",h);break;case"details":Zt("toggle",h);break;case"input":zo(h,g),Zt("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!g.multiple},Zt("invalid",h);break;case"textarea":ks(h,g),Zt("invalid",h)}bs(a,g),p=null;for(var M in g)if(g.hasOwnProperty(M)){var C=g[M];M==="children"?typeof C=="string"?h.textContent!==C&&(g.suppressHydrationWarning!==!0&&da(h.textContent,C,n),p=["children",C]):typeof C=="number"&&h.textContent!==""+C&&(g.suppressHydrationWarning!==!0&&da(h.textContent,C,n),p=["children",""+C]):s.hasOwnProperty(M)&&C!=null&&M==="onScroll"&&Zt("scroll",h)}switch(a){case"input":Bn(h),No(h,g,!0);break;case"textarea":Bn(h),Lo(h);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(h.onclick=fa)}h=p,r.updateQueue=h,h!==null&&(r.flags|=4)}else{M=p.nodeType===9?p:p.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Io(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=M.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof h.is=="string"?n=M.createElement(a,{is:h.is}):(n=M.createElement(a),a==="select"&&(M=n,h.multiple?M.multiple=!0:h.size&&(M.size=h.size))):n=M.createElementNS(n,a),n[Pn]=r,n[Ks]=h,jf(n,r,!1,!1),r.stateNode=n;t:{switch(M=Ss(a,h),a){case"dialog":Zt("cancel",n),Zt("close",n),p=h;break;case"iframe":case"object":case"embed":Zt("load",n),p=h;break;case"video":case"audio":for(p=0;p<Ws.length;p++)Zt(Ws[p],n);p=h;break;case"source":Zt("error",n),p=h;break;case"img":case"image":case"link":Zt("error",n),Zt("load",n),p=h;break;case"details":Zt("toggle",n),p=h;break;case"input":zo(n,h),p=xs(n,h),Zt("invalid",n);break;case"option":p=h;break;case"select":n._wrapperState={wasMultiple:!!h.multiple},p=X({},h,{value:void 0}),Zt("invalid",n);break;case"textarea":ks(n,h),p=vr(n,h),Zt("invalid",n);break;default:p=h}bs(a,p),C=p;for(g in C)if(C.hasOwnProperty(g)){var P=C[g];g==="style"?Oo(n,P):g==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,P!=null&&Do(n,P)):g==="children"?typeof P=="string"?(a!=="textarea"||P!=="")&&Ui(n,P):typeof P=="number"&&Ui(n,""+P):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(s.hasOwnProperty(g)?P!=null&&g==="onScroll"&&Zt("scroll",n):P!=null&&F(n,g,P,M))}switch(a){case"input":Bn(n),No(n,h,!1);break;case"textarea":Bn(n),Lo(n);break;case"option":h.value!=null&&n.setAttribute("value",""+At(h.value));break;case"select":n.multiple=!!h.multiple,g=h.value,g!=null?oi(n,!!h.multiple,g,!1):h.defaultValue!=null&&oi(n,!!h.multiple,h.defaultValue,!0);break;default:typeof p.onClick=="function"&&(n.onclick=fa)}switch(a){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break t;case"img":h=!0;break t;default:h=!1}}h&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return ze(r),null;case 6:if(n&&r.stateNode!=null)Uf(n,r,n.memoizedProps,h);else{if(typeof h!="string"&&r.stateNode===null)throw Error(e(166));if(a=ir(Qs.current),ir(zn.current),wa(r)){if(h=r.stateNode,a=r.memoizedProps,h[Pn]=r,(g=h.nodeValue!==a)&&(n=en,n!==null))switch(n.tag){case 3:da(h.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&da(h.nodeValue,a,(n.mode&1)!==0)}g&&(r.flags|=4)}else h=(a.nodeType===9?a:a.ownerDocument).createTextNode(h),h[Pn]=r,r.stateNode=h}return ze(r),null;case 13:if(Yt(ee),h=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if($t&&nn!==null&&r.mode&1&&!(r.flags&128))Gd(),Br(),r.flags|=98560,g=!1;else if(g=wa(r),h!==null&&h.dehydrated!==null){if(n===null){if(!g)throw Error(e(318));if(g=r.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(e(317));g[Pn]=r}else Br(),!(r.flags&128)&&(r.memoizedState=null),r.flags|=4;ze(r),g=!1}else vn!==null&&(vu(vn),vn=null),g=!0;if(!g)return r.flags&65536?r:null}return r.flags&128?(r.lanes=a,r):(h=h!==null,h!==(n!==null&&n.memoizedState!==null)&&h&&(r.child.flags|=8192,r.mode&1&&(n===null||ee.current&1?xe===0&&(xe=3):Eu())),r.updateQueue!==null&&(r.flags|=4),ze(r),null);case 4:return Ur(),au(n,r),n===null&&Gs(r.stateNode.containerInfo),ze(r),null;case 10:return Lc(r.type._context),ze(r),null;case 17:return qe(r.type)&&ma(),ze(r),null;case 19:if(Yt(ee),g=r.memoizedState,g===null)return ze(r),null;if(h=(r.flags&128)!==0,M=g.rendering,M===null)if(h)io(g,!1);else{if(xe!==0||n!==null&&n.flags&128)for(n=r.child;n!==null;){if(M=Aa(n),M!==null){for(r.flags|=128,io(g,!1),h=M.updateQueue,h!==null&&(r.updateQueue=h,r.flags|=4),r.subtreeFlags=0,h=a,a=r.child;a!==null;)g=a,n=h,g.flags&=14680066,M=g.alternate,M===null?(g.childLanes=0,g.lanes=n,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=M.childLanes,g.lanes=M.lanes,g.child=M.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=M.memoizedProps,g.memoizedState=M.memoizedState,g.updateQueue=M.updateQueue,g.type=M.type,n=M.dependencies,g.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Kt(ee,ee.current&1|2),r.child}n=n.sibling}g.tail!==null&&Xt()>Kr&&(r.flags|=128,h=!0,io(g,!1),r.lanes=4194304)}else{if(!h)if(n=Aa(M),n!==null){if(r.flags|=128,h=!0,a=n.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),io(g,!0),g.tail===null&&g.tailMode==="hidden"&&!M.alternate&&!$t)return ze(r),null}else 2*Xt()-g.renderingStartTime>Kr&&a!==1073741824&&(r.flags|=128,h=!0,io(g,!1),r.lanes=4194304);g.isBackwards?(M.sibling=r.child,r.child=M):(a=g.last,a!==null?a.sibling=M:r.child=M,g.last=M)}return g.tail!==null?(r=g.tail,g.rendering=r,g.tail=r.sibling,g.renderingStartTime=Xt(),r.sibling=null,a=ee.current,Kt(ee,h?a&1|2:a&1),r):(ze(r),null);case 22:case 23:return wu(),h=r.memoizedState!==null,n!==null&&n.memoizedState!==null!==h&&(r.flags|=8192),h&&r.mode&1?rn&1073741824&&(ze(r),r.subtreeFlags&6&&(r.flags|=8192)):ze(r),null;case 24:return null;case 25:return null}throw Error(e(156,r.tag))}function cg(n,r){switch(Cc(r),r.tag){case 1:return qe(r.type)&&ma(),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return Ur(),Yt(Ge),Yt(Re),Hc(),n=r.flags,n&65536&&!(n&128)?(r.flags=n&-65537|128,r):null;case 5:return Vc(r),null;case 13:if(Yt(ee),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(e(340));Br()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return Yt(ee),null;case 4:return Ur(),null;case 10:return Lc(r.type._context),null;case 22:case 23:return wu(),null;case 24:return null;default:return null}}var La=!1,Ne=!1,ug=typeof WeakSet=="function"?WeakSet:Set,vt=null;function Gr(n,r){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(h){se(n,r,h)}else a.current=null}function lu(n,r,a){try{a()}catch(h){se(n,r,h)}}var Wf=!1;function hg(n,r){if(wc=yn,n=Ed(),dc(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else t:{a=(a=n.ownerDocument)&&a.defaultView||window;var h=a.getSelection&&a.getSelection();if(h&&h.rangeCount!==0){a=h.anchorNode;var p=h.anchorOffset,g=h.focusNode;h=h.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break t}var M=0,C=-1,P=-1,j=0,$=0,it=n,J=null;e:for(;;){for(var mt;it!==a||p!==0&&it.nodeType!==3||(C=M+p),it!==g||h!==0&&it.nodeType!==3||(P=M+h),it.nodeType===3&&(M+=it.nodeValue.length),(mt=it.firstChild)!==null;)J=it,it=mt;for(;;){if(it===n)break e;if(J===a&&++j===p&&(C=M),J===g&&++$===h&&(P=M),(mt=it.nextSibling)!==null)break;it=J,J=it.parentNode}it=mt}a=C===-1||P===-1?null:{start:C,end:P}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ec={focusedElem:n,selectionRange:a},yn=!1,vt=r;vt!==null;)if(r=vt,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,vt=n;else for(;vt!==null;){r=vt;try{var xt=r.alternate;if(r.flags&1024)switch(r.tag){case 0:case 11:case 15:break;case 1:if(xt!==null){var kt=xt.memoizedProps,ue=xt.memoizedState,D=r.stateNode,N=D.getSnapshotBeforeUpdate(r.elementType===r.type?kt:xn(r.type,kt),ue);D.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var B=r.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(e(163))}}catch(at){se(r,r.return,at)}if(n=r.sibling,n!==null){n.return=r.return,vt=n;break}vt=r.return}return xt=Wf,Wf=!1,xt}function ro(n,r,a){var h=r.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var p=h=h.next;do{if((p.tag&n)===n){var g=p.destroy;p.destroy=void 0,g!==void 0&&lu(r,a,g)}p=p.next}while(p!==h)}}function Ia(n,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&n)===n){var h=a.create;a.destroy=h()}a=a.next}while(a!==r)}}function cu(n){var r=n.ref;if(r!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof r=="function"?r(n):r.current=n}}function Gf(n){var r=n.alternate;r!==null&&(n.alternate=null,Gf(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&(delete r[Pn],delete r[Ks],delete r[Sc],delete r[K0],delete r[X0])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function qf(n){return n.tag===5||n.tag===3||n.tag===4}function Kf(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||qf(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function uu(n,r,a){var h=n.tag;if(h===5||h===6)n=n.stateNode,r?a.nodeType===8?a.parentNode.insertBefore(n,r):a.insertBefore(n,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(n,a)):(r=a,r.appendChild(n)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=fa));else if(h!==4&&(n=n.child,n!==null))for(uu(n,r,a),n=n.sibling;n!==null;)uu(n,r,a),n=n.sibling}function hu(n,r,a){var h=n.tag;if(h===5||h===6)n=n.stateNode,r?a.insertBefore(n,r):a.appendChild(n);else if(h!==4&&(n=n.child,n!==null))for(hu(n,r,a),n=n.sibling;n!==null;)hu(n,r,a),n=n.sibling}var Te=null,wn=!1;function wi(n,r,a){for(a=a.child;a!==null;)Xf(n,r,a),a=a.sibling}function Xf(n,r,a){if(Qe&&typeof Qe.onCommitFiberUnmount=="function")try{Qe.onCommitFiberUnmount(Zi,a)}catch{}switch(a.tag){case 5:Ne||Gr(a,r);case 6:var h=Te,p=wn;Te=null,wi(n,r,a),Te=h,wn=p,Te!==null&&(wn?(n=Te,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Te.removeChild(a.stateNode));break;case 18:Te!==null&&(wn?(n=Te,a=a.stateNode,n.nodeType===8?bc(n.parentNode,a):n.nodeType===1&&bc(n,a),Be(n)):bc(Te,a.stateNode));break;case 4:h=Te,p=wn,Te=a.stateNode.containerInfo,wn=!0,wi(n,r,a),Te=h,wn=p;break;case 0:case 11:case 14:case 15:if(!Ne&&(h=a.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){p=h=h.next;do{var g=p,M=g.destroy;g=g.tag,M!==void 0&&(g&2||g&4)&&lu(a,r,M),p=p.next}while(p!==h)}wi(n,r,a);break;case 1:if(!Ne&&(Gr(a,r),h=a.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=a.memoizedProps,h.state=a.memoizedState,h.componentWillUnmount()}catch(C){se(a,r,C)}wi(n,r,a);break;case 21:wi(n,r,a);break;case 22:a.mode&1?(Ne=(h=Ne)||a.memoizedState!==null,wi(n,r,a),Ne=h):wi(n,r,a);break;default:wi(n,r,a)}}function Zf(n){var r=n.updateQueue;if(r!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new ug),r.forEach(function(h){var p=wg.bind(null,n,h);a.has(h)||(a.add(h),h.then(p,p))})}}function En(n,r){var a=r.deletions;if(a!==null)for(var h=0;h<a.length;h++){var p=a[h];try{var g=n,M=r,C=M;t:for(;C!==null;){switch(C.tag){case 5:Te=C.stateNode,wn=!1;break t;case 3:Te=C.stateNode.containerInfo,wn=!0;break t;case 4:Te=C.stateNode.containerInfo,wn=!0;break t}C=C.return}if(Te===null)throw Error(e(160));Xf(g,M,p),Te=null,wn=!1;var P=p.alternate;P!==null&&(P.return=null),p.return=null}catch(j){se(p,r,j)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Yf(r,n),r=r.sibling}function Yf(n,r){var a=n.alternate,h=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(En(r,n),Fn(n),h&4){try{ro(3,n,n.return),Ia(3,n)}catch(kt){se(n,n.return,kt)}try{ro(5,n,n.return)}catch(kt){se(n,n.return,kt)}}break;case 1:En(r,n),Fn(n),h&512&&a!==null&&Gr(a,a.return);break;case 5:if(En(r,n),Fn(n),h&512&&a!==null&&Gr(a,a.return),n.flags&32){var p=n.stateNode;try{Ui(p,"")}catch(kt){se(n,n.return,kt)}}if(h&4&&(p=n.stateNode,p!=null)){var g=n.memoizedProps,M=a!==null?a.memoizedProps:g,C=n.type,P=n.updateQueue;if(n.updateQueue=null,P!==null)try{C==="input"&&g.type==="radio"&&g.name!=null&&ws(p,g),Ss(C,M);var j=Ss(C,g);for(M=0;M<P.length;M+=2){var $=P[M],it=P[M+1];$==="style"?Oo(p,it):$==="dangerouslySetInnerHTML"?Do(p,it):$==="children"?Ui(p,it):F(p,$,it,j)}switch(C){case"input":gr(p,g);break;case"textarea":Fo(p,g);break;case"select":var J=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!g.multiple;var mt=g.value;mt!=null?oi(p,!!g.multiple,mt,!1):J!==!!g.multiple&&(g.defaultValue!=null?oi(p,!!g.multiple,g.defaultValue,!0):oi(p,!!g.multiple,g.multiple?[]:"",!1))}p[Ks]=g}catch(kt){se(n,n.return,kt)}}break;case 6:if(En(r,n),Fn(n),h&4){if(n.stateNode===null)throw Error(e(162));p=n.stateNode,g=n.memoizedProps;try{p.nodeValue=g}catch(kt){se(n,n.return,kt)}}break;case 3:if(En(r,n),Fn(n),h&4&&a!==null&&a.memoizedState.isDehydrated)try{Be(r.containerInfo)}catch(kt){se(n,n.return,kt)}break;case 4:En(r,n),Fn(n);break;case 13:En(r,n),Fn(n),p=n.child,p.flags&8192&&(g=p.memoizedState!==null,p.stateNode.isHidden=g,!g||p.alternate!==null&&p.alternate.memoizedState!==null||(pu=Xt())),h&4&&Zf(n);break;case 22:if($=a!==null&&a.memoizedState!==null,n.mode&1?(Ne=(j=Ne)||$,En(r,n),Ne=j):En(r,n),Fn(n),h&8192){if(j=n.memoizedState!==null,(n.stateNode.isHidden=j)&&!$&&n.mode&1)for(vt=n,$=n.child;$!==null;){for(it=vt=$;vt!==null;){switch(J=vt,mt=J.child,J.tag){case 0:case 11:case 14:case 15:ro(4,J,J.return);break;case 1:Gr(J,J.return);var xt=J.stateNode;if(typeof xt.componentWillUnmount=="function"){h=J,a=J.return;try{r=h,xt.props=r.memoizedProps,xt.state=r.memoizedState,xt.componentWillUnmount()}catch(kt){se(h,a,kt)}}break;case 5:Gr(J,J.return);break;case 22:if(J.memoizedState!==null){$f(it);continue}}mt!==null?(mt.return=J,vt=mt):$f(it)}$=$.sibling}t:for($=null,it=n;;){if(it.tag===5){if($===null){$=it;try{p=it.stateNode,j?(g=p.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(C=it.stateNode,P=it.memoizedProps.style,M=P!=null&&P.hasOwnProperty("display")?P.display:null,C.style.display=Ms("display",M))}catch(kt){se(n,n.return,kt)}}}else if(it.tag===6){if($===null)try{it.stateNode.nodeValue=j?"":it.memoizedProps}catch(kt){se(n,n.return,kt)}}else if((it.tag!==22&&it.tag!==23||it.memoizedState===null||it===n)&&it.child!==null){it.child.return=it,it=it.child;continue}if(it===n)break t;for(;it.sibling===null;){if(it.return===null||it.return===n)break t;$===it&&($=null),it=it.return}$===it&&($=null),it.sibling.return=it.return,it=it.sibling}}break;case 19:En(r,n),Fn(n),h&4&&Zf(n);break;case 21:break;default:En(r,n),Fn(n)}}function Fn(n){var r=n.flags;if(r&2){try{t:{for(var a=n.return;a!==null;){if(qf(a)){var h=a;break t}a=a.return}throw Error(e(160))}switch(h.tag){case 5:var p=h.stateNode;h.flags&32&&(Ui(p,""),h.flags&=-33);var g=Kf(n);hu(n,g,p);break;case 3:case 4:var M=h.stateNode.containerInfo,C=Kf(n);uu(n,C,M);break;default:throw Error(e(161))}}catch(P){se(n,n.return,P)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function dg(n,r,a){vt=n,Jf(n)}function Jf(n,r,a){for(var h=(n.mode&1)!==0;vt!==null;){var p=vt,g=p.child;if(p.tag===22&&h){var M=p.memoizedState!==null||La;if(!M){var C=p.alternate,P=C!==null&&C.memoizedState!==null||Ne;C=La;var j=Ne;if(La=M,(Ne=P)&&!j)for(vt=p;vt!==null;)M=vt,P=M.child,M.tag===22&&M.memoizedState!==null?tp(p):P!==null?(P.return=M,vt=P):tp(p);for(;g!==null;)vt=g,Jf(g),g=g.sibling;vt=p,La=C,Ne=j}Qf(n)}else p.subtreeFlags&8772&&g!==null?(g.return=p,vt=g):Qf(n)}}function Qf(n){for(;vt!==null;){var r=vt;if(r.flags&8772){var a=r.alternate;try{if(r.flags&8772)switch(r.tag){case 0:case 11:case 15:Ne||Ia(5,r);break;case 1:var h=r.stateNode;if(r.flags&4&&!Ne)if(a===null)h.componentDidMount();else{var p=r.elementType===r.type?a.memoizedProps:xn(r.type,a.memoizedProps);h.componentDidUpdate(p,a.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var g=r.updateQueue;g!==null&&Qd(r,g,h);break;case 3:var M=r.updateQueue;if(M!==null){if(a=null,r.child!==null)switch(r.child.tag){case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}Qd(r,M,a)}break;case 5:var C=r.stateNode;if(a===null&&r.flags&4){a=C;var P=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":P.autoFocus&&a.focus();break;case"img":P.src&&(a.src=P.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var j=r.alternate;if(j!==null){var $=j.memoizedState;if($!==null){var it=$.dehydrated;it!==null&&Be(it)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(e(163))}Ne||r.flags&512&&cu(r)}catch(J){se(r,r.return,J)}}if(r===n){vt=null;break}if(a=r.sibling,a!==null){a.return=r.return,vt=a;break}vt=r.return}}function $f(n){for(;vt!==null;){var r=vt;if(r===n){vt=null;break}var a=r.sibling;if(a!==null){a.return=r.return,vt=a;break}vt=r.return}}function tp(n){for(;vt!==null;){var r=vt;try{switch(r.tag){case 0:case 11:case 15:var a=r.return;try{Ia(4,r)}catch(P){se(r,a,P)}break;case 1:var h=r.stateNode;if(typeof h.componentDidMount=="function"){var p=r.return;try{h.componentDidMount()}catch(P){se(r,p,P)}}var g=r.return;try{cu(r)}catch(P){se(r,g,P)}break;case 5:var M=r.return;try{cu(r)}catch(P){se(r,M,P)}}}catch(P){se(r,r.return,P)}if(r===n){vt=null;break}var C=r.sibling;if(C!==null){C.return=r.return,vt=C;break}vt=r.return}}var fg=Math.ceil,Da=I.ReactCurrentDispatcher,du=I.ReactCurrentOwner,hn=I.ReactCurrentBatchConfig,jt=0,Me=null,pe=null,_e=0,rn=0,qr=mi(0),xe=0,so=null,sr=0,Oa=0,fu=0,oo=null,Xe=null,pu=0,Kr=1/0,Yn=null,Ba=!1,mu=null,Ei=null,Va=!1,ki=null,ja=0,ao=0,yu=null,Ha=-1,Ua=0;function je(){return jt&6?Xt():Ha!==-1?Ha:Ha=Xt()}function Mi(n){return n.mode&1?jt&2&&_e!==0?_e&-_e:Y0.transition!==null?(Ua===0&&(Ua=Is()),Ua):(n=Ht,n!==0||(n=window.event,n=n===void 0?16:ed(n.type)),n):1}function kn(n,r,a,h){if(50<ao)throw ao=0,yu=null,Error(e(185));Hn(n,a,h),(!(jt&2)||n!==Me)&&(n===Me&&(!(jt&2)&&(Oa|=a),xe===4&&bi(n,_e)),Ze(n,h),a===1&&jt===0&&!(r.mode&1)&&(Kr=Xt()+500,ga&&gi()))}function Ze(n,r){var a=n.callbackNode;Fs(n,r);var h=Ji(n,n===Me?_e:0);if(h===0)a!==null&&Zo(a),n.callbackNode=null,n.callbackPriority=0;else if(r=h&-h,n.callbackPriority!==r){if(a!=null&&Zo(a),r===1)n.tag===0?Z0(np.bind(null,n)):Vd(np.bind(null,n)),G0(function(){!(jt&6)&&gi()}),a=null;else{switch(ta(h)){case 1:a=zs;break;case 4:a=Ns;break;case 16:a=Mr;break;case 536870912:a=Jo;break;default:a=Mr}a=up(a,ep.bind(null,n))}n.callbackPriority=r,n.callbackNode=a}}function ep(n,r){if(Ha=-1,Ua=0,jt&6)throw Error(e(327));var a=n.callbackNode;if(Xr()&&n.callbackNode!==a)return null;var h=Ji(n,n===Me?_e:0);if(h===0)return null;if(h&30||h&n.expiredLanes||r)r=Wa(n,h);else{r=h;var p=jt;jt|=2;var g=rp();(Me!==n||_e!==r)&&(Yn=null,Kr=Xt()+500,ar(n,r));do try{yg();break}catch(C){ip(n,C)}while(!0);Fc(),Da.current=g,jt=p,pe!==null?r=0:(Me=null,_e=0,r=xe)}if(r!==0){if(r===2&&(p=Ls(n),p!==0&&(h=p,r=gu(n,p))),r===1)throw a=so,ar(n,0),bi(n,h),Ze(n,Xt()),a;if(r===6)bi(n,h);else{if(p=n.current.alternate,!(h&30)&&!pg(p)&&(r=Wa(n,h),r===2&&(g=Ls(n),g!==0&&(h=g,r=gu(n,g))),r===1))throw a=so,ar(n,0),bi(n,h),Ze(n,Xt()),a;switch(n.finishedWork=p,n.finishedLanes=h,r){case 0:case 1:throw Error(e(345));case 2:lr(n,Xe,Yn);break;case 3:if(bi(n,h),(h&130023424)===h&&(r=pu+500-Xt(),10<r)){if(Ji(n,0)!==0)break;if(p=n.suspendedLanes,(p&h)!==h){je(),n.pingedLanes|=n.suspendedLanes&p;break}n.timeoutHandle=Mc(lr.bind(null,n,Xe,Yn),r);break}lr(n,Xe,Yn);break;case 4:if(bi(n,h),(h&4194240)===h)break;for(r=n.eventTimes,p=-1;0<h;){var M=31-$e(h);g=1<<M,M=r[M],M>p&&(p=M),h&=~g}if(h=p,h=Xt()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*fg(h/1960))-h,10<h){n.timeoutHandle=Mc(lr.bind(null,n,Xe,Yn),h);break}lr(n,Xe,Yn);break;case 5:lr(n,Xe,Yn);break;default:throw Error(e(329))}}}return Ze(n,Xt()),n.callbackNode===a?ep.bind(null,n):null}function gu(n,r){var a=oo;return n.current.memoizedState.isDehydrated&&(ar(n,r).flags|=256),n=Wa(n,r),n!==2&&(r=Xe,Xe=a,r!==null&&vu(r)),n}function vu(n){Xe===null?Xe=n:Xe.push.apply(Xe,n)}function pg(n){for(var r=n;;){if(r.flags&16384){var a=r.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var h=0;h<a.length;h++){var p=a[h],g=p.getSnapshot;p=p.value;try{if(!gn(g(),p))return!1}catch{return!1}}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function bi(n,r){for(r&=~fu,r&=~Oa,n.suspendedLanes|=r,n.pingedLanes&=~r,n=n.expirationTimes;0<r;){var a=31-$e(r),h=1<<a;n[a]=-1,r&=~h}}function np(n){if(jt&6)throw Error(e(327));Xr();var r=Ji(n,0);if(!(r&1))return Ze(n,Xt()),null;var a=Wa(n,r);if(n.tag!==0&&a===2){var h=Ls(n);h!==0&&(r=h,a=gu(n,h))}if(a===1)throw a=so,ar(n,0),bi(n,r),Ze(n,Xt()),a;if(a===6)throw Error(e(345));return n.finishedWork=n.current.alternate,n.finishedLanes=r,lr(n,Xe,Yn),Ze(n,Xt()),null}function xu(n,r){var a=jt;jt|=1;try{return n(r)}finally{jt=a,jt===0&&(Kr=Xt()+500,ga&&gi())}}function or(n){ki!==null&&ki.tag===0&&!(jt&6)&&Xr();var r=jt;jt|=1;var a=hn.transition,h=Ht;try{if(hn.transition=null,Ht=1,n)return n()}finally{Ht=h,hn.transition=a,jt=r,!(jt&6)&&gi()}}function wu(){rn=qr.current,Yt(qr)}function ar(n,r){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,W0(a)),pe!==null)for(a=pe.return;a!==null;){var h=a;switch(Cc(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&ma();break;case 3:Ur(),Yt(Ge),Yt(Re),Hc();break;case 5:Vc(h);break;case 4:Ur();break;case 13:Yt(ee);break;case 19:Yt(ee);break;case 10:Lc(h.type._context);break;case 22:case 23:wu()}a=a.return}if(Me=n,pe=n=Si(n.current,null),_e=rn=r,xe=0,so=null,fu=Oa=sr=0,Xe=oo=null,nr!==null){for(r=0;r<nr.length;r++)if(a=nr[r],h=a.interleaved,h!==null){a.interleaved=null;var p=h.next,g=a.pending;if(g!==null){var M=g.next;g.next=p,h.next=M}a.pending=h}nr=null}return n}function ip(n,r){do{var a=pe;try{if(Fc(),Ta.current=Pa,_a){for(var h=ne.memoizedState;h!==null;){var p=h.queue;p!==null&&(p.pending=null),h=h.next}_a=!1}if(rr=0,ke=ve=ne=null,$s=!1,to=0,du.current=null,a===null||a.return===null){xe=1,so=r,pe=null;break}t:{var g=n,M=a.return,C=a,P=r;if(r=_e,C.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){var j=P,$=C,it=$.tag;if(!($.mode&1)&&(it===0||it===11||it===15)){var J=$.alternate;J?($.updateQueue=J.updateQueue,$.memoizedState=J.memoizedState,$.lanes=J.lanes):($.updateQueue=null,$.memoizedState=null)}var mt=_f(M);if(mt!==null){mt.flags&=-257,Cf(mt,M,C,g,r),mt.mode&1&&Tf(g,j,r),r=mt,P=j;var xt=r.updateQueue;if(xt===null){var kt=new Set;kt.add(P),r.updateQueue=kt}else xt.add(P);break t}else{if(!(r&1)){Tf(g,j,r),Eu();break t}P=Error(e(426))}}else if($t&&C.mode&1){var ue=_f(M);if(ue!==null){!(ue.flags&65536)&&(ue.flags|=256),Cf(ue,M,C,g,r),zc(Wr(P,C));break t}}g=P=Wr(P,C),xe!==4&&(xe=2),oo===null?oo=[g]:oo.push(g),g=M;do{switch(g.tag){case 3:g.flags|=65536,r&=-r,g.lanes|=r;var D=Sf(g,P,r);Jd(g,D);break t;case 1:C=P;var N=g.type,B=g.stateNode;if(!(g.flags&128)&&(typeof N.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(Ei===null||!Ei.has(B)))){g.flags|=65536,r&=-r,g.lanes|=r;var at=Af(g,C,r);Jd(g,at);break t}}g=g.return}while(g!==null)}op(a)}catch(bt){r=bt,pe===a&&a!==null&&(pe=a=a.return);continue}break}while(!0)}function rp(){var n=Da.current;return Da.current=Pa,n===null?Pa:n}function Eu(){(xe===0||xe===3||xe===2)&&(xe=4),Me===null||!(sr&268435455)&&!(Oa&268435455)||bi(Me,_e)}function Wa(n,r){var a=jt;jt|=2;var h=rp();(Me!==n||_e!==r)&&(Yn=null,ar(n,r));do try{mg();break}catch(p){ip(n,p)}while(!0);if(Fc(),jt=a,Da.current=h,pe!==null)throw Error(e(261));return Me=null,_e=0,xe}function mg(){for(;pe!==null;)sp(pe)}function yg(){for(;pe!==null&&!Oe();)sp(pe)}function sp(n){var r=cp(n.alternate,n,rn);n.memoizedProps=n.pendingProps,r===null?op(n):pe=r,du.current=null}function op(n){var r=n;do{var a=r.alternate;if(n=r.return,r.flags&32768){if(a=cg(a,r),a!==null){a.flags&=32767,pe=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{xe=6,pe=null;return}}else if(a=lg(a,r,rn),a!==null){pe=a;return}if(r=r.sibling,r!==null){pe=r;return}pe=r=n}while(r!==null);xe===0&&(xe=5)}function lr(n,r,a){var h=Ht,p=hn.transition;try{hn.transition=null,Ht=1,gg(n,r,a,h)}finally{hn.transition=p,Ht=h}return null}function gg(n,r,a,h){do Xr();while(ki!==null);if(jt&6)throw Error(e(327));a=n.finishedWork;var p=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(e(177));n.callbackNode=null,n.callbackPriority=0;var g=a.lanes|a.childLanes;if(Tr(n,g),n===Me&&(pe=Me=null,_e=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||Va||(Va=!0,up(Mr,function(){return Xr(),null})),g=(a.flags&15990)!==0,a.subtreeFlags&15990||g){g=hn.transition,hn.transition=null;var M=Ht;Ht=1;var C=jt;jt|=4,du.current=null,hg(n,a),Yf(a,n),D0(Ec),yn=!!wc,Ec=wc=null,n.current=a,dg(a),li(),jt=C,Ht=M,hn.transition=g}else n.current=a;if(Va&&(Va=!1,ki=n,ja=p),g=n.pendingLanes,g===0&&(Ei=null),ci(a.stateNode),Ze(n,Xt()),r!==null)for(h=n.onRecoverableError,a=0;a<r.length;a++)p=r[a],h(p.value,{componentStack:p.stack,digest:p.digest});if(Ba)throw Ba=!1,n=mu,mu=null,n;return ja&1&&n.tag!==0&&Xr(),g=n.pendingLanes,g&1?n===yu?ao++:(ao=0,yu=n):ao=0,gi(),null}function Xr(){if(ki!==null){var n=ta(ja),r=hn.transition,a=Ht;try{if(hn.transition=null,Ht=16>n?16:n,ki===null)var h=!1;else{if(n=ki,ki=null,ja=0,jt&6)throw Error(e(331));var p=jt;for(jt|=4,vt=n.current;vt!==null;){var g=vt,M=g.child;if(vt.flags&16){var C=g.deletions;if(C!==null){for(var P=0;P<C.length;P++){var j=C[P];for(vt=j;vt!==null;){var $=vt;switch($.tag){case 0:case 11:case 15:ro(8,$,g)}var it=$.child;if(it!==null)it.return=$,vt=it;else for(;vt!==null;){$=vt;var J=$.sibling,mt=$.return;if(Gf($),$===j){vt=null;break}if(J!==null){J.return=mt,vt=J;break}vt=mt}}}var xt=g.alternate;if(xt!==null){var kt=xt.child;if(kt!==null){xt.child=null;do{var ue=kt.sibling;kt.sibling=null,kt=ue}while(kt!==null)}}vt=g}}if(g.subtreeFlags&2064&&M!==null)M.return=g,vt=M;else t:for(;vt!==null;){if(g=vt,g.flags&2048)switch(g.tag){case 0:case 11:case 15:ro(9,g,g.return)}var D=g.sibling;if(D!==null){D.return=g.return,vt=D;break t}vt=g.return}}var N=n.current;for(vt=N;vt!==null;){M=vt;var B=M.child;if(M.subtreeFlags&2064&&B!==null)B.return=M,vt=B;else t:for(M=N;vt!==null;){if(C=vt,C.flags&2048)try{switch(C.tag){case 0:case 11:case 15:Ia(9,C)}}catch(bt){se(C,C.return,bt)}if(C===M){vt=null;break t}var at=C.sibling;if(at!==null){at.return=C.return,vt=at;break t}vt=C.return}}if(jt=p,gi(),Qe&&typeof Qe.onPostCommitFiberRoot=="function")try{Qe.onPostCommitFiberRoot(Zi,n)}catch{}h=!0}return h}finally{Ht=a,hn.transition=r}}return!1}function ap(n,r,a){r=Wr(a,r),r=Sf(n,r,1),n=xi(n,r,1),r=je(),n!==null&&(Hn(n,1,r),Ze(n,r))}function se(n,r,a){if(n.tag===3)ap(n,n,a);else for(;r!==null;){if(r.tag===3){ap(r,n,a);break}else if(r.tag===1){var h=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Ei===null||!Ei.has(h))){n=Wr(a,n),n=Af(r,n,1),r=xi(r,n,1),n=je(),r!==null&&(Hn(r,1,n),Ze(r,n));break}}r=r.return}}function vg(n,r,a){var h=n.pingCache;h!==null&&h.delete(r),r=je(),n.pingedLanes|=n.suspendedLanes&a,Me===n&&(_e&a)===a&&(xe===4||xe===3&&(_e&130023424)===_e&&500>Xt()-pu?ar(n,0):fu|=a),Ze(n,r)}function lp(n,r){r===0&&(n.mode&1?(r=Sr,Sr<<=1,!(Sr&130023424)&&(Sr=4194304)):r=1);var a=je();n=Kn(n,r),n!==null&&(Hn(n,r,a),Ze(n,a))}function xg(n){var r=n.memoizedState,a=0;r!==null&&(a=r.retryLane),lp(n,a)}function wg(n,r){var a=0;switch(n.tag){case 13:var h=n.stateNode,p=n.memoizedState;p!==null&&(a=p.retryLane);break;case 19:h=n.stateNode;break;default:throw Error(e(314))}h!==null&&h.delete(r),lp(n,a)}var cp;cp=function(n,r,a){if(n!==null)if(n.memoizedProps!==r.pendingProps||Ge.current)Ke=!0;else{if(!(n.lanes&a)&&!(r.flags&128))return Ke=!1,ag(n,r,a);Ke=!!(n.flags&131072)}else Ke=!1,$t&&r.flags&1048576&&jd(r,xa,r.index);switch(r.lanes=0,r.tag){case 2:var h=r.type;Fa(n,r),n=r.pendingProps;var p=Ir(r,Re.current);Hr(r,a),p=Gc(null,r,h,n,p,a);var g=qc();return r.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,qe(h)?(g=!0,ya(r)):g=!1,r.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,Oc(r),p.updater=za,r.stateNode=p,p._reactInternals=r,Qc(r,h,n,a),r=nu(null,r,h,!0,g,a)):(r.tag=0,$t&&g&&_c(r),Ve(null,r,p,a),r=r.child),r;case 16:h=r.elementType;t:{switch(Fa(n,r),n=r.pendingProps,p=h._init,h=p(h._payload),r.type=h,p=r.tag=kg(h),n=xn(h,n),p){case 0:r=eu(null,r,h,n,a);break t;case 1:r=Lf(null,r,h,n,a);break t;case 11:r=Rf(null,r,h,n,a);break t;case 14:r=Pf(null,r,h,xn(h.type,n),a);break t}throw Error(e(306,h,""))}return r;case 0:return h=r.type,p=r.pendingProps,p=r.elementType===h?p:xn(h,p),eu(n,r,h,p,a);case 1:return h=r.type,p=r.pendingProps,p=r.elementType===h?p:xn(h,p),Lf(n,r,h,p,a);case 3:t:{if(If(r),n===null)throw Error(e(387));h=r.pendingProps,g=r.memoizedState,p=g.element,Yd(n,r),Sa(r,h,null,a);var M=r.memoizedState;if(h=M.element,g.isDehydrated)if(g={element:h,isDehydrated:!1,cache:M.cache,pendingSuspenseBoundaries:M.pendingSuspenseBoundaries,transitions:M.transitions},r.updateQueue.baseState=g,r.memoizedState=g,r.flags&256){p=Wr(Error(e(423)),r),r=Df(n,r,h,a,p);break t}else if(h!==p){p=Wr(Error(e(424)),r),r=Df(n,r,h,a,p);break t}else for(nn=pi(r.stateNode.containerInfo.firstChild),en=r,$t=!0,vn=null,a=Xd(r,null,h,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Br(),h===p){r=Zn(n,r,a);break t}Ve(n,r,h,a)}r=r.child}return r;case 5:return $d(r),n===null&&Pc(r),h=r.type,p=r.pendingProps,g=n!==null?n.memoizedProps:null,M=p.children,kc(h,p)?M=null:g!==null&&kc(h,g)&&(r.flags|=32),Ff(n,r),Ve(n,r,M,a),r.child;case 6:return n===null&&Pc(r),null;case 13:return Of(n,r,a);case 4:return Bc(r,r.stateNode.containerInfo),h=r.pendingProps,n===null?r.child=Vr(r,null,h,a):Ve(n,r,h,a),r.child;case 11:return h=r.type,p=r.pendingProps,p=r.elementType===h?p:xn(h,p),Rf(n,r,h,p,a);case 7:return Ve(n,r,r.pendingProps,a),r.child;case 8:return Ve(n,r,r.pendingProps.children,a),r.child;case 12:return Ve(n,r,r.pendingProps.children,a),r.child;case 10:t:{if(h=r.type._context,p=r.pendingProps,g=r.memoizedProps,M=p.value,Kt(ka,h._currentValue),h._currentValue=M,g!==null)if(gn(g.value,M)){if(g.children===p.children&&!Ge.current){r=Zn(n,r,a);break t}}else for(g=r.child,g!==null&&(g.return=r);g!==null;){var C=g.dependencies;if(C!==null){M=g.child;for(var P=C.firstContext;P!==null;){if(P.context===h){if(g.tag===1){P=Xn(-1,a&-a),P.tag=2;var j=g.updateQueue;if(j!==null){j=j.shared;var $=j.pending;$===null?P.next=P:(P.next=$.next,$.next=P),j.pending=P}}g.lanes|=a,P=g.alternate,P!==null&&(P.lanes|=a),Ic(g.return,a,r),C.lanes|=a;break}P=P.next}}else if(g.tag===10)M=g.type===r.type?null:g.child;else if(g.tag===18){if(M=g.return,M===null)throw Error(e(341));M.lanes|=a,C=M.alternate,C!==null&&(C.lanes|=a),Ic(M,a,r),M=g.sibling}else M=g.child;if(M!==null)M.return=g;else for(M=g;M!==null;){if(M===r){M=null;break}if(g=M.sibling,g!==null){g.return=M.return,M=g;break}M=M.return}g=M}Ve(n,r,p.children,a),r=r.child}return r;case 9:return p=r.type,h=r.pendingProps.children,Hr(r,a),p=cn(p),h=h(p),r.flags|=1,Ve(n,r,h,a),r.child;case 14:return h=r.type,p=xn(h,r.pendingProps),p=xn(h.type,p),Pf(n,r,h,p,a);case 15:return zf(n,r,r.type,r.pendingProps,a);case 17:return h=r.type,p=r.pendingProps,p=r.elementType===h?p:xn(h,p),Fa(n,r),r.tag=1,qe(h)?(n=!0,ya(r)):n=!1,Hr(r,a),Mf(r,h,p),Qc(r,h,p,a),nu(null,r,h,!0,n,a);case 19:return Vf(n,r,a);case 22:return Nf(n,r,a)}throw Error(e(156,r.tag))};function up(n,r){return Xo(n,r)}function Eg(n,r,a,h){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dn(n,r,a,h){return new Eg(n,r,a,h)}function ku(n){return n=n.prototype,!(!n||!n.isReactComponent)}function kg(n){if(typeof n=="function")return ku(n)?1:0;if(n!=null){if(n=n.$$typeof,n===ht)return 11;if(n===St)return 14}return 2}function Si(n,r){var a=n.alternate;return a===null?(a=dn(n.tag,r,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=r,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,r=n.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Ga(n,r,a,h,p,g){var M=2;if(h=n,typeof n=="function")ku(n)&&(M=1);else if(typeof n=="string")M=5;else t:switch(n){case G:return cr(a.children,p,g,r);case Y:M=8,p|=8;break;case ct:return n=dn(12,a,r,p|2),n.elementType=ct,n.lanes=g,n;case Tt:return n=dn(13,a,r,p),n.elementType=Tt,n.lanes=g,n;case Ft:return n=dn(19,a,r,p),n.elementType=Ft,n.lanes=g,n;case wt:return qa(a,p,g,r);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case pt:M=10;break t;case et:M=9;break t;case ht:M=11;break t;case St:M=14;break t;case nt:M=16,h=null;break t}throw Error(e(130,n==null?n:typeof n,""))}return r=dn(M,a,r,p),r.elementType=n,r.type=h,r.lanes=g,r}function cr(n,r,a,h){return n=dn(7,n,h,r),n.lanes=a,n}function qa(n,r,a,h){return n=dn(22,n,h,r),n.elementType=wt,n.lanes=a,n.stateNode={isHidden:!1},n}function Mu(n,r,a){return n=dn(6,n,null,r),n.lanes=a,n}function bu(n,r,a){return r=dn(4,n.children!==null?n.children:[],n.key,r),r.lanes=a,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}function Mg(n,r,a,h,p){this.tag=r,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ar(0),this.expirationTimes=Ar(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ar(0),this.identifierPrefix=h,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function Su(n,r,a,h,p,g,M,C,P){return n=new Mg(n,r,a,C,P),r===1?(r=1,g===!0&&(r|=8)):r=0,g=dn(3,null,null,r),n.current=g,g.stateNode=n,g.memoizedState={element:h,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oc(g),n}function bg(n,r,a){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:q,key:h==null?null:""+h,children:n,containerInfo:r,implementation:a}}function hp(n){if(!n)return yi;n=n._reactInternals;t:{if(jn(n)!==n||n.tag!==1)throw Error(e(170));var r=n;do{switch(r.tag){case 3:r=r.stateNode.context;break t;case 1:if(qe(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break t}}r=r.return}while(r!==null);throw Error(e(171))}if(n.tag===1){var a=n.type;if(qe(a))return Od(n,a,r)}return r}function dp(n,r,a,h,p,g,M,C,P){return n=Su(a,h,!0,n,p,g,M,C,P),n.context=hp(null),a=n.current,h=je(),p=Mi(a),g=Xn(h,p),g.callback=r??null,xi(a,g,p),n.current.lanes=p,Hn(n,p,h),Ze(n,h),n}function Ka(n,r,a,h){var p=r.current,g=je(),M=Mi(p);return a=hp(a),r.context===null?r.context=a:r.pendingContext=a,r=Xn(g,M),r.payload={element:n},h=h===void 0?null:h,h!==null&&(r.callback=h),n=xi(p,r,M),n!==null&&(kn(n,p,M,g),ba(n,p,M)),M}function Xa(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function fp(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<r?a:r}}function Au(n,r){fp(n,r),(n=n.alternate)&&fp(n,r)}function Sg(){return null}var pp=typeof reportError=="function"?reportError:function(n){console.error(n)};function Tu(n){this._internalRoot=n}Za.prototype.render=Tu.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(e(409));Ka(n,r,null,null)},Za.prototype.unmount=Tu.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;or(function(){Ka(null,n,null,null)}),r[Un]=null}};function Za(n){this._internalRoot=n}Za.prototype.unstable_scheduleHydration=function(n){if(n){var r=w();n={blockedOn:null,target:n,priority:r};for(var a=0;a<gt.length&&r!==0&&r<gt[a].priority;a++);gt.splice(a,0,n),a===0&&_t(n)}};function _u(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Ya(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function mp(){}function Ag(n,r,a,h,p){if(p){if(typeof h=="function"){var g=h;h=function(){var j=Xa(M);g.call(j)}}var M=dp(r,h,n,0,null,!1,!1,"",mp);return n._reactRootContainer=M,n[Un]=M.current,Gs(n.nodeType===8?n.parentNode:n),or(),M}for(;p=n.lastChild;)n.removeChild(p);if(typeof h=="function"){var C=h;h=function(){var j=Xa(P);C.call(j)}}var P=Su(n,0,!1,null,null,!1,!1,"",mp);return n._reactRootContainer=P,n[Un]=P.current,Gs(n.nodeType===8?n.parentNode:n),or(function(){Ka(r,P,a,h)}),P}function Ja(n,r,a,h,p){var g=a._reactRootContainer;if(g){var M=g;if(typeof p=="function"){var C=p;p=function(){var P=Xa(M);C.call(P)}}Ka(r,M,n,p)}else M=Ag(a,r,n,p,h);return Xa(M)}Rt=function(n){switch(n.tag){case 3:var r=n.stateNode;if(r.current.memoizedState.isDehydrated){var a=Yi(r.pendingLanes);a!==0&&(ui(r,a|1),Ze(r,Xt()),!(jt&6)&&(Kr=Xt()+500,gi()))}break;case 13:or(function(){var h=Kn(n,1);if(h!==null){var p=je();kn(h,n,1,p)}}),Au(n,1)}},hi=function(n){if(n.tag===13){var r=Kn(n,134217728);if(r!==null){var a=je();kn(r,n,134217728,a)}Au(n,134217728)}},E=function(n){if(n.tag===13){var r=Mi(n),a=Kn(n,r);if(a!==null){var h=je();kn(a,n,r,h)}Au(n,r)}},w=function(){return Ht},A=function(n,r){var a=Ht;try{return Ht=n,r()}finally{Ht=a}},Ts=function(n,r,a){switch(r){case"input":if(gr(n,a),r=a.name,a.type==="radio"&&r!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<a.length;r++){var h=a[r];if(h!==n&&h.form===n.form){var p=pa(h);if(!p)throw Error(e(90));Hi(h),gr(h,p)}}}break;case"textarea":Fo(n,a);break;case"select":r=a.value,r!=null&&oi(n,!!a.multiple,r,!1)}},_s=xu,Ho=or;var Tg={usingClientEntryPoint:!1,Events:[Xs,Fr,pa,Vo,jo,xu]},lo={findFiberByHostInstance:Qi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_g={bundleType:lo.bundleType,version:lo.version,rendererPackageName:lo.rendererPackageName,rendererConfig:lo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:I.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=qo(n),n===null?null:n.stateNode},findFiberByHostInstance:lo.findFiberByHostInstance||Sg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qa.isDisabled&&Qa.supportsFiber)try{Zi=Qa.inject(_g),Qe=Qa}catch{}}return Ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tg,Ye.createPortal=function(n,r){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_u(r))throw Error(e(200));return bg(n,r,null,a)},Ye.createRoot=function(n,r){if(!_u(n))throw Error(e(299));var a=!1,h="",p=pp;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onRecoverableError!==void 0&&(p=r.onRecoverableError)),r=Su(n,1,!1,null,null,a,!1,h,p),n[Un]=r.current,Gs(n.nodeType===8?n.parentNode:n),new Tu(r)},Ye.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(e(188)):(n=Object.keys(n).join(","),Error(e(268,n)));return n=qo(r),n=n===null?null:n.stateNode,n},Ye.flushSync=function(n){return or(n)},Ye.hydrate=function(n,r,a){if(!Ya(r))throw Error(e(200));return Ja(null,n,r,!0,a)},Ye.hydrateRoot=function(n,r,a){if(!_u(n))throw Error(e(405));var h=a!=null&&a.hydratedSources||null,p=!1,g="",M=pp;if(a!=null&&(a.unstable_strictMode===!0&&(p=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(M=a.onRecoverableError)),r=dp(r,null,n,1,a??null,p,!1,g,M),n[Un]=r.current,Gs(n),h)for(n=0;n<h.length;n++)a=h[n],p=a._getVersion,p=p(a._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[a,p]:r.mutableSourceEagerHydrationData.push(a,p);return new Za(r)},Ye.render=function(n,r,a){if(!Ya(r))throw Error(e(200));return Ja(null,n,r,!1,a)},Ye.unmountComponentAtNode=function(n){if(!Ya(n))throw Error(e(40));return n._reactRootContainer?(or(function(){Ja(null,null,n,!1,function(){n._reactRootContainer=null,n[Un]=null})}),!0):!1},Ye.unstable_batchedUpdates=xu,Ye.unstable_renderSubtreeIntoContainer=function(n,r,a,h){if(!Ya(a))throw Error(e(200));if(n==null||n._reactInternals===void 0)throw Error(e(38));return Ja(n,r,a,!1,h)},Ye.version="18.3.1-next-f1338f8080-20240426",Ye}var Ep;function Lg(){if(Ep)return Ru.exports;Ep=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(t){console.error(t)}}return l(),Ru.exports=Fg(),Ru.exports}var kp;function Ig(){if(kp)return $a;kp=1;var l=Lg();return $a.createRoot=l.createRoot,$a.hydrateRoot=l.hydrateRoot,$a}var Dg=Ig();const Og=vy(Dg),Bg=()=>It.createElement("div",{className:"new__bg"},It.createElement("div",{className:"hello__div",dangerouslySetInnerHTML:{__html:`
                <svg class="hello__svg" viewBox="0 0 1230.94 414.57">
                    <path
                        d="M-293.58-104.62S-103.61-205.49-60-366.25c9.13-32.45,9-58.31,0-74-10.72-18.82-49.69-33.21-75.55,31.94-27.82,70.11-52.22,377.24-44.11,322.48s34-176.24,99.89-183.19c37.66-4,49.55,23.58,52.83,47.92a117.06,117.06,0,0,1-3,45.32c-7.17,27.28-20.47,97.67,33.51,96.86,66.93-1,131.91-53.89,159.55-84.49,31.1-36.17,31.1-70.64,19.27-90.25-16.74-29.92-69.47-33-92.79,16.73C62.78-179.86,98.7-93.8,159-81.63S302.7-99.55,393.3-269.92c29.86-58.16,52.85-114.71,46.14-150.08-7.44-39.21-59.74-54.5-92.87-8.7-47,65-61.78,266.62-34.74,308.53S416.62-58,481.52-130.31s133.2-188.56,146.54-256.23c14-71.15-56.94-94.64-88.4-47.32C500.53-375,467.58-229.49,503.3-127a73.73,73.73,0,0,0,23.43,33.67c25.49,20.23,55.1,16,77.46,6.32a111.25,111.25,0,0,0,30.44-19.87c37.73-34.23,29-36.71,64.58-127.53C724-284.3,785-298.63,821-259.13a71,71,0,0,1,13.69,22.56c17.68,46,6.81,80-6.81,107.89-12,24.62-34.56,42.72-61.45,47.91-23.06,4.45-48.37-.35-66.48-24.27a78.88,78.88,0,0,1-12.66-25.8c-14.75-51,4.14-88.76,11-101.41,6.18-11.39,37.26-69.61,103.42-42.24,55.71,23.05,100.66-23.31,100.66-23.31"
                        transform="translate(311.08 476.02)"
                        style="fill:none;stroke:#f3f3f3;stroke-linecap:round;stroke-miterlimit:10;stroke-width:30px"/>
                </svg>
            `}})),Vg=[{id:"sky",src:"./images/blue-sky.jpg"},{id:"yosemite",src:"./images/yosemite.jpg"}],jg=[{id:"brick",src:"./textures/TCom_Wall_Stone3_2x2_1K_albedo.jpeg"},{id:"grass",src:"./textures/TCom_Ground_Grass03_header.jpg"}],Hg=[{id:"brick-normal",src:"./textures/TCom_Wall_Stone3_2x2_1K_albedo_NormalMap.png"},{id:"grass-normal",src:"./textures/TCom_Ground_Grass03_header_NormalMap.png"}],Ug=[{id:"apple-store",src:"./models/apple-immersive-store.glb"},{id:"apple-store-legacy",src:"./models/apple-store2.glb"},{id:"apple-pencil-pro",src:"./models/apple-pencil-pro.glb"},{id:"apple-watch",src:"./models/apple-watch.glb"},{id:"imac-green",src:"./models/imac-green.glb"},{id:"imac-yellow",src:"./models/imac-yellow.glb"},{id:"iphone-16-pro",src:"./models/iphone-16-pro.glb"},{id:"macbook-pro-black",src:"/models/macbook-pro-black.glb"},{id:"macbook-pro-silver",src:"/models/macbook-pro-silver.glb"}],Wg=[...jg,...Hg,...Vg],Gg=()=>It.createElement("a-assets",null,Ug.map(({id:l,src:t})=>It.createElement("a-asset-item",{key:l,id:l,src:t})),Wg.map(({id:l,src:t})=>It.createElement("img",{key:l,id:l,src:t})),It.createElement("a-asset-item",{id:"right-gltf",src:"https://vazxmixjsiawhamofees.supabase.co/storage/v1/object/public/models/skeleton-right-hand-webxr/model.gltf"}),It.createElement("a-asset-item",{id:"left-gltf",src:"https://vazxmixjsiawhamofees.supabase.co/storage/v1/object/public/models/skeleton-left-hand-webxr/model.gltf"}),It.createElement("a-mixin",{id:"blink","blink-controls":"rotateOnTeleport:false;cameraRig: #cameraRig; teleportOrigin: #head; collisionEntities:.navmesh;"})),_l={isLoading:!0,loadingTimeout:6e3,enableDefaultLoadingScreen:!1},qg=It.createContext({APPLICATION_STATE:_l}),Kg=({children:l})=>{const[t,e]=Ph.useState(_l.isLoading);Ph.useEffect(()=>{window.setTimeout(e,_l.loadingTimeout,!1)},[]);const i={isLoading:t};return It.createElement(qg.Provider,{value:i},It.createElement("a-scene",{"loading-screen":`enabled: ${_l.enableDefaultLoadingScreen};`,physx:"autoLoad: true; delay: 1000; wasmUrl: https://cdn.jsdelivr.net/gh/c-frame/physx@v0.1.2/wasm/physx.release.wasm; useDefaultScene: false;",webxr:"overlayElement:#dom-overlay;",reflection:"directionalLight:#dirlight;",renderer:"alpha:true;physicallyCorrectLights:true;colorManagement:true;exposure:2;toneMapping:ACESFilmic;","ar-hit-test":"target:#my-ar-objects;type:footprint;footprintDepth:0.2;",shadow:"type: pcfsoft","gltf-model":"dracoDecoderPath: https://www.gstatic.com/draco/versioned/decoders/1.5.7/;","ar-cursor":!0,raycaster:"objects: #my-ar-objects a-sphere","xr-mode-ui":"XRMode:xr"},It.createElement(Gg,null),t?It.createElement(Bg,null):It.createElement(It.Fragment,null,l)))};var Mp={},bp={},Nu,Sp;function Xg(){if(Sp)return Nu;Sp=1;const l=.1;return Nu=AFRAME.registerComponent("checkpoint-controls",{schema:{enabled:{default:!0},mode:{default:"teleport",oneOf:["teleport","animate"]},animateSpeed:{default:3}},init:function(){this.active=!0,this.checkpoint=null,this.isNavMeshConstrained=!1,this.offset=new THREE.Vector3,this.position=new THREE.Vector3,this.targetPosition=new THREE.Vector3},play:function(){this.active=!0},pause:function(){this.active=!1},setCheckpoint:function(t){const e=this.el;if(this.active&&this.checkpoint!==t){if(this.checkpoint&&e.emit("navigation-end",{checkpoint:this.checkpoint}),this.checkpoint=t,this.sync(),this.position.distanceTo(this.targetPosition)<l){this.checkpoint=null;return}e.emit("navigation-start",{checkpoint:t}),this.data.mode==="teleport"&&(this.el.setAttribute("position",this.targetPosition),this.checkpoint=null,e.emit("navigation-end",{checkpoint:t}),e.components["movement-controls"].updateNavLocation())}},isVelocityActive:function(){return!!(this.active&&this.checkpoint)},getVelocity:function(){if(!this.active)return;const t=this.data,e=this.offset,i=this.position,s=this.targetPosition,o=this.checkpoint;return this.sync(),i.distanceTo(s)<l?(this.checkpoint=null,this.el.emit("navigation-end",{checkpoint:o}),e.set(0,0,0)):(e.setLength(t.animateSpeed),e)},sync:function(){const t=this.offset,e=this.position,i=this.targetPosition;e.copy(this.el.getAttribute("position")),this.checkpoint.object3D.getWorldPosition(i),i.add(this.checkpoint.components.checkpoint.getOffset()),t.copy(i).sub(e)}}),Nu}var Fu,Ap;function Zg(){return Ap||(Ap=1,Fu=Object.assign(function(){},{FACE_1:0,FACE_2:1,FACE_3:2,FACE_4:3,L_SHOULDER_1:4,R_SHOULDER_1:5,L_SHOULDER_2:6,R_SHOULDER_2:7,SELECT:8,START:9,DPAD_UP:12,DPAD_DOWN:13,DPAD_LEFT:14,DPAD_RIGHT:15,VENDOR:16})),Fu}var Lu,Tp;function Yg(){if(Tp)return Lu;Tp=1;function l(t,e,i){this.type=t,this.index=e,this.pressed=i.pressed,this.value=i.value}return Lu=l,Lu}var Iu,_p;function Jg(){if(_p)return Iu;_p=1;const l=Zg(),t=Yg(),e=.2,i={LEFT:"left",RIGHT:"right"},s={MOVEMENT:1,ROTATION:2};return Iu=AFRAME.registerComponent("gamepad-controls",{GamepadButton:l,schema:{enabled:{default:!0},rotationSensitivity:{default:2}},init:function(){const o=this.el.sceneEl;this.system=o.systems["tracked-controls"]||o.systems["tracked-controls-webxr"]||{controllers:[]},this.prevTime=window.performance.now(),this.buttons={};const c=this.el.object3D.rotation;this.pitch=new THREE.Object3D,this.pitch.rotation.x=c.x,this.yaw=new THREE.Object3D,this.yaw.position.y=10,this.yaw.rotation.y=c.y,this.yaw.add(this.pitch),this._lookVector=new THREE.Vector2,this._moveVector=new THREE.Vector2,this._dpadVector=new THREE.Vector2,o.addBehavior(this)},update:function(){this.tick()},tick:function(o,c){this.updateButtonState(),this.updateRotation(c)},remove:function(){},isVelocityActive:function(){if(!this.data.enabled||!this.isConnected())return!1;const o=this._dpadVector,c=this._moveVector;this.getDpad(o),this.getJoystick(s.MOVEMENT,c);const u=o.x||c.x,d=o.y||c.y;return Math.abs(u)>e||Math.abs(d)>e},getVelocityDelta:function(){const o=this._dpadVector,c=this._moveVector;this.getDpad(o),this.getJoystick(s.MOVEMENT,c);const u=o.x||c.x,d=o.y||c.y,f=new THREE.Vector3;return Math.abs(u)>e&&(f.x+=u),Math.abs(d)>e&&(f.z+=d),f},isRotationActive:function(){if(!this.data.enabled||!this.isConnected())return!1;const o=this._lookVector;return this.getJoystick(s.ROTATION,o),Math.abs(o.x)>e||Math.abs(o.y)>e},updateRotation:function(o){if(!this.isRotationActive())return;const c=this.data,u=this.yaw,d=this.pitch;u.rotation.y=this.el.object3D.rotation.y,d.rotation.x=this.el.object3D.rotation.x;const f=this._lookVector;this.getJoystick(s.ROTATION,f),Math.abs(f.x)<=e&&(f.x=0),Math.abs(f.y)<=e&&(f.y=0),f.multiplyScalar(c.rotationSensitivity*o/1e3),u.rotation.y-=f.x,d.rotation.x-=f.y,d.rotation.x=Math.max(-Math.PI/2,Math.min(Math.PI/2,d.rotation.x)),this.el.object3D.rotation.set(d.rotation.x,u.rotation.y,0)},updateButtonState:function(){const o=this.getGamepad(i.RIGHT);if(this.data.enabled&&o)for(var c=0;c<o.buttons.length;c++)o.buttons[c].pressed&&!this.buttons[c]?this.emit(new t("gamepadbuttondown",c,o.buttons[c])):!o.buttons[c].pressed&&this.buttons[c]&&this.emit(new t("gamepadbuttonup",c,o.buttons[c])),this.buttons[c]=o.buttons[c].pressed;else for(const u in this.buttons)this.buttons[u]=!1},emit:function(o){this.el.emit(o.type,o),this.el.emit(o.type+":"+o.index,new t(o.type,o.index,o))},getGamepad:function(){const o=[],c=[];return function(u){const d=this.el.sceneEl.components["proxy-controls"],f=d&&d.isConnected()&&d.getGamepad(0);if(f)return f;o.length=0;for(let y=0;y<this.system.controllers.length;y++){const v=this.system.controllers[y],x=v?v.gamepad:null;if(o.push(x),x&&v.handedness===u)return x}const m=navigator.getGamepads?navigator.getGamepads():c;for(let y=0;y<m.length;y++){const v=m[y];if(v&&v.hand===u)return v}return o[0]||m[0]}}(),getButton:function(o){return this.getGamepad(i.RIGHT).buttons[o]},getAxis:function(o){return this.getGamepad(o>1?i.RIGHT:i.LEFT).axes[o]},getJoystick:function(o,c){const u=this.getGamepad(o===s.MOVEMENT?i.LEFT:i.RIGHT);if(!u)return c.set(0,0);if(u.mapping==="xr-standard")switch(o){case s.MOVEMENT:return c.set(u.axes[2],u.axes[3]);case s.ROTATION:return c.set(u.axes[2],0)}else switch(o){case s.MOVEMENT:return c.set(u.axes[0],u.axes[1]);case s.ROTATION:return c.set(u.axes[2],u.axes[3])}throw new Error('Unexpected joystick index "%d".',o)},getDpad:function(o){const c=this.getGamepad(i.LEFT);return!c||!c.buttons[l.DPAD_RIGHT]?o.set(0,0):o.set((c.buttons[l.DPAD_RIGHT].pressed?1:0)+(c.buttons[l.DPAD_LEFT].pressed?-1:0),(c.buttons[l.DPAD_UP].pressed?-1:0)+(c.buttons[l.DPAD_DOWN].pressed?1:0))},isConnected:function(){const o=this.getGamepad(i.LEFT);return!!(o&&o.connected)},getID:function(){return this.getGamepad(i.LEFT).id}}),Iu}var Cp={},Rp;function Qg(){return Rp||(Rp=1,function(l){var t="KeyboardEvent"in l;t||(l.KeyboardEvent=function(){throw TypeError("Illegal constructor")}),"DOM_KEY_LOCATION_STANDARD"in l.KeyboardEvent||(l.KeyboardEvent.DOM_KEY_LOCATION_STANDARD=0),"DOM_KEY_LOCATION_LEFT"in l.KeyboardEvent||(l.KeyboardEvent.DOM_KEY_LOCATION_LEFT=1),"DOM_KEY_LOCATION_RIGHT"in l.KeyboardEvent||(l.KeyboardEvent.DOM_KEY_LOCATION_RIGHT=2),"DOM_KEY_LOCATION_NUMPAD"in l.KeyboardEvent||(l.KeyboardEvent.DOM_KEY_LOCATION_NUMPAD=3);var e=window.KeyboardEvent.DOM_KEY_LOCATION_STANDARD,i=window.KeyboardEvent.DOM_KEY_LOCATION_LEFT,s=window.KeyboardEvent.DOM_KEY_LOCATION_RIGHT,o=window.KeyboardEvent.DOM_KEY_LOCATION_NUMPAD;function c(O,q){return String(O).indexOf(q)!==-1}var u=function(){return c(navigator.platform,"Win")?"win":c(navigator.platform,"Mac")?"mac":c(navigator.platform,"CrOS")?"cros":c(navigator.platform,"Linux")?"linux":c(navigator.userAgent,"iPad")||c(navigator.platform,"iPod")||c(navigator.platform,"iPhone")?"ios":""}(),d=function(){return c(navigator.userAgent,"Chrome/")?"chrome":c(navigator.vendor,"Apple")?"safari":c(navigator.userAgent,"MSIE")?"ie":c(navigator.userAgent,"Gecko/")?"moz":c(navigator.userAgent,"Opera/")?"opera":""}(),f=d+"-"+u;function m(O,q,G){(f===q||d===q||u===q)&&Object.keys(G).forEach(function(Y){O[Y]=G[Y]})}function y(O,q){var G={};return Object.keys(O).forEach(function(Y){var ct=O[Y];q in ct&&(G[ct[q]]=ct)}),G}var v={3:{code:"Cancel"},6:{code:"Help"},8:{code:"Backspace"},9:{code:"Tab"},12:{code:"Clear"},13:{code:"Enter"},16:{code:"Shift"},17:{code:"Control"},18:{code:"Alt"},19:{code:"Pause"},20:{code:"CapsLock"},21:{code:"KanaMode"},22:{code:"HangulMode"},23:{code:"JunjaMode"},24:{code:"FinalMode"},25:{code:"KanjiMode"},27:{code:"Escape"},28:{code:"Convert"},29:{code:"NonConvert"},30:{code:"Accept"},31:{code:"ModeChange"},32:{code:"Space"},33:{code:"PageUp"},34:{code:"PageDown"},35:{code:"End"},36:{code:"Home"},37:{code:"ArrowLeft"},38:{code:"ArrowUp"},39:{code:"ArrowRight"},40:{code:"ArrowDown"},41:{code:"Select"},42:{code:"Print"},43:{code:"Execute"},44:{code:"PrintScreen"},45:{code:"Insert"},46:{code:"Delete"},47:{code:"Help"},48:{code:"Digit0",keyCap:"0"},49:{code:"Digit1",keyCap:"1"},50:{code:"Digit2",keyCap:"2"},51:{code:"Digit3",keyCap:"3"},52:{code:"Digit4",keyCap:"4"},53:{code:"Digit5",keyCap:"5"},54:{code:"Digit6",keyCap:"6"},55:{code:"Digit7",keyCap:"7"},56:{code:"Digit8",keyCap:"8"},57:{code:"Digit9",keyCap:"9"},65:{code:"KeyA",keyCap:"a"},66:{code:"KeyB",keyCap:"b"},67:{code:"KeyC",keyCap:"c"},68:{code:"KeyD",keyCap:"d"},69:{code:"KeyE",keyCap:"e"},70:{code:"KeyF",keyCap:"f"},71:{code:"KeyG",keyCap:"g"},72:{code:"KeyH",keyCap:"h"},73:{code:"KeyI",keyCap:"i"},74:{code:"KeyJ",keyCap:"j"},75:{code:"KeyK",keyCap:"k"},76:{code:"KeyL",keyCap:"l"},77:{code:"KeyM",keyCap:"m"},78:{code:"KeyN",keyCap:"n"},79:{code:"KeyO",keyCap:"o"},80:{code:"KeyP",keyCap:"p"},81:{code:"KeyQ",keyCap:"q"},82:{code:"KeyR",keyCap:"r"},83:{code:"KeyS",keyCap:"s"},84:{code:"KeyT",keyCap:"t"},85:{code:"KeyU",keyCap:"u"},86:{code:"KeyV",keyCap:"v"},87:{code:"KeyW",keyCap:"w"},88:{code:"KeyX",keyCap:"x"},89:{code:"KeyY",keyCap:"y"},90:{code:"KeyZ",keyCap:"z"},91:{code:"OSLeft",location:i},92:{code:"OSRight",location:s},93:{code:"ContextMenu"},95:{code:"Standby"},96:{code:"Numpad0",keyCap:"0",location:o},97:{code:"Numpad1",keyCap:"1",location:o},98:{code:"Numpad2",keyCap:"2",location:o},99:{code:"Numpad3",keyCap:"3",location:o},100:{code:"Numpad4",keyCap:"4",location:o},101:{code:"Numpad5",keyCap:"5",location:o},102:{code:"Numpad6",keyCap:"6",location:o},103:{code:"Numpad7",keyCap:"7",location:o},104:{code:"Numpad8",keyCap:"8",location:o},105:{code:"Numpad9",keyCap:"9",location:o},106:{code:"NumpadMultiply",keyCap:"*",location:o},107:{code:"NumpadAdd",keyCap:"+",location:o},108:{code:"NumpadComma",keyCap:",",location:o},109:{code:"NumpadSubtract",keyCap:"-",location:o},110:{code:"NumpadDecimal",keyCap:".",location:o},111:{code:"NumpadDivide",keyCap:"/",location:o},112:{code:"F1"},113:{code:"F2"},114:{code:"F3"},115:{code:"F4"},116:{code:"F5"},117:{code:"F6"},118:{code:"F7"},119:{code:"F8"},120:{code:"F9"},121:{code:"F10"},122:{code:"F11"},123:{code:"F12"},124:{code:"F13"},125:{code:"F14"},126:{code:"F15"},127:{code:"F16"},128:{code:"F17"},129:{code:"F18"},130:{code:"F19"},131:{code:"F20"},132:{code:"F21"},133:{code:"F22"},134:{code:"F23"},135:{code:"F24"},144:{code:"NumLock",location:o},145:{code:"ScrollLock"},160:{code:"ShiftLeft",location:i},161:{code:"ShiftRight",location:s},162:{code:"ControlLeft",location:i},163:{code:"ControlRight",location:s},164:{code:"AltLeft",location:i},165:{code:"AltRight",location:s},166:{code:"BrowserBack"},167:{code:"BrowserForward"},168:{code:"BrowserRefresh"},169:{code:"BrowserStop"},170:{code:"BrowserSearch"},171:{code:"BrowserFavorites"},172:{code:"BrowserHome"},173:{code:"VolumeMute"},174:{code:"VolumeDown"},175:{code:"VolumeUp"},176:{code:"MediaTrackNext"},177:{code:"MediaTrackPrevious"},178:{code:"MediaStop"},179:{code:"MediaPlayPause"},180:{code:"LaunchMail"},181:{code:"MediaSelect"},182:{code:"LaunchApp1"},183:{code:"LaunchApp2"},186:{code:"Semicolon",keyCap:";"},187:{code:"Equal",keyCap:"="},188:{code:"Comma",keyCap:","},189:{code:"Minus",keyCap:"-"},190:{code:"Period",keyCap:"."},191:{code:"Slash",keyCap:"/"},192:{code:"Backquote",keyCap:"`"},219:{code:"BracketLeft",keyCap:"["},220:{code:"Backslash",keyCap:"\\"},221:{code:"BracketRight",keyCap:"]"},222:{code:"Quote",keyCap:"'"},226:{code:"IntlBackslash",keyCap:"\\"},229:{code:"Process"},246:{code:"Attn"},247:{code:"CrSel"},248:{code:"ExSel"},249:{code:"EraseEof"},250:{code:"Play"},251:{code:"ZoomToggle"},254:{code:"Clear"}};m(v,"moz",{59:{code:"Semicolon",keyCap:";"},61:{code:"Equal",keyCap:"="},107:{code:"Equal",keyCap:"="},109:{code:"Minus",keyCap:"-"},187:{code:"NumpadAdd",keyCap:"+",location:o},189:{code:"NumpadSubtract",keyCap:"-",location:o}}),m(v,"moz-mac",{12:{code:"NumLock",location:o},173:{code:"Minus",keyCap:"-"}}),m(v,"moz-win",{173:{code:"Minus",keyCap:"-"}}),m(v,"chrome-mac",{93:{code:"OSRight",location:s}}),m(v,"safari",{3:{code:"Enter"},25:{code:"Tab"}}),m(v,"ios",{10:{code:"Enter",location:e}}),m(v,"safari-mac",{91:{code:"OSLeft",location:i},93:{code:"OSRight",location:s},229:{code:"KeyQ",keyCap:"Q"}});var x={};u==="cros"&&(x["U+00A0"]={code:"ShiftLeft",location:i},x["U+00A1"]={code:"ShiftRight",location:s},x["U+00A2"]={code:"ControlLeft",location:i},x["U+00A3"]={code:"ControlRight",location:s},x["U+00A4"]={code:"AltLeft",location:i},x["U+00A5"]={code:"AltRight",location:s}),f==="chrome-mac"&&(x["U+0010"]={code:"ContextMenu"}),f==="safari-mac"&&(x["U+0010"]={code:"ContextMenu"}),u==="ios"&&(x["U+0010"]={code:"Function"},x["U+001C"]={code:"ArrowLeft"},x["U+001D"]={code:"ArrowRight"},x["U+001E"]={code:"ArrowUp"},x["U+001F"]={code:"ArrowDown"},x["U+0001"]={code:"Home"},x["U+0004"]={code:"End"},x["U+000B"]={code:"PageUp"},x["U+000C"]={code:"PageDown"});var k=[];k[i]={16:{code:"ShiftLeft",location:i},17:{code:"ControlLeft",location:i},18:{code:"AltLeft",location:i}},k[s]={16:{code:"ShiftRight",location:s},17:{code:"ControlRight",location:s},18:{code:"AltRight",location:s}},k[o]={13:{code:"NumpadEnter",location:o}},m(k[o],"moz",{109:{code:"NumpadSubtract",location:o},107:{code:"NumpadAdd",location:o}}),m(k[i],"moz-mac",{224:{code:"OSLeft",location:i}}),m(k[s],"moz-mac",{224:{code:"OSRight",location:s}}),m(k[s],"moz-win",{91:{code:"OSRight",location:s}}),m(k[s],"mac",{93:{code:"OSRight",location:s}}),m(k[o],"chrome-mac",{12:{code:"NumLock",location:o}}),m(k[o],"safari-mac",{12:{code:"NumLock",location:o},187:{code:"NumpadAdd",location:o},189:{code:"NumpadSubtract",location:o},190:{code:"NumpadDecimal",location:o},191:{code:"NumpadDivide",location:o}});var S={ShiftLeft:{key:"Shift"},ShiftRight:{key:"Shift"},ControlLeft:{key:"Control"},ControlRight:{key:"Control"},AltLeft:{key:"Alt"},AltRight:{key:"Alt"},OSLeft:{key:"OS"},OSRight:{key:"OS"},NumpadEnter:{key:"Enter"},Space:{key:" "},Digit0:{key:"0",shiftKey:")"},Digit1:{key:"1",shiftKey:"!"},Digit2:{key:"2",shiftKey:"@"},Digit3:{key:"3",shiftKey:"#"},Digit4:{key:"4",shiftKey:"$"},Digit5:{key:"5",shiftKey:"%"},Digit6:{key:"6",shiftKey:"^"},Digit7:{key:"7",shiftKey:"&"},Digit8:{key:"8",shiftKey:"*"},Digit9:{key:"9",shiftKey:"("},KeyA:{key:"a",shiftKey:"A"},KeyB:{key:"b",shiftKey:"B"},KeyC:{key:"c",shiftKey:"C"},KeyD:{key:"d",shiftKey:"D"},KeyE:{key:"e",shiftKey:"E"},KeyF:{key:"f",shiftKey:"F"},KeyG:{key:"g",shiftKey:"G"},KeyH:{key:"h",shiftKey:"H"},KeyI:{key:"i",shiftKey:"I"},KeyJ:{key:"j",shiftKey:"J"},KeyK:{key:"k",shiftKey:"K"},KeyL:{key:"l",shiftKey:"L"},KeyM:{key:"m",shiftKey:"M"},KeyN:{key:"n",shiftKey:"N"},KeyO:{key:"o",shiftKey:"O"},KeyP:{key:"p",shiftKey:"P"},KeyQ:{key:"q",shiftKey:"Q"},KeyR:{key:"r",shiftKey:"R"},KeyS:{key:"s",shiftKey:"S"},KeyT:{key:"t",shiftKey:"T"},KeyU:{key:"u",shiftKey:"U"},KeyV:{key:"v",shiftKey:"V"},KeyW:{key:"w",shiftKey:"W"},KeyX:{key:"x",shiftKey:"X"},KeyY:{key:"y",shiftKey:"Y"},KeyZ:{key:"z",shiftKey:"Z"},Numpad0:{key:"0"},Numpad1:{key:"1"},Numpad2:{key:"2"},Numpad3:{key:"3"},Numpad4:{key:"4"},Numpad5:{key:"5"},Numpad6:{key:"6"},Numpad7:{key:"7"},Numpad8:{key:"8"},Numpad9:{key:"9"},NumpadMultiply:{key:"*"},NumpadAdd:{key:"+"},NumpadComma:{key:","},NumpadSubtract:{key:"-"},NumpadDecimal:{key:"."},NumpadDivide:{key:"/"},Semicolon:{key:";",shiftKey:":"},Equal:{key:"=",shiftKey:"+"},Comma:{key:",",shiftKey:"<"},Minus:{key:"-",shiftKey:"_"},Period:{key:".",shiftKey:">"},Slash:{key:"/",shiftKey:"?"},Backquote:{key:"`",shiftKey:"~"},BracketLeft:{key:"[",shiftKey:"{"},Backslash:{key:"\\",shiftKey:"|"},BracketRight:{key:"]",shiftKey:"}"},Quote:{key:"'",shiftKey:'"'},IntlBackslash:{key:"\\",shiftKey:"|"}};m(S,"mac",{OSLeft:{key:"Meta"},OSRight:{key:"Meta"}});var _={Esc:"Escape",Nonconvert:"NonConvert",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Menu:"ContextMenu",MediaNextTrack:"MediaTrackNext",MediaPreviousTrack:"MediaTrackPrevious",SelectMedia:"MediaSelect",HalfWidth:"Hankaku",FullWidth:"Zenkaku",RomanCharacters:"Romaji",Crsel:"CrSel",Exsel:"ExSel",Zoom:"ZoomToggle"},z=y(v,"code");try{var H=t&&"location"in new KeyboardEvent("")}catch{}function F(O){var q="keyCode"in O?O.keyCode:"which"in O?O.which:0,G=function(){if(H||"keyLocation"in O){var ct=H?O.location:O.keyLocation;if(ct&&q in k[ct])return k[ct][q]}return"keyIdentifier"in O&&O.keyIdentifier in x?x[O.keyIdentifier]:q in v?v[q]:null}();if(!G)return null;var Y=function(){var ct=S[G.code];return ct?O.shiftKey&&"shiftKey"in ct?ct.shiftKey:ct.key:G.code}();return{code:G.code,key:Y,location:G.location,keyCap:G.keyCap}}function I(O,q){if(O=String(O),!z.hasOwnProperty(O))return"Undefined";if(q&&String(q).toLowerCase()!=="en-us")throw Error("Unsupported locale");var G=z[O];return G.keyCap||G.code||"Undefined"}"KeyboardEvent"in l&&"defineProperty"in Object&&function(){function O(G,Y,ct){Y in G||Object.defineProperty(G,Y,ct)}if(O(KeyboardEvent.prototype,"code",{get:function(){var G=F(this);return G?G.code:""}}),"key"in KeyboardEvent.prototype){var q=Object.getOwnPropertyDescriptor(KeyboardEvent.prototype,"key");Object.defineProperty(KeyboardEvent.prototype,"key",{get:function(){var G=q.get.call(this);return _.hasOwnProperty(G)?_[G]:G}})}O(KeyboardEvent.prototype,"key",{get:function(){var G=F(this);return G&&"key"in G?G.key:"Unidentified"}}),O(KeyboardEvent.prototype,"location",{get:function(){var G=F(this);return G&&"location"in G?G.location:e}}),O(KeyboardEvent.prototype,"locale",{get:function(){return""}})}(),"queryKeyCap"in l.KeyboardEvent||(l.KeyboardEvent.queryKeyCap=I),l.identifyKey=function(O){if(!("code"in O)){var q=F(O);O.code=q?q.code:"",O.key=q&&"key"in q?q.key:"Unidentified",O.location="location"in O?O.location:"keyLocation"in O?O.keyLocation:q&&"location"in q?q.location:e,O.locale=""}}}(window)),Cp}var Du,Pp;function $g(){if(Pp)return Du;Pp=1,Qg();const l="__keyboard-controls-proxy",t=window.KeyboardEvent;return Du=AFRAME.registerComponent("keyboard-controls",{schema:{enabled:{default:!0},debug:{default:!1}},init:function(){this.dVelocity=new THREE.Vector3,this.localKeys={},this.listeners={keydown:this.onKeyDown.bind(this),keyup:this.onKeyUp.bind(this),blur:this.onBlur.bind(this),onContextMenu:this.onContextMenu.bind(this)}},isVelocityActive:function(){return this.data.enabled&&!!Object.keys(this.getKeys()).length},getVelocityDelta:function(){const e=this.data,i=this.getKeys();return this.dVelocity.set(0,0,0),e.enabled&&((i.KeyW||i.ArrowUp)&&(this.dVelocity.z-=1),(i.KeyA||i.ArrowLeft)&&(this.dVelocity.x-=1),(i.KeyS||i.ArrowDown)&&(this.dVelocity.z+=1),(i.KeyD||i.ArrowRight)&&(this.dVelocity.x+=1),i.ShiftLeft&&(this.dVelocity=this.dVelocity.multiplyScalar(2))),this.dVelocity.clone()},play:function(){this.attachEventListeners()},pause:function(){this.removeEventListeners()},attachEventListeners:function(){window.addEventListener("contextmenu",this.listeners.onContextMenu,!1),window.addEventListener("keydown",this.listeners.keydown,!1),window.addEventListener("keyup",this.listeners.keyup,!1),window.addEventListener("blur",this.listeners.blur,!1)},onContextMenu:function(){for(const e in this.localKeys)this.localKeys.hasOwnProperty(e)&&delete this.localKeys[e]},removeEventListeners:function(){window.removeEventListener("keydown",this.listeners.keydown),window.removeEventListener("keyup",this.listeners.keyup),window.removeEventListener("blur",this.listeners.blur)},onKeyDown:function(e){AFRAME.utils.shouldCaptureKeyEvent(e)&&(this.localKeys[e.code]=!0,this.emit(e))},onKeyUp:function(e){AFRAME.utils.shouldCaptureKeyEvent(e)&&(delete this.localKeys[e.code],this.emit(e))},onBlur:function(){for(const e in this.localKeys)this.localKeys.hasOwnProperty(e)&&delete this.localKeys[e]},emit:function(e){l in e&&this.el.emit(e.type,e),this.el.emit(e.type+":"+e.code,new t(e.type,e)),this.data.debug&&console.log(e.type+":"+e.code)},isPressed:function(e){return e in this.getKeys()},getKeys:function(){return this.isProxied()?this.el.sceneEl.components["proxy-controls"].getKeyboard():this.localKeys},isProxied:function(){const e=this.el.sceneEl.components["proxy-controls"];return e&&e.isConnected()}}),Du}var Ou,zp;function tv(){return zp||(zp=1,Ou=AFRAME.registerComponent("touch-controls",{schema:{enabled:{default:!0},reverseEnabled:{default:!0}},init:function(){this.dVelocity=new THREE.Vector3,this.bindMethods(),this.direction=0},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners(),this.dVelocity.set(0,0,0)},remove:function(){this.pause()},addEventListeners:function(){const l=this.el.sceneEl,t=l.canvas;if(!t){l.addEventListener("render-target-loaded",this.addEventListeners.bind(this));return}t.addEventListener("touchstart",this.onTouchStart,{passive:!0}),t.addEventListener("touchend",this.onTouchEnd,{passive:!0});const e=l.getAttribute("vr-mode-ui");e&&e.cardboardModeEnabled&&l.addEventListener("enter-vr",this.onEnterVR)},removeEventListeners:function(){const l=this.el.sceneEl&&this.el.sceneEl.canvas;l&&(l.removeEventListener("touchstart",this.onTouchStart),l.removeEventListener("touchend",this.onTouchEnd),this.el.sceneEl.removeEventListener("enter-vr",this.onEnterVR))},isVelocityActive:function(){return this.data.enabled&&!!this.direction},getVelocityDelta:function(){return this.dVelocity.z=this.direction,this.dVelocity.clone()},bindMethods:function(){this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onEnterVR=this.onEnterVR.bind(this)},onTouchStart:function(l){this.direction=-1,this.data.reverseEnabled&&l.touches&&l.touches.length===2&&(this.direction=1),l.preventDefault()},onTouchEnd:function(l){this.direction=0,l.preventDefault()},onEnterVR:function(){const l=this.el.sceneEl.xrSession;l&&(l.addEventListener("selectstart",this.onTouchStart),l.addEventListener("selectend",this.onTouchEnd))}})),Ou}var Bu,Np;function ev(){if(Np)return Bu;Np=1;const l="-controls",t=.2,e=1e-5,i="moved";return Bu=AFRAME.registerComponent("movement-controls",{dependencies:["rotation"],schema:{enabled:{default:!0},controls:{default:["gamepad","trackpad","keyboard","touch"]},speed:{default:.3,min:0},fly:{default:!1},constrainToNavMesh:{default:!1},camera:{default:"[movement-controls] [camera]",type:"selector"}},init:function(){const s=this.el;this.data.camera||(this.data.camera=s.querySelector("[camera]")),this.velocityCtrl=null,this.velocity=new THREE.Vector3,this.heading=new THREE.Quaternion,this.eventDetail={},this.navGroup=null,this.navNode=null,s.sceneEl.hasLoaded?this.injectControls():s.sceneEl.addEventListener("loaded",this.injectControls.bind(this))},update:function(s){const o=this.el,c=this.data,u=o.sceneEl.systems.nav;if(o.sceneEl.hasLoaded&&this.injectControls(),u&&c.constrainToNavMesh!==s.constrainToNavMesh&&(c.constrainToNavMesh?u.addAgent(this):u.removeAgent(this)),c.enabled!==s.enabled)for(let d=0;d<c.controls.length;d++){const f=c.controls[d]+l;this.el.setAttribute(f,{enabled:this.data.enabled})}},injectControls:function(){const s=this.data;for(let o=0;o<s.controls.length;o++){const c=s.controls[o]+l;this.el.setAttribute(c,{enabled:this.data.enabled})}},updateNavLocation:function(){this.navGroup=null,this.navNode=null},tick:function(){const s=new THREE.Vector3,o=new THREE.Vector3,c=new THREE.Vector3;return function(u,d){if(!d)return;const f=this.el,m=this.data;if(!m.enabled)return;this.updateVelocityCtrl();const y=this.velocityCtrl,v=this.velocity;if(y)if(d/1e3>t?v.set(0,0,0):this.updateVelocity(d),m.constrainToNavMesh&&y.isNavMeshConstrained!==!1){if(v.lengthSq()<e)return;s.copy(f.object3D.position),o.copy(v).multiplyScalar(d/1e3).add(s);const x=f.sceneEl.systems.nav;this.navGroup=this.navGroup===null?x.getGroup(s):this.navGroup,this.navNode=this.navNode||x.getNode(s,this.navGroup),this.navNode=x.clampStep(s,o,this.navGroup,this.navNode,c),f.object3D.position.copy(c)}else f.hasAttribute("velocity")?f.setAttribute("velocity",v):(f.object3D.position.x+=v.x*d/1e3,f.object3D.position.y+=v.y*d/1e3,f.object3D.position.z+=v.z*d/1e3)}}(),updateVelocityCtrl:function(){const s=this.data;if(s.enabled){for(let o=0,c=s.controls.length;o<c;o++){const u=this.el.components[s.controls[o]+l];if(u&&u.isVelocityActive()){this.velocityCtrl=u;return}}this.velocityCtrl=null}},updateVelocity:function(){const s=new THREE.Vector2,o=new THREE.Quaternion;return function(c){let u;const d=this.el,f=this.velocityCtrl,m=this.velocity,y=this.data;if(f)if(f.getVelocityDelta)u=f.getVelocityDelta(c);else if(f.getVelocity){m.copy(f.getVelocity());return}else if(f.getPositionDelta){m.copy(f.getPositionDelta(c).multiplyScalar(1e3/c));return}else throw new Error("Incompatible movement controls: ",f);if(d.hasAttribute("velocity")&&!y.constrainToNavMesh&&m.copy(this.el.getAttribute("velocity")),u&&y.enabled){const v=y.camera;o.copy(v.object3D.quaternion),o.premultiply(d.object3D.quaternion),u.applyQuaternion(o);const x=u.length();y.fly?(m.copy(u),m.multiplyScalar(this.data.speed*16.66667)):(s.set(u.x,u.z),s.setLength(x*this.data.speed*16.66667),m.x=s.x,m.y=0,m.z=s.y),(m.x!==0||m.y!==0||m.z!==0)&&(this.eventDetail.velocity=m,this.el.emit(i,this.eventDetail))}}}()}),Bu}var Vu,Fp;function nv(){return Fp||(Fp=1,Vu=AFRAME.registerComponent("trackpad-controls",{schema:{enabled:{default:!0},enableNegX:{default:!0},enablePosX:{default:!0},enableNegZ:{default:!0},enablePosZ:{default:!0},mode:{default:"touch",oneOf:["swipe","touch","press"]}},init:function(){this.dVelocity=new THREE.Vector3,this.zVel=0,this.xVel=0,this.bindMethods()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners(),this.dVelocity.set(0,0,0)},remove:function(){this.pause()},addEventListeners:function(){const l=this.data,t=this.el.sceneEl;switch(t.addEventListener("axismove",this.onAxisMove),l.mode){case"swipe":case"touch":t.addEventListener("trackpadtouchstart",this.onTouchStart),t.addEventListener("trackpadtouchend",this.onTouchEnd);break;case"press":t.addEventListener("trackpaddown",this.onTouchStart),t.addEventListener("trackpadup",this.onTouchEnd);break}},removeEventListeners:function(){const l=this.el.sceneEl;l.removeEventListener("axismove",this.onAxisMove),l.removeEventListener("trackpadtouchstart",this.onTouchStart),l.removeEventListener("trackpadtouchend",this.onTouchEnd),l.removeEventListener("trackpaddown",this.onTouchStart),l.removeEventListener("trackpadup",this.onTouchEnd)},isVelocityActive:function(){return this.data.enabled&&this.isMoving},getVelocityDelta:function(){return this.dVelocity.z=this.isMoving?-this.zVel:1,this.dVelocity.x=this.isMoving?this.xVel:1,this.dVelocity.clone()},bindMethods:function(){this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onAxisMove=this.onAxisMove.bind(this)},onTouchStart:function(l){switch(this.data.mode){case"swipe":this.canRecordAxis=!0,this.startingAxisData=[];break;case"touch":this.isMoving=!0;break;case"press":this.isMoving=!0;break}l.preventDefault()},onTouchEnd:function(l){this.data.mode=="swipe"&&(this.startingAxisData=[]),this.isMoving=!1,l.preventDefault()},onAxisMove:function(l){switch(this.data.mode){case"swipe":return this.handleSwipeAxis(l);case"touch":case"press":return this.handleTouchAxis(l)}},handleSwipeAxis:function(l){const t=this.data,e=l.detail.axis;if(this.startingAxisData.length===0&&this.canRecordAxis&&(this.canRecordAxis=!1,this.startingAxisData[0]=e[0],this.startingAxisData[1]=e[1]),this.startingAxisData.length>0){let i=0,s=0;t.enableNegX&&e[0]<this.startingAxisData[0]&&(i=-1),t.enablePosX&&e[0]>this.startingAxisData[0]&&(i=1),t.enablePosZ&&e[1]>this.startingAxisData[1]&&(s=-1),t.enableNegZ&&e[1]<this.startingAxisData[1]&&(s=1);const o=Math.abs(this.startingAxisData[1]-e[1]);Math.abs(this.startingAxisData[0]-e[0])>o?(this.zVel=0,this.xVel=i,this.isMoving=!0):(this.xVel=0,this.zVel=s,this.isMoving=!0)}},handleTouchAxis:function(l){const t=this.data,e=l.detail.axis;let i=0,s=0;t.enableNegX&&e[0]<0&&(i=-1),t.enablePosX&&e[0]>0&&(i=1),t.enablePosZ&&e[1]>0&&(s=-1),t.enableNegZ&&e[1]<0&&(s=1),Math.abs(e[0])>Math.abs(e[1])?(this.zVel=0,this.xVel=i):(this.xVel=0,this.zVel=s)}})),Vu}const Cl=(l,t)=>{const e=t.x-l.x,i=t.y-l.y;return Math.sqrt(e*e+i*i)},iv=(l,t)=>{const e=t.x-l.x,i=t.y-l.y;return sv(Math.atan2(i,e))},rv=(l,t,e)=>{const i={x:0,y:0};return e=zh(e),i.x=l.x-t*Math.cos(e),i.y=l.y-t*Math.sin(e),i},zh=l=>l*(Math.PI/180),sv=l=>l*(180/Math.PI),ov=l=>isNaN(l.buttons)?l.pressure!==0:l.buttons!==0,ju=new Map,Lp=l=>{ju.has(l)&&clearTimeout(ju.get(l)),ju.set(l,setTimeout(l,100))},Rl=(l,t,e)=>{const i=t.split(/[ ,]+/g);let s;for(let o=0;o<i.length;o+=1)s=i[o],l.addEventListener?l.addEventListener(s,e,!1):l.attachEvent&&l.attachEvent(s,e)},Ip=(l,t,e)=>{const i=t.split(/[ ,]+/g);let s;for(let o=0;o<i.length;o+=1)s=i[o],l.removeEventListener?l.removeEventListener(s,e):l.detachEvent&&l.detachEvent(s,e)},wy=l=>(l.preventDefault(),l.type.match(/^touch/)?l.changedTouches:l),Dp=()=>{const l=window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;return{x:l,y:t}},Op=(l,t)=>{t.top||t.right||t.bottom||t.left?(l.style.top=t.top,l.style.right=t.right,l.style.bottom=t.bottom,l.style.left=t.left):(l.style.left=t.x+"px",l.style.top=t.y+"px")},Uh=(l,t,e)=>{const i=Ey(l);for(let s in i)if(i.hasOwnProperty(s))if(typeof t=="string")i[s]=t+" "+e;else{let o="";for(let c=0,u=t.length;c<u;c+=1)o+=t[c]+" "+e+", ";i[s]=o.slice(0,-2)}return i},av=(l,t)=>{const e=Ey(l);for(let i in e)e.hasOwnProperty(i)&&(e[i]=t);return e},Ey=l=>{const t={};return t[l]="",["webkit","Moz","o"].forEach(function(i){t[i+l.charAt(0).toUpperCase()+l.slice(1)]=""}),t},Hu=(l,t)=>{for(let e in t)t.hasOwnProperty(e)&&(l[e]=t[e]);return l},lv=(l,t)=>{const e={};for(let i in l)l.hasOwnProperty(i)&&t.hasOwnProperty(i)?e[i]=t[i]:l.hasOwnProperty(i)&&(e[i]=l[i]);return e},Nh=(l,t)=>{if(l.length)for(let e=0,i=l.length;e<i;e+=1)t(l[e]);else t(l)},cv=(l,t,e)=>({x:Math.min(Math.max(l.x,t.x-e),t.x+e),y:Math.min(Math.max(l.y,t.y-e),t.y+e)});var uv="ontouchstart"in window,hv=!!window.PointerEvent,dv=!!window.MSPointerEvent,co={touch:{start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"},MSPointer:{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}},hs,Mo={};hv?hs=co.pointer:dv?hs=co.MSPointer:uv?(hs=co.touch,Mo=co.mouse):hs=co.mouse;function ri(){}ri.prototype.on=function(l,t){var e=this,i=l.split(/[ ,]+/g),s;e._handlers_=e._handlers_||{};for(var o=0;o<i.length;o+=1)s=i[o],e._handlers_[s]=e._handlers_[s]||[],e._handlers_[s].push(t);return e};ri.prototype.off=function(l,t){var e=this;return e._handlers_=e._handlers_||{},l===void 0?e._handlers_={}:t===void 0?e._handlers_[l]=null:e._handlers_[l]&&e._handlers_[l].indexOf(t)>=0&&e._handlers_[l].splice(e._handlers_[l].indexOf(t),1),e};ri.prototype.trigger=function(l,t){var e=this,i=l.split(/[ ,]+/g),s;e._handlers_=e._handlers_||{};for(var o=0;o<i.length;o+=1)s=i[o],e._handlers_[s]&&e._handlers_[s].length&&e._handlers_[s].forEach(function(c){c.call(e,{type:s,target:e},t)})};ri.prototype.config=function(l){var t=this;t.options=t.defaults||{},l&&(t.options=lv(t.options,l))};ri.prototype.bindEvt=function(l,t){var e=this;return e._domHandlers_=e._domHandlers_||{},e._domHandlers_[t]=function(){typeof e["on"+t]=="function"?e["on"+t].apply(e,arguments):console.warn('[WARNING] : Missing "on'+t+'" handler.')},Rl(l,hs[t],e._domHandlers_[t]),Mo[t]&&Rl(l,Mo[t],e._domHandlers_[t]),e};ri.prototype.unbindEvt=function(l,t){var e=this;return e._domHandlers_=e._domHandlers_||{},Ip(l,hs[t],e._domHandlers_[t]),Mo[t]&&Ip(l,Mo[t],e._domHandlers_[t]),delete e._domHandlers_[t],this};function Ee(l,t){return this.identifier=t.identifier,this.position=t.position,this.frontPosition=t.frontPosition,this.collection=l,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1,shape:"circle"},this.config(t),this.options.mode==="dynamic"&&(this.options.restOpacity=0),this.id=Ee.id,Ee.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}Ee.prototype=new ri;Ee.constructor=Ee;Ee.id=0;Ee.prototype.buildEl=function(l){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)};Ee.prototype.stylize=function(){if(this.options.dataOnly)return this;var l=this.options.fadeTime+"ms",t=av("borderRadius","50%"),e=Uh("transition","opacity",l),i={};return i.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},i.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",left:0,marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:this.options.color,opacity:".5"},i.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",left:0,marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:this.options.color,opacity:".5",transform:"translate(0px, 0px)"},Hu(i.el,e),this.options.shape==="circle"&&Hu(i.back,t),Hu(i.front,t),this.applyStyles(i),this};Ee.prototype.applyStyles=function(l){for(var t in this.ui)if(this.ui.hasOwnProperty(t))for(var e in l[t])this.ui[t].style[e]=l[t][e];return this};Ee.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)};Ee.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)};Ee.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()};Ee.prototype.show=function(l){var t=this;return t.options.dataOnly||(clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.addToDom(),t.restCallback(),setTimeout(function(){t.ui.el.style.opacity=1},0),t.showTimeout=setTimeout(function(){t.trigger("shown",t.instance),typeof l=="function"&&l.call(this)},t.options.fadeTime)),t};Ee.prototype.hide=function(l){var t=this;if(t.options.dataOnly)return t;if(t.ui.el.style.opacity=t.options.restOpacity,clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.removeTimeout=setTimeout(function(){var e=t.options.mode==="dynamic"?"none":"block";t.ui.el.style.display=e,typeof l=="function"&&l.call(t),t.trigger("hidden",t.instance)},t.options.fadeTime),t.options.restJoystick){const e=t.options.restJoystick,i={};i.x=e===!0||e.x!==!1?0:t.instance.frontPosition.x,i.y=e===!0||e.y!==!1?0:t.instance.frontPosition.y,t.setPosition(l,i)}return t};Ee.prototype.setPosition=function(l,t){var e=this;e.frontPosition={x:t.x,y:t.y};var i=e.options.fadeTime+"ms",s={};s.front=Uh("transition",["transform"],i);var o={front:{}};o.front={transform:"translate("+e.frontPosition.x+"px,"+e.frontPosition.y+"px)"},e.applyStyles(s),e.applyStyles(o),e.restTimeout=setTimeout(function(){typeof l=="function"&&l.call(e),e.restCallback()},e.options.fadeTime)};Ee.prototype.restCallback=function(){var l=this,t={};t.front=Uh("transition","none",""),l.applyStyles(t),l.trigger("rested",l.instance)};Ee.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}};Ee.prototype.computeDirection=function(l){var t=l.angle.radian,e=Math.PI/4,i=Math.PI/2,s,o,c;if(t>e&&t<e*3&&!l.lockX?s="up":t>-e&&t<=e&&!l.lockY?s="left":t>-e*3&&t<=-e&&!l.lockX?s="down":l.lockY||(s="right"),l.lockY||(t>-i&&t<i?o="left":o="right"),l.lockX||(t>0?c="up":c="down"),l.force>this.options.threshold){var u={},d;for(d in this.direction)this.direction.hasOwnProperty(d)&&(u[d]=this.direction[d]);var f={};this.direction={x:o,y:c,angle:s},l.direction=this.direction;for(d in u)u[d]===this.direction[d]&&(f[d]=!0);if(f.x&&f.y&&f.angle)return l;(!f.x||!f.y)&&this.trigger("plain",l),f.x||this.trigger("plain:"+o,l),f.y||this.trigger("plain:"+c,l),f.angle||this.trigger("dir dir:"+s,l)}else this.resetDirection();return l};function fe(l,t){var e=this;e.nipples=[],e.idles=[],e.actives=[],e.ids=[],e.pressureIntervals={},e.manager=l,e.id=fe.id,fe.id+=1,e.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,lockX:!1,lockY:!1,shape:"circle",dynamicPage:!1,follow:!1},e.config(t),(e.options.mode==="static"||e.options.mode==="semi")&&(e.options.multitouch=!1),e.options.multitouch||(e.options.maxNumberOfNipples=1);const i=getComputedStyle(e.options.zone.parentElement);return i&&i.display==="flex"&&(e.parentIsFlex=!0),e.updateBox(),e.prepareNipples(),e.bindings(),e.begin(),e.nipples}fe.prototype=new ri;fe.constructor=fe;fe.id=0;fe.prototype.prepareNipples=function(){var l=this,t=l.nipples;t.on=l.on.bind(l),t.off=l.off.bind(l),t.options=l.options,t.destroy=l.destroy.bind(l),t.ids=l.ids,t.id=l.id,t.processOnMove=l.processOnMove.bind(l),t.processOnEnd=l.processOnEnd.bind(l),t.get=function(e){if(e===void 0)return t[0];for(var i=0,s=t.length;i<s;i+=1)if(t[i].identifier===e)return t[i];return!1}};fe.prototype.bindings=function(){var l=this;l.bindEvt(l.options.zone,"start"),l.options.zone.style.touchAction="none",l.options.zone.style.msTouchAction="none"};fe.prototype.begin=function(){var l=this,t=l.options;if(t.mode==="static"){var e=l.createNipple(t.position,l.manager.getIdentifier());e.add(),l.idles.push(e)}};fe.prototype.createNipple=function(l,t){var e=this,i=e.manager.scroll,s={},o=e.options,c={x:e.parentIsFlex?i.x:i.x+e.box.left,y:e.parentIsFlex?i.y:i.y+e.box.top};if(l.x&&l.y)s={x:l.x-c.x,y:l.y-c.y};else if(l.top||l.right||l.bottom||l.left){var u=document.createElement("DIV");u.style.display="hidden",u.style.top=l.top,u.style.right=l.right,u.style.bottom=l.bottom,u.style.left=l.left,u.style.position="absolute",o.zone.appendChild(u);var d=u.getBoundingClientRect();o.zone.removeChild(u),s=l,l={x:d.left+i.x,y:d.top+i.y}}var f=new Ee(e,{color:o.color,size:o.size,threshold:o.threshold,fadeTime:o.fadeTime,dataOnly:o.dataOnly,restJoystick:o.restJoystick,restOpacity:o.restOpacity,mode:o.mode,identifier:t,position:l,zone:o.zone,frontPosition:{x:0,y:0},shape:o.shape});return o.dataOnly||(Op(f.ui.el,s),Op(f.ui.front,f.frontPosition)),e.nipples.push(f),e.trigger("added "+f.identifier+":added",f),e.manager.trigger("added "+f.identifier+":added",f),e.bindNipple(f),f};fe.prototype.updateBox=function(){var l=this;l.box=l.options.zone.getBoundingClientRect()};fe.prototype.bindNipple=function(l){var t=this,e,i=function(s,o){e=s.type+" "+o.id+":"+s.type,t.trigger(e,o)};l.on("destroyed",t.onDestroyed.bind(t)),l.on("shown hidden rested dir plain",i),l.on("dir:up dir:right dir:down dir:left",i),l.on("plain:up plain:right plain:down plain:left",i)};fe.prototype.pressureFn=function(l,t,e){var i=this,s=0;clearInterval(i.pressureIntervals[e]),i.pressureIntervals[e]=setInterval((function(){var o=l.force||l.pressure||l.webkitForce||0;o!==s&&(t.trigger("pressure",o),i.trigger("pressure "+t.identifier+":pressure",o),s=o)}).bind(i),100)};fe.prototype.onstart=function(l){var t=this,e=t.options,i=l;l=wy(l),t.updateBox();var s=function(o){t.actives.length<e.maxNumberOfNipples?t.processOnStart(o):i.type.match(/^touch/)&&(Object.keys(t.manager.ids).forEach(function(c){if(Object.values(i.touches).findIndex(function(d){return d.identifier===c})<0){var u=[l[0]];u.identifier=c,t.processOnEnd(u)}}),t.actives.length<e.maxNumberOfNipples&&t.processOnStart(o))};return Nh(l,s),t.manager.bindDocument(),!1};fe.prototype.processOnStart=function(l){var t=this,e=t.options,i,s=t.manager.getIdentifier(l),o=l.force||l.pressure||l.webkitForce||0,c={x:l.pageX,y:l.pageY},u=t.getOrCreate(s,c);u.identifier!==s&&t.manager.removeIdentifier(u.identifier),u.identifier=s;var d=function(m){m.trigger("start",m),t.trigger("start "+m.id+":start",m),m.show(),o>0&&t.pressureFn(l,m,m.identifier),t.processOnMove(l)};if((i=t.idles.indexOf(u))>=0&&t.idles.splice(i,1),t.actives.push(u),t.ids.push(u.identifier),e.mode!=="semi")d(u);else{var f=Cl(c,u.position);if(f<=e.catchDistance)d(u);else{u.destroy(),t.processOnStart(l);return}}return u};fe.prototype.getOrCreate=function(l,t){var e=this,i=e.options,s;return/(semi|static)/.test(i.mode)?(s=e.idles[0],s?(e.idles.splice(0,1),s):i.mode==="semi"?e.createNipple(t,l):(console.warn("Coudln't find the needed nipple."),!1)):(s=e.createNipple(t,l),s)};fe.prototype.processOnMove=function(l){var t=this,e=t.options,i=t.manager.getIdentifier(l),s=t.nipples.get(i),o=t.manager.scroll;if(!ov(l)){this.processOnEnd(l);return}if(!s){console.error("Found zombie joystick with ID "+i),t.manager.removeIdentifier(i);return}if(e.dynamicPage){var c=s.el.getBoundingClientRect();s.position={x:o.x+c.left,y:o.y+c.top}}s.identifier=i;var u=s.options.size/2,d={x:l.pageX,y:l.pageY};e.lockX&&(d.y=s.position.y),e.lockY&&(d.x=s.position.x);var f=Cl(d,s.position),m=iv(d,s.position),y=zh(m),v=f/u,x={distance:f,position:d},k,S;if(s.options.shape==="circle"?(k=Math.min(f,u),S=rv(s.position,k,m)):(S=cv(d,s.position,u),k=Cl(S,s.position)),e.follow){if(f>u){let F=d.x-S.x,I=d.y-S.y;s.position.x+=F,s.position.y+=I,s.el.style.top=s.position.y-(t.box.top+o.y)+"px",s.el.style.left=s.position.x-(t.box.left+o.x)+"px",f=Cl(d,s.position)}}else d=S,f=k;var _=d.x-s.position.x,z=d.y-s.position.y;s.frontPosition={x:_,y:z},e.dataOnly||(s.ui.front.style.transform="translate("+_+"px,"+z+"px)");var H={identifier:s.identifier,position:d,force:v,pressure:l.force||l.pressure||l.webkitForce||0,distance:f,angle:{radian:y,degree:m},vector:{x:_/u,y:-z/u},raw:x,instance:s,lockX:e.lockX,lockY:e.lockY};H=s.computeDirection(H),H.angle={radian:zh(180-m),degree:180-m},s.trigger("move",H),t.trigger("move "+s.id+":move",H)};fe.prototype.processOnEnd=function(l){var t=this,e=t.options,i=t.manager.getIdentifier(l),s=t.nipples.get(i),o=t.manager.removeIdentifier(s.identifier);s&&(e.dataOnly||s.hide(function(){e.mode==="dynamic"&&(s.trigger("removed",s),t.trigger("removed "+s.id+":removed",s),t.manager.trigger("removed "+s.id+":removed",s),s.destroy())}),clearInterval(t.pressureIntervals[s.identifier]),s.resetDirection(),s.trigger("end",s),t.trigger("end "+s.id+":end",s),t.ids.indexOf(s.identifier)>=0&&t.ids.splice(t.ids.indexOf(s.identifier),1),t.actives.indexOf(s)>=0&&t.actives.splice(t.actives.indexOf(s),1),/(semi|static)/.test(e.mode)?t.idles.push(s):t.nipples.indexOf(s)>=0&&t.nipples.splice(t.nipples.indexOf(s),1),t.manager.unbindDocument(),/(semi|static)/.test(e.mode)&&(t.manager.ids[o.id]=o.identifier))};fe.prototype.onDestroyed=function(l,t){var e=this;e.nipples.indexOf(t)>=0&&e.nipples.splice(e.nipples.indexOf(t),1),e.actives.indexOf(t)>=0&&e.actives.splice(e.actives.indexOf(t),1),e.idles.indexOf(t)>=0&&e.idles.splice(e.idles.indexOf(t),1),e.ids.indexOf(t.identifier)>=0&&e.ids.splice(e.ids.indexOf(t.identifier),1),e.manager.removeIdentifier(t.identifier),e.manager.unbindDocument()};fe.prototype.destroy=function(){var l=this;l.unbindEvt(l.options.zone,"start"),l.nipples.forEach(function(e){e.destroy()});for(var t in l.pressureIntervals)l.pressureIntervals.hasOwnProperty(t)&&clearInterval(l.pressureIntervals[t]);l.trigger("destroyed",l.nipples),l.manager.unbindDocument(),l.off()};function Ae(l){var t=this;t.ids={},t.index=0,t.collections=[],t.scroll=Dp(),t.config(l),t.prepareCollections();var e=function(){var s;t.collections.forEach(function(o){o.forEach(function(c){s=c.el.getBoundingClientRect(),c.position={x:t.scroll.x+s.left,y:t.scroll.y+s.top}})})};Rl(window,"resize",function(){Lp(e)});var i=function(){t.scroll=Dp()};return Rl(window,"scroll",function(){Lp(i)}),t.collections}Ae.prototype=new ri;Ae.constructor=Ae;Ae.prototype.prepareCollections=function(){var l=this;l.collections.create=l.create.bind(l),l.collections.on=l.on.bind(l),l.collections.off=l.off.bind(l),l.collections.destroy=l.destroy.bind(l),l.collections.get=function(t){var e;return l.collections.every(function(i){return e=i.get(t),!e}),e}};Ae.prototype.create=function(l){return this.createCollection(l)};Ae.prototype.createCollection=function(l){var t=this,e=new fe(t,l);return t.bindCollection(e),t.collections.push(e),e};Ae.prototype.bindCollection=function(l){var t=this,e,i=function(s,o){e=s.type+" "+o.id+":"+s.type,t.trigger(e,o)};l.on("destroyed",t.onDestroyed.bind(t)),l.on("shown hidden rested dir plain",i),l.on("dir:up dir:right dir:down dir:left",i),l.on("plain:up plain:right plain:down plain:left",i)};Ae.prototype.bindDocument=function(){var l=this;l.binded||(l.bindEvt(document,"move").bindEvt(document,"end"),l.binded=!0)};Ae.prototype.unbindDocument=function(l){var t=this;(!Object.keys(t.ids).length||l===!0)&&(t.unbindEvt(document,"move").unbindEvt(document,"end"),t.binded=!1)};Ae.prototype.getIdentifier=function(l){var t;return l?(t=l.identifier===void 0?l.pointerId:l.identifier,t===void 0&&(t=this.latest||0)):t=this.index,this.ids[t]===void 0&&(this.ids[t]=this.index,this.index+=1),this.latest=t,this.ids[t]};Ae.prototype.removeIdentifier=function(l){var t={};for(var e in this.ids)if(this.ids[e]===l){t.id=e,t.identifier=this.ids[e],delete this.ids[e];break}return t};Ae.prototype.onmove=function(l){var t=this;return t.onAny("move",l),!1};Ae.prototype.onend=function(l){var t=this;return t.onAny("end",l),!1};Ae.prototype.oncancel=function(l){var t=this;return t.onAny("end",l),!1};Ae.prototype.onAny=function(l,t){var e=this,i,s="processOn"+l.charAt(0).toUpperCase()+l.slice(1);t=wy(t);var o=function(u,d,f){f.ids.indexOf(d)>=0&&(f[s](u),u._found_=!0)},c=function(u){i=e.getIdentifier(u),Nh(e.collections,o.bind(null,u,i)),u._found_||e.removeIdentifier(i)};return Nh(t,c),!1};Ae.prototype.destroy=function(){var l=this;l.unbindDocument(!0),l.ids={},l.index=0,l.collections.forEach(function(t){t.destroy()}),l.off()};Ae.prototype.onDestroyed=function(l,t){var e=this;if(e.collections.indexOf(t)<0)return!1;e.collections.splice(e.collections.indexOf(t),1)};const Bp=new Ae,Vp={create:function(l){return Bp.create(l)},factory:Bp};AFRAME.registerComponent("nipple-controls",{schema:{enabled:{default:!0},mode:{default:"dynamic",oneOf:["static","semi","dynamic"]},rotationSensitivity:{default:1},moveJoystickEnabled:{default:!0},lookJoystickEnabled:{default:!0},sideMargin:{default:"30px"},bottomMargin:{default:"70px"},moveJoystickPosition:{default:"left",oneOf:["left","right"]},lookJoystickPosition:{default:"right",oneOf:["left","right"]}},init(){this.dVelocity=new THREE.Vector3,this.lookVector=new THREE.Vector2;const l=this.el.querySelector("[look-controls]").components["look-controls"];this.pitchObject=l.pitchObject,this.yawObject=l.yawObject,this.rigRotation=this.el.object3D.rotation,this.moveData=void 0,this.lookData=void 0,this.moving=!1,this.rotating=!1},update(l){(this.data.moveJoystickPosition!==l.moveJoystickPosition||this.data.sideMargin!==l.sideMargin||this.data.bottomMargin!==l.bottomMargin||this.data.mode!==l.mode)&&this.removeMoveJoystick(),(this.data.lookJoystickPosition!==l.lookJoystickPosition||this.data.sideMargin!==l.sideMargin||this.data.bottomMargin!==l.bottomMargin||this.data.mode!==l.mode)&&this.removeLookJoystick(),this.data.enabled&&this.data.moveJoystickEnabled?this.createMoveJoystick():this.removeMoveJoystick(),this.data.enabled&&this.data.lookJoystickEnabled?this.createLookJoystick():this.removeLookJoystick()},pause(){this.moving=!1,this.rotating=!1},remove(){this.removeMoveJoystick(),this.removeLookJoystick()},isVelocityActive(){return this.data.enabled&&this.moving},getVelocityDelta(){if(this.dVelocity.set(0,0,0),this.isVelocityActive()){const l=this.moveData.force<1?this.moveData.force:1,t=this.moveData.angle.radian,e=Math.cos(t)*l,i=-Math.sin(t)*l;this.dVelocity.set(e,0,i)}return this.dVelocity},isRotationActive(){return this.data.enabled&&this.rotating},updateRotation(l){if(!this.isRotationActive())return;const t=this.lookData.force<1?this.lookData.force:1,e=this.lookData.angle.radian,i=this.lookVector;i.x=Math.cos(e)*t,i.y=Math.sin(e)*t,i.multiplyScalar(this.data.rotationSensitivity*l/1e3),this.yawObject.rotation.y-=i.x;let s=this.pitchObject.rotation.x+i.y;s=Math.max(-Math.PI/2,Math.min(Math.PI/2,s)),this.pitchObject.rotation.x=s},tick:function(l,t){this.updateRotation(t)},initLeftZone(){const l=document.createElement("div");l.setAttribute("id","joystickLeftZone"),l.setAttribute("style",`position:absolute;${this.data.moveJoystickPosition}:${this.data.sideMargin};bottom:${this.data.bottomMargin};z-index:1`),document.body.appendChild(l),this.leftZone=l},initRightZone(){const l=document.createElement("div");l.setAttribute("id","joystickRightZone"),l.setAttribute("style",`position:absolute;${this.data.lookJoystickPosition}:${this.data.sideMargin};bottom:${this.data.bottomMargin};z-index:1`),document.body.appendChild(l),this.rightZone=l},createMoveJoystick(){if(this.moveJoystick)return;this.initLeftZone();const l={mode:this.data.mode,zone:this.leftZone,color:"white",fadeTime:0};this.leftZone.style.width="100px",this.data.mode==="static"?(this.leftZone.style.height="100px",l.position={left:"50%",bottom:"50%"}):this.leftZone.style.height="400px",this.moveJoystick=Vp.create(l),this.moveJoystick.on("move",(t,e)=>{this.moveData=e,this.moving=!0}),this.moveJoystick.on("end",(t,e)=>{this.moving=!1})},createLookJoystick(){if(this.lookJoystick)return;this.initRightZone();const l={mode:this.data.mode,zone:this.rightZone,color:"white",fadeTime:0};this.rightZone.style.width="100px",this.data.mode==="static"?(this.rightZone.style.height="100px",l.position={left:"50%",bottom:"50%"}):this.rightZone.style.height="400px",this.lookJoystick=Vp.create(l),this.lookJoystick.on("move",(t,e)=>{this.lookData=e,this.rotating=!0}),this.lookJoystick.on("end",(t,e)=>{this.rotating=!1})},removeMoveJoystick(){this.moveJoystick&&(this.moveJoystick.destroy(),this.moveJoystick=void 0),this.moveData=void 0,this.leftZone&&this.leftZone.parentNode&&(this.leftZone.remove(),this.leftZone=void 0)},removeLookJoystick(){this.lookJoystick&&(this.lookJoystick.destroy(),this.lookJoystick=void 0),this.lookData=void 0,this.rightZone&&this.rightZone.parentNode&&(this.rightZone.remove(),this.rightZone=void 0)}});var jp;function fv(){return jp||(jp=1,Xg(),Jg(),$g(),tv(),ev(),nv()),bp}var Hp={},Uu,Up;function pv(){if(Up)return Uu;Up=1;const l={once:THREE.LoopOnce,repeat:THREE.LoopRepeat,pingpong:THREE.LoopPingPong};Uu=AFRAME.registerComponent("animation-mixer",{schema:{clip:{default:"*"},useRegExp:{default:!1},duration:{default:0},clampWhenFinished:{default:!1,type:"boolean"},crossFadeDuration:{default:0},loop:{default:"repeat",oneOf:Object.keys(l)},repetitions:{default:1/0,min:0},timeScale:{default:1},startAt:{default:0}},init:function(){this.model=null,this.mixer=null,this.activeActions=[];const i=this.el.getObject3D("mesh");i?this.load(i):this.el.addEventListener("model-loaded",s=>{this.load(s.detail.model)})},load:function(i){const s=this.el;this.model=i,this.mixer=new THREE.AnimationMixer(i),this.mixer.addEventListener("loop",o=>{s.emit("animation-loop",{action:o.action,loopDelta:o.loopDelta})}),this.mixer.addEventListener("finished",o=>{s.emit("animation-finished",{action:o.action,direction:o.direction})}),this.data.clip&&this.update({})},remove:function(){this.mixer&&this.mixer.stopAllAction()},update:function(i){if(!i)return;const s=this.data,o=AFRAME.utils.diff(s,i);if("clip"in o){this.stopAction(),s.clip&&this.playAction();return}this.activeActions.forEach(c=>{"duration"in o&&s.duration&&c.setDuration(s.duration),"clampWhenFinished"in o&&(c.clampWhenFinished=s.clampWhenFinished),("loop"in o||"repetitions"in o)&&c.setLoop(l[s.loop],s.repetitions),"timeScale"in o&&c.setEffectiveTimeScale(s.timeScale)})},stopAction:function(){const i=this.data;for(let s=0;s<this.activeActions.length;s++)i.crossFadeDuration?this.activeActions[s].fadeOut(i.crossFadeDuration):this.activeActions[s].stop();this.activeActions.length=0},playAction:function(){if(!this.mixer)return;const i=this.model,s=this.data,o=i.animations||(i.geometry||{}).animations||[];if(!o.length)return;const c=s.useRegExp?s.clip:t(s.clip);for(let u,d=0;u=o[d];d++)if(u.name.match(c)){const f=this.mixer.clipAction(u,i);f.enabled=!0,f.clampWhenFinished=s.clampWhenFinished,s.duration&&f.setDuration(s.duration),s.timeScale!==1&&f.setEffectiveTimeScale(s.timeScale),f.startAt(this.mixer.time-s.startAt/1e3),f.setLoop(l[s.loop],s.repetitions).fadeIn(s.crossFadeDuration).play(),this.activeActions.push(f)}},tick:function(i,s){this.mixer&&!isNaN(s)&&this.mixer.update(s/1e3)}});function t(i){return new RegExp("^"+i.split(/\*+/).map(e).join(".*")+"$")}function e(i){return i.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")}return Uu}/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const ky="164",Pl=0,mv=1,yv=2,Wp=1,Gp=100,qp=204,Kp=205,Xp=3,Wh=0,Zp="attached",gv="detached",My=300,vv=303,Di=1e3,Ln=1001,Yp=1002,zl=1003,go=1006,Gh=1008,xv=1009,wv=1014,by=1015,Ev=1020,Sy=1023,Wu=1026,Jp=1027,Nl=2300,Fl=2301,Gu=2302,Qp=2400,$p=2401,tm=2402,kv=2500,Ay=0,Ty="",We="srgb",qh="srgb-linear",Mv="display-p3",_y="display-p3-linear",Fh="linear",em="srgb",nm="rec709",im="p3",Zr=7680,rm=519,bv=515,sm=35044,pr=2e3,Lh=2001;class ii{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[t]===void 0&&(i[t]=[]),i[t].indexOf(e)===-1&&i[t].push(e)}hasEventListener(t,e){if(this._listeners===void 0)return!1;const i=this._listeners;return i[t]!==void 0&&i[t].indexOf(e)!==-1}removeEventListener(t,e){if(this._listeners===void 0)return;const s=this._listeners[t];if(s!==void 0){const o=s.indexOf(e);o!==-1&&s.splice(o,1)}}dispatchEvent(t){if(this._listeners===void 0)return;const i=this._listeners[t.type];if(i!==void 0){t.target=this;const s=i.slice(0);for(let o=0,c=s.length;o<c;o++)s[o].call(this,t);t.target=null}}}const Fe=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let om=1234567;const vo=Math.PI/180,bo=180/Math.PI;function ji(){const l=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Fe[l&255]+Fe[l>>8&255]+Fe[l>>16&255]+Fe[l>>24&255]+"-"+Fe[t&255]+Fe[t>>8&255]+"-"+Fe[t>>16&15|64]+Fe[t>>24&255]+"-"+Fe[e&63|128]+Fe[e>>8&255]+"-"+Fe[e>>16&255]+Fe[e>>24&255]+Fe[i&255]+Fe[i>>8&255]+Fe[i>>16&255]+Fe[i>>24&255]).toLowerCase()}function Ce(l,t,e){return Math.max(t,Math.min(e,l))}function Kh(l,t){return(l%t+t)%t}function Sv(l,t,e,i,s){return i+(l-t)*(s-i)/(e-t)}function Av(l,t,e){return l!==t?(e-l)/(t-l):0}function xo(l,t,e){return(1-e)*l+e*t}function Tv(l,t,e,i){return xo(l,t,1-Math.exp(-e*i))}function _v(l,t=1){return t-Math.abs(Kh(l,t*2)-t)}function Cv(l,t,e){return l<=t?0:l>=e?1:(l=(l-t)/(e-t),l*l*(3-2*l))}function Rv(l,t,e){return l<=t?0:l>=e?1:(l=(l-t)/(e-t),l*l*l*(l*(l*6-15)+10))}function Pv(l,t){return l+Math.floor(Math.random()*(t-l+1))}function zv(l,t){return l+Math.random()*(t-l)}function Nv(l){return l*(.5-Math.random())}function Fv(l){l!==void 0&&(om=l);let t=om+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function Lv(l){return l*vo}function Iv(l){return l*bo}function Dv(l){return(l&l-1)===0&&l!==0}function Ov(l){return Math.pow(2,Math.ceil(Math.log(l)/Math.LN2))}function Bv(l){return Math.pow(2,Math.floor(Math.log(l)/Math.LN2))}function Vv(l,t,e,i,s){const o=Math.cos,c=Math.sin,u=o(e/2),d=c(e/2),f=o((t+i)/2),m=c((t+i)/2),y=o((t-i)/2),v=c((t-i)/2),x=o((i-t)/2),k=c((i-t)/2);switch(s){case"XYX":l.set(u*m,d*y,d*v,u*f);break;case"YZY":l.set(d*v,u*m,d*y,u*f);break;case"ZXZ":l.set(d*y,d*v,u*m,u*f);break;case"XZX":l.set(u*m,d*k,d*x,u*f);break;case"YXY":l.set(d*x,u*m,d*k,u*f);break;case"ZYZ":l.set(d*k,d*x,u*m,u*f);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function us(l,t){switch(t.constructor){case Float32Array:return l;case Uint32Array:return l/4294967295;case Uint16Array:return l/65535;case Uint8Array:return l/255;case Int32Array:return Math.max(l/2147483647,-1);case Int16Array:return Math.max(l/32767,-1);case Int8Array:return Math.max(l/127,-1);default:throw new Error("Invalid component type.")}}function He(l,t){switch(t.constructor){case Float32Array:return l;case Uint32Array:return Math.round(l*4294967295);case Uint16Array:return Math.round(l*65535);case Uint8Array:return Math.round(l*255);case Int32Array:return Math.round(l*2147483647);case Int16Array:return Math.round(l*32767);case Int8Array:return Math.round(l*127);default:throw new Error("Invalid component type.")}}const ye={DEG2RAD:vo,RAD2DEG:bo,generateUUID:ji,clamp:Ce,euclideanModulo:Kh,mapLinear:Sv,inverseLerp:Av,lerp:xo,damp:Tv,pingpong:_v,smoothstep:Cv,smootherstep:Rv,randInt:Pv,randFloat:zv,randFloatSpread:Nv,seededRandom:Fv,degToRad:Lv,radToDeg:Iv,isPowerOfTwo:Dv,ceilPowerOfTwo:Ov,floorPowerOfTwo:Bv,setQuaternionFromProperEuler:Vv,normalize:He,denormalize:us};class Qt{constructor(t=0,e=0){Qt.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,i=this.y,s=t.elements;return this.x=s[0]*e+s[3]*i+s[6],this.y=s[1]*e+s[4]*i+s[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const i=this.dot(t)/e;return Math.acos(Ce(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y;return e*e+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const i=Math.cos(e),s=Math.sin(e),o=this.x-t.x,c=this.y-t.y;return this.x=o*i-c*s+t.x,this.y=o*s+c*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Dn{constructor(t,e,i,s,o,c,u,d,f){Dn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,e,i,s,o,c,u,d,f)}set(t,e,i,s,o,c,u,d,f){const m=this.elements;return m[0]=t,m[1]=s,m[2]=u,m[3]=e,m[4]=o,m[5]=d,m[6]=i,m[7]=c,m[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}extractBasis(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,s=e.elements,o=this.elements,c=i[0],u=i[3],d=i[6],f=i[1],m=i[4],y=i[7],v=i[2],x=i[5],k=i[8],S=s[0],_=s[3],z=s[6],H=s[1],F=s[4],I=s[7],O=s[2],q=s[5],G=s[8];return o[0]=c*S+u*H+d*O,o[3]=c*_+u*F+d*q,o[6]=c*z+u*I+d*G,o[1]=f*S+m*H+y*O,o[4]=f*_+m*F+y*q,o[7]=f*z+m*I+y*G,o[2]=v*S+x*H+k*O,o[5]=v*_+x*F+k*q,o[8]=v*z+x*I+k*G,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[1],s=t[2],o=t[3],c=t[4],u=t[5],d=t[6],f=t[7],m=t[8];return e*c*m-e*u*f-i*o*m+i*u*d+s*o*f-s*c*d}invert(){const t=this.elements,e=t[0],i=t[1],s=t[2],o=t[3],c=t[4],u=t[5],d=t[6],f=t[7],m=t[8],y=m*c-u*f,v=u*d-m*o,x=f*o-c*d,k=e*y+i*v+s*x;if(k===0)return this.set(0,0,0,0,0,0,0,0,0);const S=1/k;return t[0]=y*S,t[1]=(s*f-m*i)*S,t[2]=(u*i-s*c)*S,t[3]=v*S,t[4]=(m*e-s*d)*S,t[5]=(s*o-u*e)*S,t[6]=x*S,t[7]=(i*d-f*e)*S,t[8]=(c*e-i*o)*S,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,i,s,o,c,u){const d=Math.cos(o),f=Math.sin(o);return this.set(i*d,i*f,-i*(d*c+f*u)+c+t,-s*f,s*d,-s*(-f*c+d*u)+u+e,0,0,1),this}scale(t,e){return this.premultiply(qu.makeScale(t,e)),this}rotate(t){return this.premultiply(qu.makeRotation(-t)),this}translate(t,e){return this.premultiply(qu.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,i,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,i=t.elements;for(let s=0;s<9;s++)if(e[s]!==i[s])return!1;return!0}fromArray(t,e=0){for(let i=0;i<9;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}clone(){return new this.constructor().fromArray(this.elements)}}const qu=new Dn;function jv(l){for(let t=l.length-1;t>=0;--t)if(l[t]>=65535)return!0;return!1}function Ih(l){return document.createElementNS("http://www.w3.org/1999/xhtml",l)}const am={};function Hv(l){l in am||(am[l]=!0,console.warn(l))}const lm=new Dn().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),cm=new Dn().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),tl={[qh]:{transfer:Fh,primaries:nm,toReference:l=>l,fromReference:l=>l},[We]:{transfer:em,primaries:nm,toReference:l=>l.convertSRGBToLinear(),fromReference:l=>l.convertLinearToSRGB()},[_y]:{transfer:Fh,primaries:im,toReference:l=>l.applyMatrix3(cm),fromReference:l=>l.applyMatrix3(lm)},[Mv]:{transfer:em,primaries:im,toReference:l=>l.convertSRGBToLinear().applyMatrix3(cm),fromReference:l=>l.applyMatrix3(lm).convertLinearToSRGB()}},Uv=new Set([qh,_y]),Mn={enabled:!0,_workingColorSpace:qh,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(l){if(!Uv.has(l))throw new Error(`Unsupported working color space, "${l}".`);this._workingColorSpace=l},convert:function(l,t,e){if(this.enabled===!1||t===e||!t||!e)return l;const i=tl[t].toReference,s=tl[e].fromReference;return s(i(l))},fromWorkingColorSpace:function(l,t){return this.convert(l,this._workingColorSpace,t)},toWorkingColorSpace:function(l,t){return this.convert(l,t,this._workingColorSpace)},getPrimaries:function(l){return tl[l].primaries},getTransfer:function(l){return l===Ty?Fh:tl[l].transfer}};function ps(l){return l<.04045?l*.0773993808:Math.pow(l*.9478672986+.0521327014,2.4)}function Ku(l){return l<.0031308?l*12.92:1.055*Math.pow(l,.41666)-.055}let Yr;class Wv{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{Yr===void 0&&(Yr=Ih("canvas")),Yr.width=t.width,Yr.height=t.height;const i=Yr.getContext("2d");t instanceof ImageData?i.putImageData(t,0,0):i.drawImage(t,0,0,t.width,t.height),e=Yr}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const e=Ih("canvas");e.width=t.width,e.height=t.height;const i=e.getContext("2d");i.drawImage(t,0,0,t.width,t.height);const s=i.getImageData(0,0,t.width,t.height),o=s.data;for(let c=0;c<o.length;c++)o[c]=ps(o[c]/255)*255;return i.putImageData(s,0,0),e}else if(t.data){const e=t.data.slice(0);for(let i=0;i<e.length;i++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[i]=Math.floor(ps(e[i]/255)*255):e[i]=ps(e[i]);return{data:e,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let Gv=0;class Cy{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Gv++}),this.uuid=ji(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const i={uuid:this.uuid,url:""},s=this.data;if(s!==null){let o;if(Array.isArray(s)){o=[];for(let c=0,u=s.length;c<u;c++)s[c].isDataTexture?o.push(Xu(s[c].image)):o.push(Xu(s[c]))}else o=Xu(s);i.url=o}return e||(t.images[this.uuid]=i),i}}function Xu(l){return typeof HTMLImageElement<"u"&&l instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&l instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&l instanceof ImageBitmap?Wv.getDataURL(l):l.data?{data:Array.from(l.data),width:l.width,height:l.height,type:l.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let qv=0;class Je extends ii{constructor(t=Je.DEFAULT_IMAGE,e=Je.DEFAULT_MAPPING,i=Ln,s=Ln,o=go,c=Gh,u=Sy,d=xv,f=Je.DEFAULT_ANISOTROPY,m=Ty){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:qv++}),this.uuid=ji(),this.name="",this.source=new Cy(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=i,this.wrapT=s,this.magFilter=o,this.minFilter=c,this.anisotropy=f,this.format=u,this.internalFormat=null,this.type=d,this.offset=new Qt(0,0),this.repeat=new Qt(1,1),this.center=new Qt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Dn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=m,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),e||(t.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==My)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Di:t.x=t.x-Math.floor(t.x);break;case Ln:t.x=t.x<0?0:1;break;case Yp:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case Di:t.y=t.y-Math.floor(t.y);break;case Ln:t.y=t.y<0?0:1;break;case Yp:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}Je.DEFAULT_IMAGE=null;Je.DEFAULT_MAPPING=My;Je.DEFAULT_ANISOTROPY=1;class ge{constructor(t=0,e=0,i=0,s=1){ge.prototype.isVector4=!0,this.x=t,this.y=e,this.z=i,this.w=s}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,i,s){return this.x=t,this.y=e,this.z=i,this.w=s,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,i=this.y,s=this.z,o=this.w,c=t.elements;return this.x=c[0]*e+c[4]*i+c[8]*s+c[12]*o,this.y=c[1]*e+c[5]*i+c[9]*s+c[13]*o,this.z=c[2]*e+c[6]*i+c[10]*s+c[14]*o,this.w=c[3]*e+c[7]*i+c[11]*s+c[15]*o,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,i,s,o;const d=t.elements,f=d[0],m=d[4],y=d[8],v=d[1],x=d[5],k=d[9],S=d[2],_=d[6],z=d[10];if(Math.abs(m-v)<.01&&Math.abs(y-S)<.01&&Math.abs(k-_)<.01){if(Math.abs(m+v)<.1&&Math.abs(y+S)<.1&&Math.abs(k+_)<.1&&Math.abs(f+x+z-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const F=(f+1)/2,I=(x+1)/2,O=(z+1)/2,q=(m+v)/4,G=(y+S)/4,Y=(k+_)/4;return F>I&&F>O?F<.01?(i=0,s=.707106781,o=.707106781):(i=Math.sqrt(F),s=q/i,o=G/i):I>O?I<.01?(i=.707106781,s=0,o=.707106781):(s=Math.sqrt(I),i=q/s,o=Y/s):O<.01?(i=.707106781,s=.707106781,o=0):(o=Math.sqrt(O),i=G/o,s=Y/o),this.set(i,s,o,e),this}let H=Math.sqrt((_-k)*(_-k)+(y-S)*(y-S)+(v-m)*(v-m));return Math.abs(H)<.001&&(H=1),this.x=(_-k)/H,this.y=(y-S)/H,this.z=(v-m)/H,this.w=Math.acos((f+x+z-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Kv extends ii{constructor(t=1,e=1,i={}){super(),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new ge(0,0,t,e),this.scissorTest=!1,this.viewport=new ge(0,0,t,e);const s={width:t,height:e,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:go,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const o=new Je(s,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);o.flipY=!1,o.generateMipmaps=i.generateMipmaps,o.internalFormat=i.internalFormat,this.textures=[];const c=i.count;for(let u=0;u<c;u++)this.textures[u]=o.clone(),this.textures[u].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}setSize(t,e,i=1){if(this.width!==t||this.height!==e||this.depth!==i){this.width=t,this.height=e,this.depth=i;for(let s=0,o=this.textures.length;s<o;s++)this.textures[s].image.width=t,this.textures[s].image.height=e,this.textures[s].image.depth=i;this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let i=0,s=t.textures.length;i<s;i++)this.textures[i]=t.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;const e=Object.assign({},t.texture.image);return this.texture.source=new Cy(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Xv extends Kv{constructor(t=1,e=1,i={}){super(t,e,i),this.isWebGLRenderTarget=!0}}class Ie{constructor(t=0,e=0,i=0,s=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=i,this._w=s}static slerpFlat(t,e,i,s,o,c,u){let d=i[s+0],f=i[s+1],m=i[s+2],y=i[s+3];const v=o[c+0],x=o[c+1],k=o[c+2],S=o[c+3];if(u===0){t[e+0]=d,t[e+1]=f,t[e+2]=m,t[e+3]=y;return}if(u===1){t[e+0]=v,t[e+1]=x,t[e+2]=k,t[e+3]=S;return}if(y!==S||d!==v||f!==x||m!==k){let _=1-u;const z=d*v+f*x+m*k+y*S,H=z>=0?1:-1,F=1-z*z;if(F>Number.EPSILON){const O=Math.sqrt(F),q=Math.atan2(O,z*H);_=Math.sin(_*q)/O,u=Math.sin(u*q)/O}const I=u*H;if(d=d*_+v*I,f=f*_+x*I,m=m*_+k*I,y=y*_+S*I,_===1-u){const O=1/Math.sqrt(d*d+f*f+m*m+y*y);d*=O,f*=O,m*=O,y*=O}}t[e]=d,t[e+1]=f,t[e+2]=m,t[e+3]=y}static multiplyQuaternionsFlat(t,e,i,s,o,c){const u=i[s],d=i[s+1],f=i[s+2],m=i[s+3],y=o[c],v=o[c+1],x=o[c+2],k=o[c+3];return t[e]=u*k+m*y+d*x-f*v,t[e+1]=d*k+m*v+f*y-u*x,t[e+2]=f*k+m*x+u*v-d*y,t[e+3]=m*k-u*y-d*v-f*x,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,i,s){return this._x=t,this._y=e,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){const i=t._x,s=t._y,o=t._z,c=t._order,u=Math.cos,d=Math.sin,f=u(i/2),m=u(s/2),y=u(o/2),v=d(i/2),x=d(s/2),k=d(o/2);switch(c){case"XYZ":this._x=v*m*y+f*x*k,this._y=f*x*y-v*m*k,this._z=f*m*k+v*x*y,this._w=f*m*y-v*x*k;break;case"YXZ":this._x=v*m*y+f*x*k,this._y=f*x*y-v*m*k,this._z=f*m*k-v*x*y,this._w=f*m*y+v*x*k;break;case"ZXY":this._x=v*m*y-f*x*k,this._y=f*x*y+v*m*k,this._z=f*m*k+v*x*y,this._w=f*m*y-v*x*k;break;case"ZYX":this._x=v*m*y-f*x*k,this._y=f*x*y+v*m*k,this._z=f*m*k-v*x*y,this._w=f*m*y+v*x*k;break;case"YZX":this._x=v*m*y+f*x*k,this._y=f*x*y+v*m*k,this._z=f*m*k-v*x*y,this._w=f*m*y-v*x*k;break;case"XZY":this._x=v*m*y-f*x*k,this._y=f*x*y-v*m*k,this._z=f*m*k+v*x*y,this._w=f*m*y+v*x*k;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+c)}return e===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const i=e/2,s=Math.sin(i);return this._x=t.x*s,this._y=t.y*s,this._z=t.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,i=e[0],s=e[4],o=e[8],c=e[1],u=e[5],d=e[9],f=e[2],m=e[6],y=e[10],v=i+u+y;if(v>0){const x=.5/Math.sqrt(v+1);this._w=.25/x,this._x=(m-d)*x,this._y=(o-f)*x,this._z=(c-s)*x}else if(i>u&&i>y){const x=2*Math.sqrt(1+i-u-y);this._w=(m-d)/x,this._x=.25*x,this._y=(s+c)/x,this._z=(o+f)/x}else if(u>y){const x=2*Math.sqrt(1+u-i-y);this._w=(o-f)/x,this._x=(s+c)/x,this._y=.25*x,this._z=(d+m)/x}else{const x=2*Math.sqrt(1+y-i-u);this._w=(c-s)/x,this._x=(o+f)/x,this._y=(d+m)/x,this._z=.25*x}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let i=t.dot(e)+1;return i<Number.EPSILON?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Ce(this.dot(t),-1,1)))}rotateTowards(t,e){const i=this.angleTo(t);if(i===0)return this;const s=Math.min(1,e/i);return this.slerp(t,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const i=t._x,s=t._y,o=t._z,c=t._w,u=e._x,d=e._y,f=e._z,m=e._w;return this._x=i*m+c*u+s*f-o*d,this._y=s*m+c*d+o*u-i*f,this._z=o*m+c*f+i*d-s*u,this._w=c*m-i*u-s*d-o*f,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);const i=this._x,s=this._y,o=this._z,c=this._w;let u=c*t._w+i*t._x+s*t._y+o*t._z;if(u<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,u=-u):this.copy(t),u>=1)return this._w=c,this._x=i,this._y=s,this._z=o,this;const d=1-u*u;if(d<=Number.EPSILON){const x=1-e;return this._w=x*c+e*this._w,this._x=x*i+e*this._x,this._y=x*s+e*this._y,this._z=x*o+e*this._z,this.normalize(),this}const f=Math.sqrt(d),m=Math.atan2(f,u),y=Math.sin((1-e)*m)/f,v=Math.sin(e*m)/f;return this._w=c*y+this._w*v,this._x=i*y+this._x*v,this._y=s*y+this._y*v,this._z=o*y+this._z*v,this._onChangeCallback(),this}slerpQuaternions(t,e,i){return this.copy(t).slerp(e,i)}random(){const t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),i=Math.random(),s=Math.sqrt(1-i),o=Math.sqrt(i);return this.set(s*Math.sin(t),s*Math.cos(t),o*Math.sin(e),o*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class L{constructor(t=0,e=0,i=0){L.prototype.isVector3=!0,this.x=t,this.y=e,this.z=i}set(t,e,i){return i===void 0&&(i=this.z),this.x=t,this.y=e,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(um.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(um.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,i=this.y,s=this.z,o=t.elements;return this.x=o[0]*e+o[3]*i+o[6]*s,this.y=o[1]*e+o[4]*i+o[7]*s,this.z=o[2]*e+o[5]*i+o[8]*s,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,i=this.y,s=this.z,o=t.elements,c=1/(o[3]*e+o[7]*i+o[11]*s+o[15]);return this.x=(o[0]*e+o[4]*i+o[8]*s+o[12])*c,this.y=(o[1]*e+o[5]*i+o[9]*s+o[13])*c,this.z=(o[2]*e+o[6]*i+o[10]*s+o[14])*c,this}applyQuaternion(t){const e=this.x,i=this.y,s=this.z,o=t.x,c=t.y,u=t.z,d=t.w,f=2*(c*s-u*i),m=2*(u*e-o*s),y=2*(o*i-c*e);return this.x=e+d*f+c*y-u*m,this.y=i+d*m+u*f-o*y,this.z=s+d*y+o*m-c*f,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,i=this.y,s=this.z,o=t.elements;return this.x=o[0]*e+o[4]*i+o[8]*s,this.y=o[1]*e+o[5]*i+o[9]*s,this.z=o[2]*e+o[6]*i+o[10]*s,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const i=t.x,s=t.y,o=t.z,c=e.x,u=e.y,d=e.z;return this.x=s*d-o*u,this.y=o*c-i*d,this.z=i*u-s*c,this}projectOnVector(t){const e=t.lengthSq();if(e===0)return this.set(0,0,0);const i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return Zu.copy(this).projectOnVector(t),this.sub(Zu)}reflect(t){return this.sub(Zu.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const i=this.dot(t)/e;return Math.acos(Ce(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y,s=this.z-t.z;return e*e+i*i+s*s}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,i){const s=Math.sin(e)*t;return this.x=s*Math.sin(i),this.y=Math.cos(e)*t,this.z=s*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),s=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=s,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,e=Math.random()*2-1,i=Math.sqrt(1-e*e);return this.x=i*Math.cos(t),this.y=e,this.z=i*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Zu=new L,um=new Ie;class ms{constructor(t=new L(1/0,1/0,1/0),e=new L(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e+=3)this.expandByPoint(bn.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,i=t.count;e<i;e++)this.expandByPoint(bn.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const i=bn.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const i=t.geometry;if(i!==void 0){const o=i.getAttribute("position");if(e===!0&&o!==void 0&&t.isInstancedMesh!==!0)for(let c=0,u=o.count;c<u;c++)t.isMesh===!0?t.getVertexPosition(c,bn):bn.fromBufferAttribute(o,c),bn.applyMatrix4(t.matrixWorld),this.expandByPoint(bn);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),el.copy(t.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),el.copy(i.boundingBox)),el.applyMatrix4(t.matrixWorld),this.union(el)}const s=t.children;for(let o=0,c=s.length;o<c;o++)this.expandByObject(s[o],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,bn),bn.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(uo),nl.subVectors(this.max,uo),Jr.subVectors(t.a,uo),Qr.subVectors(t.b,uo),$r.subVectors(t.c,uo),Ti.subVectors(Qr,Jr),_i.subVectors($r,Qr),ur.subVectors(Jr,$r);let e=[0,-Ti.z,Ti.y,0,-_i.z,_i.y,0,-ur.z,ur.y,Ti.z,0,-Ti.x,_i.z,0,-_i.x,ur.z,0,-ur.x,-Ti.y,Ti.x,0,-_i.y,_i.x,0,-ur.y,ur.x,0];return!Yu(e,Jr,Qr,$r,nl)||(e=[1,0,0,0,1,0,0,0,1],!Yu(e,Jr,Qr,$r,nl))?!1:(il.crossVectors(Ti,_i),e=[il.x,il.y,il.z],Yu(e,Jr,Qr,$r,nl))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,bn).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(bn).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(Jn[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Jn[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Jn[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Jn[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Jn[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Jn[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Jn[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Jn[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Jn),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const Jn=[new L,new L,new L,new L,new L,new L,new L,new L],bn=new L,el=new ms,Jr=new L,Qr=new L,$r=new L,Ti=new L,_i=new L,ur=new L,uo=new L,nl=new L,il=new L,hr=new L;function Yu(l,t,e,i,s){for(let o=0,c=l.length-3;o<=c;o+=3){hr.fromArray(l,o);const u=s.x*Math.abs(hr.x)+s.y*Math.abs(hr.y)+s.z*Math.abs(hr.z),d=t.dot(hr),f=e.dot(hr),m=i.dot(hr);if(Math.max(-Math.max(d,f,m),Math.min(d,f,m))>u)return!1}return!0}const Zv=new ms,ho=new L,Ju=new L;class ys{constructor(t=new L,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const i=this.center;e!==void 0?i.copy(e):Zv.setFromPoints(t).getCenter(i);let s=0;for(let o=0,c=t.length;o<c;o++)s=Math.max(s,i.distanceToSquared(t[o]));return this.radius=Math.sqrt(s),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const i=this.center.distanceToSquared(t);return e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;ho.subVectors(t,this.center);const e=ho.lengthSq();if(e>this.radius*this.radius){const i=Math.sqrt(e),s=(i-this.radius)*.5;this.center.addScaledVector(ho,s/i),this.radius+=s}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(Ju.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(ho.copy(t.center).add(Ju)),this.expandByPoint(ho.copy(t.center).sub(Ju))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Qn=new L,Qu=new L,rl=new L,Ci=new L,$u=new L,sl=new L,th=new L;class Xh{constructor(t=new L,e=new L(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Qn)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const i=e.dot(this.direction);return i<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=Qn.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Qn.copy(this.origin).addScaledVector(this.direction,e),Qn.distanceToSquared(t))}distanceSqToSegment(t,e,i,s){Qu.copy(t).add(e).multiplyScalar(.5),rl.copy(e).sub(t).normalize(),Ci.copy(this.origin).sub(Qu);const o=t.distanceTo(e)*.5,c=-this.direction.dot(rl),u=Ci.dot(this.direction),d=-Ci.dot(rl),f=Ci.lengthSq(),m=Math.abs(1-c*c);let y,v,x,k;if(m>0)if(y=c*d-u,v=c*u-d,k=o*m,y>=0)if(v>=-k)if(v<=k){const S=1/m;y*=S,v*=S,x=y*(y+c*v+2*u)+v*(c*y+v+2*d)+f}else v=o,y=Math.max(0,-(c*v+u)),x=-y*y+v*(v+2*d)+f;else v=-o,y=Math.max(0,-(c*v+u)),x=-y*y+v*(v+2*d)+f;else v<=-k?(y=Math.max(0,-(-c*o+u)),v=y>0?-o:Math.min(Math.max(-o,-d),o),x=-y*y+v*(v+2*d)+f):v<=k?(y=0,v=Math.min(Math.max(-o,-d),o),x=v*(v+2*d)+f):(y=Math.max(0,-(c*o+u)),v=y>0?o:Math.min(Math.max(-o,-d),o),x=-y*y+v*(v+2*d)+f);else v=c>0?-o:o,y=Math.max(0,-(c*v+u)),x=-y*y+v*(v+2*d)+f;return i&&i.copy(this.origin).addScaledVector(this.direction,y),s&&s.copy(Qu).addScaledVector(rl,v),x}intersectSphere(t,e){Qn.subVectors(t.center,this.origin);const i=Qn.dot(this.direction),s=Qn.dot(Qn)-i*i,o=t.radius*t.radius;if(s>o)return null;const c=Math.sqrt(o-s),u=i-c,d=i+c;return d<0?null:u<0?this.at(d,e):this.at(u,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null}intersectPlane(t,e){const i=this.distanceToPlane(t);return i===null?null:this.at(i,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let i,s,o,c,u,d;const f=1/this.direction.x,m=1/this.direction.y,y=1/this.direction.z,v=this.origin;return f>=0?(i=(t.min.x-v.x)*f,s=(t.max.x-v.x)*f):(i=(t.max.x-v.x)*f,s=(t.min.x-v.x)*f),m>=0?(o=(t.min.y-v.y)*m,c=(t.max.y-v.y)*m):(o=(t.max.y-v.y)*m,c=(t.min.y-v.y)*m),i>c||o>s||((o>i||isNaN(i))&&(i=o),(c<s||isNaN(s))&&(s=c),y>=0?(u=(t.min.z-v.z)*y,d=(t.max.z-v.z)*y):(u=(t.max.z-v.z)*y,d=(t.min.z-v.z)*y),i>d||u>s)||((u>i||i!==i)&&(i=u),(d<s||s!==s)&&(s=d),s<0)?null:this.at(i>=0?i:s,e)}intersectsBox(t){return this.intersectBox(t,Qn)!==null}intersectTriangle(t,e,i,s,o){$u.subVectors(e,t),sl.subVectors(i,t),th.crossVectors($u,sl);let c=this.direction.dot(th),u;if(c>0){if(s)return null;u=1}else if(c<0)u=-1,c=-c;else return null;Ci.subVectors(this.origin,t);const d=u*this.direction.dot(sl.crossVectors(Ci,sl));if(d<0)return null;const f=u*this.direction.dot($u.cross(Ci));if(f<0||d+f>c)return null;const m=-u*Ci.dot(th);return m<0?null:this.at(m/c,o)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Mt{constructor(t,e,i,s,o,c,u,d,f,m,y,v,x,k,S,_){Mt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,e,i,s,o,c,u,d,f,m,y,v,x,k,S,_)}set(t,e,i,s,o,c,u,d,f,m,y,v,x,k,S,_){const z=this.elements;return z[0]=t,z[4]=e,z[8]=i,z[12]=s,z[1]=o,z[5]=c,z[9]=u,z[13]=d,z[2]=f,z[6]=m,z[10]=y,z[14]=v,z[3]=x,z[7]=k,z[11]=S,z[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Mt().fromArray(this.elements)}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}copyPosition(t){const e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,i=t.elements,s=1/ts.setFromMatrixColumn(t,0).length(),o=1/ts.setFromMatrixColumn(t,1).length(),c=1/ts.setFromMatrixColumn(t,2).length();return e[0]=i[0]*s,e[1]=i[1]*s,e[2]=i[2]*s,e[3]=0,e[4]=i[4]*o,e[5]=i[5]*o,e[6]=i[6]*o,e[7]=0,e[8]=i[8]*c,e[9]=i[9]*c,e[10]=i[10]*c,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,i=t.x,s=t.y,o=t.z,c=Math.cos(i),u=Math.sin(i),d=Math.cos(s),f=Math.sin(s),m=Math.cos(o),y=Math.sin(o);if(t.order==="XYZ"){const v=c*m,x=c*y,k=u*m,S=u*y;e[0]=d*m,e[4]=-d*y,e[8]=f,e[1]=x+k*f,e[5]=v-S*f,e[9]=-u*d,e[2]=S-v*f,e[6]=k+x*f,e[10]=c*d}else if(t.order==="YXZ"){const v=d*m,x=d*y,k=f*m,S=f*y;e[0]=v+S*u,e[4]=k*u-x,e[8]=c*f,e[1]=c*y,e[5]=c*m,e[9]=-u,e[2]=x*u-k,e[6]=S+v*u,e[10]=c*d}else if(t.order==="ZXY"){const v=d*m,x=d*y,k=f*m,S=f*y;e[0]=v-S*u,e[4]=-c*y,e[8]=k+x*u,e[1]=x+k*u,e[5]=c*m,e[9]=S-v*u,e[2]=-c*f,e[6]=u,e[10]=c*d}else if(t.order==="ZYX"){const v=c*m,x=c*y,k=u*m,S=u*y;e[0]=d*m,e[4]=k*f-x,e[8]=v*f+S,e[1]=d*y,e[5]=S*f+v,e[9]=x*f-k,e[2]=-f,e[6]=u*d,e[10]=c*d}else if(t.order==="YZX"){const v=c*d,x=c*f,k=u*d,S=u*f;e[0]=d*m,e[4]=S-v*y,e[8]=k*y+x,e[1]=y,e[5]=c*m,e[9]=-u*m,e[2]=-f*m,e[6]=x*y+k,e[10]=v-S*y}else if(t.order==="XZY"){const v=c*d,x=c*f,k=u*d,S=u*f;e[0]=d*m,e[4]=-y,e[8]=f*m,e[1]=v*y+S,e[5]=c*m,e[9]=x*y-k,e[2]=k*y-x,e[6]=u*m,e[10]=S*y+v}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Yv,t,Jv)}lookAt(t,e,i){const s=this.elements;return sn.subVectors(t,e),sn.lengthSq()===0&&(sn.z=1),sn.normalize(),Ri.crossVectors(i,sn),Ri.lengthSq()===0&&(Math.abs(i.z)===1?sn.x+=1e-4:sn.z+=1e-4,sn.normalize(),Ri.crossVectors(i,sn)),Ri.normalize(),ol.crossVectors(sn,Ri),s[0]=Ri.x,s[4]=ol.x,s[8]=sn.x,s[1]=Ri.y,s[5]=ol.y,s[9]=sn.y,s[2]=Ri.z,s[6]=ol.z,s[10]=sn.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,s=e.elements,o=this.elements,c=i[0],u=i[4],d=i[8],f=i[12],m=i[1],y=i[5],v=i[9],x=i[13],k=i[2],S=i[6],_=i[10],z=i[14],H=i[3],F=i[7],I=i[11],O=i[15],q=s[0],G=s[4],Y=s[8],ct=s[12],pt=s[1],et=s[5],ht=s[9],Tt=s[13],Ft=s[2],St=s[6],nt=s[10],wt=s[14],K=s[3],Z=s[7],X=s[11],R=s[15];return o[0]=c*q+u*pt+d*Ft+f*K,o[4]=c*G+u*et+d*St+f*Z,o[8]=c*Y+u*ht+d*nt+f*X,o[12]=c*ct+u*Tt+d*wt+f*R,o[1]=m*q+y*pt+v*Ft+x*K,o[5]=m*G+y*et+v*St+x*Z,o[9]=m*Y+y*ht+v*nt+x*X,o[13]=m*ct+y*Tt+v*wt+x*R,o[2]=k*q+S*pt+_*Ft+z*K,o[6]=k*G+S*et+_*St+z*Z,o[10]=k*Y+S*ht+_*nt+z*X,o[14]=k*ct+S*Tt+_*wt+z*R,o[3]=H*q+F*pt+I*Ft+O*K,o[7]=H*G+F*et+I*St+O*Z,o[11]=H*Y+F*ht+I*nt+O*X,o[15]=H*ct+F*Tt+I*wt+O*R,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[4],s=t[8],o=t[12],c=t[1],u=t[5],d=t[9],f=t[13],m=t[2],y=t[6],v=t[10],x=t[14],k=t[3],S=t[7],_=t[11],z=t[15];return k*(+o*d*y-s*f*y-o*u*v+i*f*v+s*u*x-i*d*x)+S*(+e*d*x-e*f*v+o*c*v-s*c*x+s*f*m-o*d*m)+_*(+e*f*y-e*u*x-o*c*y+i*c*x+o*u*m-i*f*m)+z*(-s*u*m-e*d*y+e*u*v+s*c*y-i*c*v+i*d*m)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,i){const s=this.elements;return t.isVector3?(s[12]=t.x,s[13]=t.y,s[14]=t.z):(s[12]=t,s[13]=e,s[14]=i),this}invert(){const t=this.elements,e=t[0],i=t[1],s=t[2],o=t[3],c=t[4],u=t[5],d=t[6],f=t[7],m=t[8],y=t[9],v=t[10],x=t[11],k=t[12],S=t[13],_=t[14],z=t[15],H=y*_*f-S*v*f+S*d*x-u*_*x-y*d*z+u*v*z,F=k*v*f-m*_*f-k*d*x+c*_*x+m*d*z-c*v*z,I=m*S*f-k*y*f+k*u*x-c*S*x-m*u*z+c*y*z,O=k*y*d-m*S*d-k*u*v+c*S*v+m*u*_-c*y*_,q=e*H+i*F+s*I+o*O;if(q===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const G=1/q;return t[0]=H*G,t[1]=(S*v*o-y*_*o-S*s*x+i*_*x+y*s*z-i*v*z)*G,t[2]=(u*_*o-S*d*o+S*s*f-i*_*f-u*s*z+i*d*z)*G,t[3]=(y*d*o-u*v*o-y*s*f+i*v*f+u*s*x-i*d*x)*G,t[4]=F*G,t[5]=(m*_*o-k*v*o+k*s*x-e*_*x-m*s*z+e*v*z)*G,t[6]=(k*d*o-c*_*o-k*s*f+e*_*f+c*s*z-e*d*z)*G,t[7]=(c*v*o-m*d*o+m*s*f-e*v*f-c*s*x+e*d*x)*G,t[8]=I*G,t[9]=(k*y*o-m*S*o-k*i*x+e*S*x+m*i*z-e*y*z)*G,t[10]=(c*S*o-k*u*o+k*i*f-e*S*f-c*i*z+e*u*z)*G,t[11]=(m*u*o-c*y*o-m*i*f+e*y*f+c*i*x-e*u*x)*G,t[12]=O*G,t[13]=(m*S*s-k*y*s+k*i*v-e*S*v-m*i*_+e*y*_)*G,t[14]=(k*u*s-c*S*s-k*i*d+e*S*d+c*i*_-e*u*_)*G,t[15]=(c*y*s-m*u*s+m*i*d-e*y*d-c*i*v+e*u*v)*G,this}scale(t){const e=this.elements,i=t.x,s=t.y,o=t.z;return e[0]*=i,e[4]*=s,e[8]*=o,e[1]*=i,e[5]*=s,e[9]*=o,e[2]*=i,e[6]*=s,e[10]*=o,e[3]*=i,e[7]*=s,e[11]*=o,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],s=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,s))}makeTranslation(t,e,i){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const i=Math.cos(e),s=Math.sin(e),o=1-i,c=t.x,u=t.y,d=t.z,f=o*c,m=o*u;return this.set(f*c+i,f*u-s*d,f*d+s*u,0,f*u+s*d,m*u+i,m*d-s*c,0,f*d-s*u,m*d+s*c,o*d*d+i,0,0,0,0,1),this}makeScale(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,e,i,s,o,c){return this.set(1,i,o,0,t,1,c,0,e,s,1,0,0,0,0,1),this}compose(t,e,i){const s=this.elements,o=e._x,c=e._y,u=e._z,d=e._w,f=o+o,m=c+c,y=u+u,v=o*f,x=o*m,k=o*y,S=c*m,_=c*y,z=u*y,H=d*f,F=d*m,I=d*y,O=i.x,q=i.y,G=i.z;return s[0]=(1-(S+z))*O,s[1]=(x+I)*O,s[2]=(k-F)*O,s[3]=0,s[4]=(x-I)*q,s[5]=(1-(v+z))*q,s[6]=(_+H)*q,s[7]=0,s[8]=(k+F)*G,s[9]=(_-H)*G,s[10]=(1-(v+S))*G,s[11]=0,s[12]=t.x,s[13]=t.y,s[14]=t.z,s[15]=1,this}decompose(t,e,i){const s=this.elements;let o=ts.set(s[0],s[1],s[2]).length();const c=ts.set(s[4],s[5],s[6]).length(),u=ts.set(s[8],s[9],s[10]).length();this.determinant()<0&&(o=-o),t.x=s[12],t.y=s[13],t.z=s[14],Sn.copy(this);const f=1/o,m=1/c,y=1/u;return Sn.elements[0]*=f,Sn.elements[1]*=f,Sn.elements[2]*=f,Sn.elements[4]*=m,Sn.elements[5]*=m,Sn.elements[6]*=m,Sn.elements[8]*=y,Sn.elements[9]*=y,Sn.elements[10]*=y,e.setFromRotationMatrix(Sn),i.x=o,i.y=c,i.z=u,this}makePerspective(t,e,i,s,o,c,u=pr){const d=this.elements,f=2*o/(e-t),m=2*o/(i-s),y=(e+t)/(e-t),v=(i+s)/(i-s);let x,k;if(u===pr)x=-(c+o)/(c-o),k=-2*c*o/(c-o);else if(u===Lh)x=-c/(c-o),k=-c*o/(c-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+u);return d[0]=f,d[4]=0,d[8]=y,d[12]=0,d[1]=0,d[5]=m,d[9]=v,d[13]=0,d[2]=0,d[6]=0,d[10]=x,d[14]=k,d[3]=0,d[7]=0,d[11]=-1,d[15]=0,this}makeOrthographic(t,e,i,s,o,c,u=pr){const d=this.elements,f=1/(e-t),m=1/(i-s),y=1/(c-o),v=(e+t)*f,x=(i+s)*m;let k,S;if(u===pr)k=(c+o)*y,S=-2*y;else if(u===Lh)k=o*y,S=-1*y;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+u);return d[0]=2*f,d[4]=0,d[8]=0,d[12]=-v,d[1]=0,d[5]=2*m,d[9]=0,d[13]=-x,d[2]=0,d[6]=0,d[10]=S,d[14]=-k,d[3]=0,d[7]=0,d[11]=0,d[15]=1,this}equals(t){const e=this.elements,i=t.elements;for(let s=0;s<16;s++)if(e[s]!==i[s])return!1;return!0}fromArray(t,e=0){for(let i=0;i<16;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}}const ts=new L,Sn=new Mt,Yv=new L(0,0,0),Jv=new L(1,1,1),Ri=new L,ol=new L,sn=new L,hm=new Mt,dm=new Ie;class we{constructor(t=0,e=0,i=0,s=we.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=i,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,i,s=this._order){return this._x=t,this._y=e,this._z=i,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,i=!0){const s=t.elements,o=s[0],c=s[4],u=s[8],d=s[1],f=s[5],m=s[9],y=s[2],v=s[6],x=s[10];switch(e){case"XYZ":this._y=Math.asin(Ce(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-m,x),this._z=Math.atan2(-c,o)):(this._x=Math.atan2(v,f),this._z=0);break;case"YXZ":this._x=Math.asin(-Ce(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(u,x),this._z=Math.atan2(d,f)):(this._y=Math.atan2(-y,o),this._z=0);break;case"ZXY":this._x=Math.asin(Ce(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(-y,x),this._z=Math.atan2(-c,f)):(this._y=0,this._z=Math.atan2(d,o));break;case"ZYX":this._y=Math.asin(-Ce(y,-1,1)),Math.abs(y)<.9999999?(this._x=Math.atan2(v,x),this._z=Math.atan2(d,o)):(this._x=0,this._z=Math.atan2(-c,f));break;case"YZX":this._z=Math.asin(Ce(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-m,f),this._y=Math.atan2(-y,o)):(this._x=0,this._y=Math.atan2(u,x));break;case"XZY":this._z=Math.asin(-Ce(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(v,f),this._y=Math.atan2(u,o)):(this._x=Math.atan2(-m,x),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,i===!0&&this._onChangeCallback(),this}setFromQuaternion(t,e,i){return hm.makeRotationFromQuaternion(t),this.setFromRotationMatrix(hm,e,i)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return dm.setFromEuler(this),this.setFromQuaternion(dm,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}we.DEFAULT_ORDER="XYZ";class Qv{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let $v=0;const fm=new L,es=new Ie,$n=new Mt,al=new L,fo=new L,tx=new L,ex=new Ie,pm=new L(1,0,0),mm=new L(0,1,0),ym=new L(0,0,1),gm={type:"added"},nx={type:"removed"},ns={type:"childadded",child:null},eh={type:"childremoved",child:null};class te extends ii{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:$v++}),this.uuid=ji(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=te.DEFAULT_UP.clone();const t=new L,e=new we,i=new Ie,s=new L(1,1,1);function o(){i.setFromEuler(e,!1)}function c(){e.setFromQuaternion(i,void 0,!1)}e._onChange(o),i._onChange(c),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Mt},normalMatrix:{value:new Dn}}),this.matrix=new Mt,this.matrixWorld=new Mt,this.matrixAutoUpdate=te.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=te.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Qv,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return es.setFromAxisAngle(t,e),this.quaternion.multiply(es),this}rotateOnWorldAxis(t,e){return es.setFromAxisAngle(t,e),this.quaternion.premultiply(es),this}rotateX(t){return this.rotateOnAxis(pm,t)}rotateY(t){return this.rotateOnAxis(mm,t)}rotateZ(t){return this.rotateOnAxis(ym,t)}translateOnAxis(t,e){return fm.copy(t).applyQuaternion(this.quaternion),this.position.add(fm.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(pm,t)}translateY(t){return this.translateOnAxis(mm,t)}translateZ(t){return this.translateOnAxis(ym,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4($n.copy(this.matrixWorld).invert())}lookAt(t,e,i){t.isVector3?al.copy(t):al.set(t,e,i);const s=this.parent;this.updateWorldMatrix(!0,!1),fo.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?$n.lookAt(fo,al,this.up):$n.lookAt(al,fo,this.up),this.quaternion.setFromRotationMatrix($n),s&&($n.extractRotation(s.matrixWorld),es.setFromRotationMatrix($n),this.quaternion.premultiply(es.invert()))}add(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(gm),ns.child=t,this.dispatchEvent(ns),ns.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const e=this.children.indexOf(t);return e!==-1&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(nx),eh.child=t,this.dispatchEvent(eh),eh.child=null),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),$n.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),$n.multiply(t.parent.matrixWorld)),t.applyMatrix4($n),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(gm),ns.child=t,this.dispatchEvent(ns),ns.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let i=0,s=this.children.length;i<s;i++){const c=this.children[i].getObjectByProperty(t,e);if(c!==void 0)return c}}getObjectsByProperty(t,e,i=[]){this[t]===e&&i.push(this);const s=this.children;for(let o=0,c=s.length;o<c;o++)s[o].getObjectsByProperty(t,e,i);return i}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(fo,t,tx),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(fo,ex,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let i=0,s=e.length;i<s;i++)e[i].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const e=this.children;for(let i=0,s=e.length;i<s;i++)e[i].traverseVisible(t)}traverseAncestors(t){const e=this.parent;e!==null&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let i=0,s=e.length;i<s;i++){const o=e[i];(o.matrixWorldAutoUpdate===!0||t===!0)&&o.updateMatrixWorld(t)}}updateWorldMatrix(t,e){const i=this.parent;if(t===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),e===!0){const s=this.children;for(let o=0,c=s.length;o<c;o++){const u=s[o];u.matrixWorldAutoUpdate===!0&&u.updateWorldMatrix(!1,!0)}}}toJSON(t){const e=t===void 0||typeof t=="string",i={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(u=>({boxInitialized:u.boxInitialized,boxMin:u.box.min.toArray(),boxMax:u.box.max.toArray(),sphereInitialized:u.sphereInitialized,sphereRadius:u.sphere.radius,sphereCenter:u.sphere.center.toArray()})),s.maxGeometryCount=this._maxGeometryCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(t),this.boundingSphere!==null&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()}));function o(u,d){return u[d.uuid]===void 0&&(u[d.uuid]=d.toJSON(t)),d.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(t.geometries,this.geometry);const u=this.geometry.parameters;if(u!==void 0&&u.shapes!==void 0){const d=u.shapes;if(Array.isArray(d))for(let f=0,m=d.length;f<m;f++){const y=d[f];o(t.shapes,y)}else o(t.shapes,d)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const u=[];for(let d=0,f=this.material.length;d<f;d++)u.push(o(t.materials,this.material[d]));s.material=u}else s.material=o(t.materials,this.material);if(this.children.length>0){s.children=[];for(let u=0;u<this.children.length;u++)s.children.push(this.children[u].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let u=0;u<this.animations.length;u++){const d=this.animations[u];s.animations.push(o(t.animations,d))}}if(e){const u=c(t.geometries),d=c(t.materials),f=c(t.textures),m=c(t.images),y=c(t.shapes),v=c(t.skeletons),x=c(t.animations),k=c(t.nodes);u.length>0&&(i.geometries=u),d.length>0&&(i.materials=d),f.length>0&&(i.textures=f),m.length>0&&(i.images=m),y.length>0&&(i.shapes=y),v.length>0&&(i.skeletons=v),x.length>0&&(i.animations=x),k.length>0&&(i.nodes=k)}return i.object=s,i;function c(u){const d=[];for(const f in u){const m=u[f];delete m.metadata,d.push(m)}return d}}clone(t){return new this.constructor().copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(let i=0;i<t.children.length;i++){const s=t.children[i];this.add(s.clone())}return this}}te.DEFAULT_UP=new L(0,1,0);te.DEFAULT_MATRIX_AUTO_UPDATE=!0;te.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const An=new L,ti=new L,nh=new L,ei=new L,is=new L,rs=new L,vm=new L,ih=new L,rh=new L,sh=new L;class Cn{constructor(t=new L,e=new L,i=new L){this.a=t,this.b=e,this.c=i}static getNormal(t,e,i,s){s.subVectors(i,e),An.subVectors(t,e),s.cross(An);const o=s.lengthSq();return o>0?s.multiplyScalar(1/Math.sqrt(o)):s.set(0,0,0)}static getBarycoord(t,e,i,s,o){An.subVectors(s,e),ti.subVectors(i,e),nh.subVectors(t,e);const c=An.dot(An),u=An.dot(ti),d=An.dot(nh),f=ti.dot(ti),m=ti.dot(nh),y=c*f-u*u;if(y===0)return o.set(0,0,0),null;const v=1/y,x=(f*d-u*m)*v,k=(c*m-u*d)*v;return o.set(1-x-k,k,x)}static containsPoint(t,e,i,s){return this.getBarycoord(t,e,i,s,ei)===null?!1:ei.x>=0&&ei.y>=0&&ei.x+ei.y<=1}static getInterpolation(t,e,i,s,o,c,u,d){return this.getBarycoord(t,e,i,s,ei)===null?(d.x=0,d.y=0,"z"in d&&(d.z=0),"w"in d&&(d.w=0),null):(d.setScalar(0),d.addScaledVector(o,ei.x),d.addScaledVector(c,ei.y),d.addScaledVector(u,ei.z),d)}static isFrontFacing(t,e,i,s){return An.subVectors(i,e),ti.subVectors(t,e),An.cross(ti).dot(s)<0}set(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this}setFromPointsAndIndices(t,e,i,s){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[s]),this}setFromAttributeAndIndices(t,e,i,s){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,i),this.c.fromBufferAttribute(t,s),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return An.subVectors(this.c,this.b),ti.subVectors(this.a,this.b),An.cross(ti).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Cn.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return Cn.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,i,s,o){return Cn.getInterpolation(t,this.a,this.b,this.c,e,i,s,o)}containsPoint(t){return Cn.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Cn.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const i=this.a,s=this.b,o=this.c;let c,u;is.subVectors(s,i),rs.subVectors(o,i),ih.subVectors(t,i);const d=is.dot(ih),f=rs.dot(ih);if(d<=0&&f<=0)return e.copy(i);rh.subVectors(t,s);const m=is.dot(rh),y=rs.dot(rh);if(m>=0&&y<=m)return e.copy(s);const v=d*y-m*f;if(v<=0&&d>=0&&m<=0)return c=d/(d-m),e.copy(i).addScaledVector(is,c);sh.subVectors(t,o);const x=is.dot(sh),k=rs.dot(sh);if(k>=0&&x<=k)return e.copy(o);const S=x*f-d*k;if(S<=0&&f>=0&&k<=0)return u=f/(f-k),e.copy(i).addScaledVector(rs,u);const _=m*k-x*y;if(_<=0&&y-m>=0&&x-k>=0)return vm.subVectors(o,s),u=(y-m)/(y-m+(x-k)),e.copy(s).addScaledVector(vm,u);const z=1/(_+S+v);return c=S*z,u=v*z,e.copy(i).addScaledVector(is,c).addScaledVector(rs,u)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const Ry={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Pi={h:0,s:0,l:0},ll={h:0,s:0,l:0};function oh(l,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?l+(t-l)*6*e:e<1/2?t:e<2/3?l+(t-l)*6*(2/3-e):l}class oe{constructor(t,e,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,i)}set(t,e,i){if(e===void 0&&i===void 0){const s=t;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(t,e,i);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=We){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,Mn.toWorkingColorSpace(this,e),this}setRGB(t,e,i,s=Mn.workingColorSpace){return this.r=t,this.g=e,this.b=i,Mn.toWorkingColorSpace(this,s),this}setHSL(t,e,i,s=Mn.workingColorSpace){if(t=Kh(t,1),e=Ce(e,0,1),i=Ce(i,0,1),e===0)this.r=this.g=this.b=i;else{const o=i<=.5?i*(1+e):i+e-i*e,c=2*i-o;this.r=oh(c,o,t+1/3),this.g=oh(c,o,t),this.b=oh(c,o,t-1/3)}return Mn.toWorkingColorSpace(this,s),this}setStyle(t,e=We){function i(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(t)){let o;const c=s[1],u=s[2];switch(c){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return i(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,e);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return i(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,e);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return i(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(t)){const o=s[1],c=o.length;if(c===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,e);if(c===6)return this.setHex(parseInt(o,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=We){const i=Ry[t.toLowerCase()];return i!==void 0?this.setHex(i,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=ps(t.r),this.g=ps(t.g),this.b=ps(t.b),this}copyLinearToSRGB(t){return this.r=Ku(t.r),this.g=Ku(t.g),this.b=Ku(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=We){return Mn.fromWorkingColorSpace(Le.copy(this),t),Math.round(Ce(Le.r*255,0,255))*65536+Math.round(Ce(Le.g*255,0,255))*256+Math.round(Ce(Le.b*255,0,255))}getHexString(t=We){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=Mn.workingColorSpace){Mn.fromWorkingColorSpace(Le.copy(this),e);const i=Le.r,s=Le.g,o=Le.b,c=Math.max(i,s,o),u=Math.min(i,s,o);let d,f;const m=(u+c)/2;if(u===c)d=0,f=0;else{const y=c-u;switch(f=m<=.5?y/(c+u):y/(2-c-u),c){case i:d=(s-o)/y+(s<o?6:0);break;case s:d=(o-i)/y+2;break;case o:d=(i-s)/y+4;break}d/=6}return t.h=d,t.s=f,t.l=m,t}getRGB(t,e=Mn.workingColorSpace){return Mn.fromWorkingColorSpace(Le.copy(this),e),t.r=Le.r,t.g=Le.g,t.b=Le.b,t}getStyle(t=We){Mn.fromWorkingColorSpace(Le.copy(this),t);const e=Le.r,i=Le.g,s=Le.b;return t!==We?`color(${t} ${e.toFixed(3)} ${i.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(e*255)},${Math.round(i*255)},${Math.round(s*255)})`}offsetHSL(t,e,i){return this.getHSL(Pi),this.setHSL(Pi.h+t,Pi.s+e,Pi.l+i)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,i){return this.r=t.r+(e.r-t.r)*i,this.g=t.g+(e.g-t.g)*i,this.b=t.b+(e.b-t.b)*i,this}lerpHSL(t,e){this.getHSL(Pi),t.getHSL(ll);const i=xo(Pi.h,ll.h,e),s=xo(Pi.s,ll.s,e),o=xo(Pi.l,ll.l,e);return this.setHSL(i,s,o),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,i=this.g,s=this.b,o=t.elements;return this.r=o[0]*e+o[3]*i+o[6]*s,this.g=o[1]*e+o[4]*i+o[7]*s,this.b=o[2]*e+o[5]*i+o[8]*s,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Le=new oe;oe.NAMES=Ry;let ix=0;class Vl extends ii{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:ix++}),this.uuid=ji(),this.name="",this.type="Material",this.blending=Wp,this.side=Pl,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=qp,this.blendDst=Kp,this.blendEquation=Gp,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new oe(0,0,0),this.blendAlpha=0,this.depthFunc=Xp,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=rm,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Zr,this.stencilZFail=Zr,this.stencilZPass=Zr,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const e in t){const i=t[e];if(i===void 0){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}const s=this[e];if(s===void 0){console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(i):s&&s.isVector3&&i&&i.isVector3?s.copy(i):this[e]=i}}toJSON(t){const e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Wp&&(i.blending=this.blending),this.side!==Pl&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==qp&&(i.blendSrc=this.blendSrc),this.blendDst!==Kp&&(i.blendDst=this.blendDst),this.blendEquation!==Gp&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Xp&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==rm&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Zr&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Zr&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Zr&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function s(o){const c=[];for(const u in o){const d=o[u];delete d.metadata,c.push(d)}return c}if(e){const o=s(t.textures),c=s(t.images);o.length>0&&(i.textures=o),c.length>0&&(i.images=c)}return i}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let i=null;if(e!==null){const s=e.length;i=new Array(s);for(let o=0;o!==s;++o)i[o]=e[o].clone()}return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}}class Li extends Vl{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new oe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new we,this.combine=Wh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const me=new L,cl=new Qt;class Oi{constructor(t,e,i=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=i,this.usage=sm,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=by,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}get updateRange(){return Hv("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,i){t*=this.itemSize,i*=e.itemSize;for(let s=0,o=this.itemSize;s<o;s++)this.array[t+s]=e.array[i+s];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,i=this.count;e<i;e++)cl.fromBufferAttribute(this,e),cl.applyMatrix3(t),this.setXY(e,cl.x,cl.y);else if(this.itemSize===3)for(let e=0,i=this.count;e<i;e++)me.fromBufferAttribute(this,e),me.applyMatrix3(t),this.setXYZ(e,me.x,me.y,me.z);return this}applyMatrix4(t){for(let e=0,i=this.count;e<i;e++)me.fromBufferAttribute(this,e),me.applyMatrix4(t),this.setXYZ(e,me.x,me.y,me.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)me.fromBufferAttribute(this,e),me.applyNormalMatrix(t),this.setXYZ(e,me.x,me.y,me.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)me.fromBufferAttribute(this,e),me.transformDirection(t),this.setXYZ(e,me.x,me.y,me.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let i=this.array[t*this.itemSize+e];return this.normalized&&(i=us(i,this.array)),i}setComponent(t,e,i){return this.normalized&&(i=He(i,this.array)),this.array[t*this.itemSize+e]=i,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=us(e,this.array)),e}setX(t,e){return this.normalized&&(e=He(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=us(e,this.array)),e}setY(t,e){return this.normalized&&(e=He(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=us(e,this.array)),e}setZ(t,e){return this.normalized&&(e=He(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=us(e,this.array)),e}setW(t,e){return this.normalized&&(e=He(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,i){return t*=this.itemSize,this.normalized&&(e=He(e,this.array),i=He(i,this.array)),this.array[t+0]=e,this.array[t+1]=i,this}setXYZ(t,e,i,s){return t*=this.itemSize,this.normalized&&(e=He(e,this.array),i=He(i,this.array),s=He(s,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=s,this}setXYZW(t,e,i,s,o){return t*=this.itemSize,this.normalized&&(e=He(e,this.array),i=He(i,this.array),s=He(s,this.array),o=He(o,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=s,this.array[t+3]=o,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==sm&&(t.usage=this.usage),t}}class Py extends Oi{constructor(t,e,i){super(new Uint16Array(t),e,i)}}class rx extends Oi{constructor(t,e,i){super(new Uint32Array(t),e,i)}}class ae extends Oi{constructor(t,e,i){super(new Float32Array(t),e,i)}}let sx=0;const fn=new Mt,ah=new te,ss=new L,on=new ms,po=new ms,Se=new L;class mn extends ii{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:sx++}),this.uuid=ji(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(jv(t)?rx:Py)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,i=0){this.groups.push({start:t,count:e,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const o=new Dn().getNormalMatrix(t);i.applyNormalMatrix(o),i.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(t),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return fn.makeRotationFromQuaternion(t),this.applyMatrix4(fn),this}rotateX(t){return fn.makeRotationX(t),this.applyMatrix4(fn),this}rotateY(t){return fn.makeRotationY(t),this.applyMatrix4(fn),this}rotateZ(t){return fn.makeRotationZ(t),this.applyMatrix4(fn),this}translate(t,e,i){return fn.makeTranslation(t,e,i),this.applyMatrix4(fn),this}scale(t,e,i){return fn.makeScale(t,e,i),this.applyMatrix4(fn),this}lookAt(t){return ah.lookAt(t),ah.updateMatrix(),this.applyMatrix4(ah.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ss).negate(),this.translate(ss.x,ss.y,ss.z),this}setFromPoints(t){const e=[];for(let i=0,s=t.length;i<s;i++){const o=t[i];e.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new ae(e,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ms);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new L(-1/0,-1/0,-1/0),new L(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let i=0,s=e.length;i<s;i++){const o=e[i];on.setFromBufferAttribute(o),this.morphTargetsRelative?(Se.addVectors(this.boundingBox.min,on.min),this.boundingBox.expandByPoint(Se),Se.addVectors(this.boundingBox.max,on.max),this.boundingBox.expandByPoint(Se)):(this.boundingBox.expandByPoint(on.min),this.boundingBox.expandByPoint(on.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ys);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new L,1/0);return}if(t){const i=this.boundingSphere.center;if(on.setFromBufferAttribute(t),e)for(let o=0,c=e.length;o<c;o++){const u=e[o];po.setFromBufferAttribute(u),this.morphTargetsRelative?(Se.addVectors(on.min,po.min),on.expandByPoint(Se),Se.addVectors(on.max,po.max),on.expandByPoint(Se)):(on.expandByPoint(po.min),on.expandByPoint(po.max))}on.getCenter(i);let s=0;for(let o=0,c=t.count;o<c;o++)Se.fromBufferAttribute(t,o),s=Math.max(s,i.distanceToSquared(Se));if(e)for(let o=0,c=e.length;o<c;o++){const u=e[o],d=this.morphTargetsRelative;for(let f=0,m=u.count;f<m;f++)Se.fromBufferAttribute(u,f),d&&(ss.fromBufferAttribute(t,f),Se.add(ss)),s=Math.max(s,i.distanceToSquared(Se))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.position,s=e.normal,o=e.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Oi(new Float32Array(4*i.count),4));const c=this.getAttribute("tangent"),u=[],d=[];for(let Y=0;Y<i.count;Y++)u[Y]=new L,d[Y]=new L;const f=new L,m=new L,y=new L,v=new Qt,x=new Qt,k=new Qt,S=new L,_=new L;function z(Y,ct,pt){f.fromBufferAttribute(i,Y),m.fromBufferAttribute(i,ct),y.fromBufferAttribute(i,pt),v.fromBufferAttribute(o,Y),x.fromBufferAttribute(o,ct),k.fromBufferAttribute(o,pt),m.sub(f),y.sub(f),x.sub(v),k.sub(v);const et=1/(x.x*k.y-k.x*x.y);isFinite(et)&&(S.copy(m).multiplyScalar(k.y).addScaledVector(y,-x.y).multiplyScalar(et),_.copy(y).multiplyScalar(x.x).addScaledVector(m,-k.x).multiplyScalar(et),u[Y].add(S),u[ct].add(S),u[pt].add(S),d[Y].add(_),d[ct].add(_),d[pt].add(_))}let H=this.groups;H.length===0&&(H=[{start:0,count:t.count}]);for(let Y=0,ct=H.length;Y<ct;++Y){const pt=H[Y],et=pt.start,ht=pt.count;for(let Tt=et,Ft=et+ht;Tt<Ft;Tt+=3)z(t.getX(Tt+0),t.getX(Tt+1),t.getX(Tt+2))}const F=new L,I=new L,O=new L,q=new L;function G(Y){O.fromBufferAttribute(s,Y),q.copy(O);const ct=u[Y];F.copy(ct),F.sub(O.multiplyScalar(O.dot(ct))).normalize(),I.crossVectors(q,ct);const et=I.dot(d[Y])<0?-1:1;c.setXYZW(Y,F.x,F.y,F.z,et)}for(let Y=0,ct=H.length;Y<ct;++Y){const pt=H[Y],et=pt.start,ht=pt.count;for(let Tt=et,Ft=et+ht;Tt<Ft;Tt+=3)G(t.getX(Tt+0)),G(t.getX(Tt+1)),G(t.getX(Tt+2))}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(e!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Oi(new Float32Array(e.count*3),3),this.setAttribute("normal",i);else for(let v=0,x=i.count;v<x;v++)i.setXYZ(v,0,0,0);const s=new L,o=new L,c=new L,u=new L,d=new L,f=new L,m=new L,y=new L;if(t)for(let v=0,x=t.count;v<x;v+=3){const k=t.getX(v+0),S=t.getX(v+1),_=t.getX(v+2);s.fromBufferAttribute(e,k),o.fromBufferAttribute(e,S),c.fromBufferAttribute(e,_),m.subVectors(c,o),y.subVectors(s,o),m.cross(y),u.fromBufferAttribute(i,k),d.fromBufferAttribute(i,S),f.fromBufferAttribute(i,_),u.add(m),d.add(m),f.add(m),i.setXYZ(k,u.x,u.y,u.z),i.setXYZ(S,d.x,d.y,d.z),i.setXYZ(_,f.x,f.y,f.z)}else for(let v=0,x=e.count;v<x;v+=3)s.fromBufferAttribute(e,v+0),o.fromBufferAttribute(e,v+1),c.fromBufferAttribute(e,v+2),m.subVectors(c,o),y.subVectors(s,o),m.cross(y),i.setXYZ(v+0,m.x,m.y,m.z),i.setXYZ(v+1,m.x,m.y,m.z),i.setXYZ(v+2,m.x,m.y,m.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,i=t.count;e<i;e++)Se.fromBufferAttribute(t,e),Se.normalize(),t.setXYZ(e,Se.x,Se.y,Se.z)}toNonIndexed(){function t(u,d){const f=u.array,m=u.itemSize,y=u.normalized,v=new f.constructor(d.length*m);let x=0,k=0;for(let S=0,_=d.length;S<_;S++){u.isInterleavedBufferAttribute?x=d[S]*u.data.stride+u.offset:x=d[S]*m;for(let z=0;z<m;z++)v[k++]=f[x++]}return new Oi(v,m,y)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new mn,i=this.index.array,s=this.attributes;for(const u in s){const d=s[u],f=t(d,i);e.setAttribute(u,f)}const o=this.morphAttributes;for(const u in o){const d=[],f=o[u];for(let m=0,y=f.length;m<y;m++){const v=f[m],x=t(v,i);d.push(x)}e.morphAttributes[u]=d}e.morphTargetsRelative=this.morphTargetsRelative;const c=this.groups;for(let u=0,d=c.length;u<d;u++){const f=c[u];e.addGroup(f.start,f.count,f.materialIndex)}return e}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const d=this.parameters;for(const f in d)d[f]!==void 0&&(t[f]=d[f]);return t}t.data={attributes:{}};const e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const i=this.attributes;for(const d in i){const f=i[d];t.data.attributes[d]=f.toJSON(t.data)}const s={};let o=!1;for(const d in this.morphAttributes){const f=this.morphAttributes[d],m=[];for(let y=0,v=f.length;y<v;y++){const x=f[y];m.push(x.toJSON(t.data))}m.length>0&&(s[d]=m,o=!0)}o&&(t.data.morphAttributes=s,t.data.morphTargetsRelative=this.morphTargetsRelative);const c=this.groups;c.length>0&&(t.data.groups=JSON.parse(JSON.stringify(c)));const u=this.boundingSphere;return u!==null&&(t.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const i=t.index;i!==null&&this.setIndex(i.clone(e));const s=t.attributes;for(const f in s){const m=s[f];this.setAttribute(f,m.clone(e))}const o=t.morphAttributes;for(const f in o){const m=[],y=o[f];for(let v=0,x=y.length;v<x;v++)m.push(y[v].clone(e));this.morphAttributes[f]=m}this.morphTargetsRelative=t.morphTargetsRelative;const c=t.groups;for(let f=0,m=c.length;f<m;f++){const y=c[f];this.addGroup(y.start,y.count,y.materialIndex)}const u=t.boundingBox;u!==null&&(this.boundingBox=u.clone());const d=t.boundingSphere;return d!==null&&(this.boundingSphere=d.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const xm=new Mt,dr=new Xh,ul=new ys,wm=new L,os=new L,as=new L,ls=new L,lh=new L,hl=new L,dl=new Qt,fl=new Qt,pl=new Qt,Em=new L,km=new L,Mm=new L,ml=new L,yl=new L;class Ii extends te{constructor(t=new mn,e=new Li){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){const s=e[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,c=s.length;o<c;o++){const u=s[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=o}}}}getVertexPosition(t,e){const i=this.geometry,s=i.attributes.position,o=i.morphAttributes.position,c=i.morphTargetsRelative;e.fromBufferAttribute(s,t);const u=this.morphTargetInfluences;if(o&&u){hl.set(0,0,0);for(let d=0,f=o.length;d<f;d++){const m=u[d],y=o[d];m!==0&&(lh.fromBufferAttribute(y,t),c?hl.addScaledVector(lh,m):hl.addScaledVector(lh.sub(e),m))}e.add(hl)}return e}raycast(t,e){const i=this.geometry,s=this.material,o=this.matrixWorld;s!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),ul.copy(i.boundingSphere),ul.applyMatrix4(o),dr.copy(t.ray).recast(t.near),!(ul.containsPoint(dr.origin)===!1&&(dr.intersectSphere(ul,wm)===null||dr.origin.distanceToSquared(wm)>(t.far-t.near)**2))&&(xm.copy(o).invert(),dr.copy(t.ray).applyMatrix4(xm),!(i.boundingBox!==null&&dr.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(t,e,dr)))}_computeIntersections(t,e,i){let s;const o=this.geometry,c=this.material,u=o.index,d=o.attributes.position,f=o.attributes.uv,m=o.attributes.uv1,y=o.attributes.normal,v=o.groups,x=o.drawRange;if(u!==null)if(Array.isArray(c))for(let k=0,S=v.length;k<S;k++){const _=v[k],z=c[_.materialIndex],H=Math.max(_.start,x.start),F=Math.min(u.count,Math.min(_.start+_.count,x.start+x.count));for(let I=H,O=F;I<O;I+=3){const q=u.getX(I),G=u.getX(I+1),Y=u.getX(I+2);s=gl(this,z,t,i,f,m,y,q,G,Y),s&&(s.faceIndex=Math.floor(I/3),s.face.materialIndex=_.materialIndex,e.push(s))}}else{const k=Math.max(0,x.start),S=Math.min(u.count,x.start+x.count);for(let _=k,z=S;_<z;_+=3){const H=u.getX(_),F=u.getX(_+1),I=u.getX(_+2);s=gl(this,c,t,i,f,m,y,H,F,I),s&&(s.faceIndex=Math.floor(_/3),e.push(s))}}else if(d!==void 0)if(Array.isArray(c))for(let k=0,S=v.length;k<S;k++){const _=v[k],z=c[_.materialIndex],H=Math.max(_.start,x.start),F=Math.min(d.count,Math.min(_.start+_.count,x.start+x.count));for(let I=H,O=F;I<O;I+=3){const q=I,G=I+1,Y=I+2;s=gl(this,z,t,i,f,m,y,q,G,Y),s&&(s.faceIndex=Math.floor(I/3),s.face.materialIndex=_.materialIndex,e.push(s))}}else{const k=Math.max(0,x.start),S=Math.min(d.count,x.start+x.count);for(let _=k,z=S;_<z;_+=3){const H=_,F=_+1,I=_+2;s=gl(this,c,t,i,f,m,y,H,F,I),s&&(s.faceIndex=Math.floor(_/3),e.push(s))}}}}function ox(l,t,e,i,s,o,c,u){let d;if(t.side===mv?d=i.intersectTriangle(c,o,s,!0,u):d=i.intersectTriangle(s,o,c,t.side===Pl,u),d===null)return null;yl.copy(u),yl.applyMatrix4(l.matrixWorld);const f=e.ray.origin.distanceTo(yl);return f<e.near||f>e.far?null:{distance:f,point:yl.clone(),object:l}}function gl(l,t,e,i,s,o,c,u,d,f){l.getVertexPosition(u,os),l.getVertexPosition(d,as),l.getVertexPosition(f,ls);const m=ox(l,t,e,i,os,as,ls,ml);if(m){s&&(dl.fromBufferAttribute(s,u),fl.fromBufferAttribute(s,d),pl.fromBufferAttribute(s,f),m.uv=Cn.getInterpolation(ml,os,as,ls,dl,fl,pl,new Qt)),o&&(dl.fromBufferAttribute(o,u),fl.fromBufferAttribute(o,d),pl.fromBufferAttribute(o,f),m.uv1=Cn.getInterpolation(ml,os,as,ls,dl,fl,pl,new Qt)),c&&(Em.fromBufferAttribute(c,u),km.fromBufferAttribute(c,d),Mm.fromBufferAttribute(c,f),m.normal=Cn.getInterpolation(ml,os,as,ls,Em,km,Mm,new L),m.normal.dot(i.direction)>0&&m.normal.multiplyScalar(-1));const y={a:u,b:d,c:f,normal:new L,materialIndex:0};Cn.getNormal(os,as,ls,y.normal),m.face=y}return m}class wo extends mn{constructor(t=1,e=1,i=1,s=1,o=1,c=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:s,heightSegments:o,depthSegments:c};const u=this;s=Math.floor(s),o=Math.floor(o),c=Math.floor(c);const d=[],f=[],m=[],y=[];let v=0,x=0;k("z","y","x",-1,-1,i,e,t,c,o,0),k("z","y","x",1,-1,i,e,-t,c,o,1),k("x","z","y",1,1,t,i,e,s,c,2),k("x","z","y",1,-1,t,i,-e,s,c,3),k("x","y","z",1,-1,t,e,i,s,o,4),k("x","y","z",-1,-1,t,e,-i,s,o,5),this.setIndex(d),this.setAttribute("position",new ae(f,3)),this.setAttribute("normal",new ae(m,3)),this.setAttribute("uv",new ae(y,2));function k(S,_,z,H,F,I,O,q,G,Y,ct){const pt=I/G,et=O/Y,ht=I/2,Tt=O/2,Ft=q/2,St=G+1,nt=Y+1;let wt=0,K=0;const Z=new L;for(let X=0;X<nt;X++){const R=X*et-Tt;for(let U=0;U<St;U++){const rt=U*pt-ht;Z[S]=rt*H,Z[_]=R*F,Z[z]=Ft,f.push(Z.x,Z.y,Z.z),Z[S]=0,Z[_]=0,Z[z]=q>0?1:-1,m.push(Z.x,Z.y,Z.z),y.push(U/G),y.push(1-X/Y),wt+=1}}for(let X=0;X<Y;X++)for(let R=0;R<G;R++){const U=v+R+St*X,rt=v+R+St*(X+1),ot=v+(R+1)+St*(X+1),st=v+(R+1)+St*X;d.push(U,rt,st),d.push(rt,ot,st),K+=6}u.addGroup(x,K,ct),x+=K,v+=wt}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new wo(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}class zy extends te{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Mt,this.projectionMatrix=new Mt,this.projectionMatrixInverse=new Mt,this.coordinateSystem=pr}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const zi=new L,bm=new Qt,Sm=new Qt;class Bi extends zy{constructor(t=50,e=1,i=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=i,this.far=s,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=bo*2*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(vo*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return bo*2*Math.atan(Math.tan(vo*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,i){zi.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(zi.x,zi.y).multiplyScalar(-t/zi.z),zi.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(zi.x,zi.y).multiplyScalar(-t/zi.z)}getViewSize(t,e){return this.getViewBounds(t,bm,Sm),e.subVectors(Sm,bm)}setViewOffset(t,e,i,s,o,c){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=s,this.view.width=o,this.view.height=c,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(vo*.5*this.fov)/this.zoom,i=2*e,s=this.aspect*i,o=-.5*s;const c=this.view;if(this.view!==null&&this.view.enabled){const d=c.fullWidth,f=c.fullHeight;o+=c.offsetX*s/d,e-=c.offsetY*i/f,s*=c.width/d,i*=c.height/f}const u=this.filmOffset;u!==0&&(o+=t*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+s,e,e-i,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const ch=new L,ax=new L,lx=new Dn;class Fi{constructor(t=new L(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,i,s){return this.normal.set(t,e,i),this.constant=s,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,i){const s=ch.subVectors(i,e).cross(ax.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(s,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const i=t.delta(ch),s=this.normal.dot(i);if(s===0)return this.distanceToPoint(t.start)===0?e.copy(t.start):null;const o=-(t.start.dot(this.normal)+this.constant)/s;return o<0||o>1?null:e.copy(t.start).addScaledVector(i,o)}intersectsLine(t){const e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const i=e||lx.getNormalMatrix(t),s=this.coplanarPoint(ch).applyMatrix4(t),o=this.normal.applyMatrix3(i).normalize();return this.constant=-s.dot(o),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}}const fr=new ys,vl=new L;class cx{constructor(t=new Fi,e=new Fi,i=new Fi,s=new Fi,o=new Fi,c=new Fi){this.planes=[t,e,i,s,o,c]}set(t,e,i,s,o,c){const u=this.planes;return u[0].copy(t),u[1].copy(e),u[2].copy(i),u[3].copy(s),u[4].copy(o),u[5].copy(c),this}copy(t){const e=this.planes;for(let i=0;i<6;i++)e[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t,e=pr){const i=this.planes,s=t.elements,o=s[0],c=s[1],u=s[2],d=s[3],f=s[4],m=s[5],y=s[6],v=s[7],x=s[8],k=s[9],S=s[10],_=s[11],z=s[12],H=s[13],F=s[14],I=s[15];if(i[0].setComponents(d-o,v-f,_-x,I-z).normalize(),i[1].setComponents(d+o,v+f,_+x,I+z).normalize(),i[2].setComponents(d+c,v+m,_+k,I+H).normalize(),i[3].setComponents(d-c,v-m,_-k,I-H).normalize(),i[4].setComponents(d-u,v-y,_-S,I-F).normalize(),e===pr)i[5].setComponents(d+u,v+y,_+S,I+F).normalize();else if(e===Lh)i[5].setComponents(u,y,S,F).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&&t.computeBoundingSphere(),fr.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const e=t.geometry;e.boundingSphere===null&&e.computeBoundingSphere(),fr.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(fr)}intersectsSprite(t){return fr.center.set(0,0,0),fr.radius=.7071067811865476,fr.applyMatrix4(t.matrixWorld),this.intersectsSphere(fr)}intersectsSphere(t){const e=this.planes,i=t.center,s=-t.radius;for(let o=0;o<6;o++)if(e[o].distanceToPoint(i)<s)return!1;return!0}intersectsBox(t){const e=this.planes;for(let i=0;i<6;i++){const s=e[i];if(vl.x=s.normal.x>0?t.max.x:t.min.x,vl.y=s.normal.y>0?t.max.y:t.min.y,vl.z=s.normal.z>0?t.max.z:t.min.z,s.distanceToPoint(vl)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function ux(){let l=null,t=!1,e=null,i=null;function s(o,c){e(o,c),i=l.requestAnimationFrame(s)}return{start:function(){t!==!0&&e!==null&&(i=l.requestAnimationFrame(s),t=!0)},stop:function(){l.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(o){e=o},setContext:function(o){l=o}}}class Zh extends zy{constructor(t=-1,e=1,i=1,s=-1,o=.1,c=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=i,this.bottom=s,this.near=o,this.far=c,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,e,i,s,o,c){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=s,this.view.width=o,this.view.height=c,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let o=i-t,c=i+t,u=s+e,d=s-e;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=f*this.view.offsetX,c=o+f*this.view.width,u-=m*this.view.offsetY,d=u-m*this.view.height}this.projectionMatrix.makeOrthographic(o,c,u,d,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}}class hx extends Je{constructor(t,e,i,s,o,c,u,d,f,m){if(m=m!==void 0?m:Wu,m!==Wu&&m!==Jp)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&m===Wu&&(i=wv),i===void 0&&m===Jp&&(i=Ev),super(null,s,o,c,u,d,m,i,f),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=u!==void 0?u:zl,this.minFilter=d!==void 0?d:zl,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){const e=super.toJSON(t);return this.compareFunction!==null&&(e.compareFunction=this.compareFunction),e}}const dx=new hx(1,1);dx.compareFunction=bv;class So extends te{constructor(){super(),this.isGroup=!0,this.type="Group"}}class fx extends Bi{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}var Am=new L,Tm=new L;function px(l,t,e){Am.setFromMatrixPosition(t.matrixWorld),Tm.setFromMatrixPosition(e.matrixWorld);var i=Am.distanceTo(Tm),s=t.projectionMatrix.elements,o=e.projectionMatrix.elements,c=s[14]/(s[10]-1),u=s[14]/(s[10]+1),d=(s[9]+1)/s[5],f=(s[9]-1)/s[5],m=(s[8]-1)/s[0],y=(o[8]+1)/o[0],v=c*m,x=c*y,k=i/(-m+y),S=k*-m;t.matrixWorld.decompose(l.position,l.quaternion,l.scale),l.translateX(S),l.translateZ(k),l.matrixWorld.compose(l.position,l.quaternion,l.scale),l.matrixWorldInverse.copy(l.matrixWorld).invert();var _=c+k,z=u+k,H=v-S,F=x+(i-S),I=d*u/z*_,O=f*u/z*_;l.projectionMatrix.makePerspective(H,F,I,O,_,z)}function mx(l){var t,e,i=this,s=null,o=null,c=null,u=[],d=new Mt,f=new Mt,m=1,y="local-floor";typeof window<"u"&&"VRFrameData"in window&&(o=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",I,!1));var v=new Mt,x=new Ie,k=new L,S=new Bi;S.viewport=new ge,S.layers.enable(1);var _=new Bi;_.viewport=new ge,_.layers.enable(2);var z=new fx([S,_]);z.layers.enable(1),z.layers.enable(2);var H=new Qt,F;function I(){var et=i.isPresenting=s!==null&&s.isPresenting===!0;if(et){var ht=s.getEyeParameters("left");t=2*ht.renderWidth*m,e=ht.renderHeight*m,F=l.getPixelRatio(),l.getSize(H),l.setDrawingBufferSize(t,e,1),S.viewport.set(0,0,t/2,e),_.viewport.set(t/2,0,t/2,e),pt.start(),i.dispatchEvent({type:"sessionstart"})}else i.enabled&&l.setDrawingBufferSize(H.width,H.height,F),pt.stop(),i.dispatchEvent({type:"sessionend"})}var O=[],q=[];function G(et){for(var ht=navigator.getGamepads&&navigator.getGamepads(),Tt=0,Ft=ht.length;Tt<Ft;Tt++){var St=ht[Tt];if(St&&(St.id==="Daydream Controller"||St.id==="Gear VR Controller"||St.id==="Oculus Go Controller"||St.id==="OpenVR Gamepad"||St.id.startsWith("Oculus Touch")||St.id.startsWith("HTC Vive Focus")||St.id.startsWith("Spatial Controller"))){var nt=St.hand;if(et===0&&(nt===""||nt==="right")||et===1&&nt==="left")return St}}}function Y(){for(var et=0;et<u.length;et++){var ht=u[et],Tt=G(et);if(Tt!==void 0&&Tt.pose!==void 0){if(Tt.pose===null)return;var Ft=Tt.pose;Ft.hasPosition===!1&&ht.position.set(.2,-.6,-.05),Ft.position!==null&&ht.position.fromArray(Ft.position),Ft.orientation!==null&&ht.quaternion.fromArray(Ft.orientation),ht.matrix.compose(ht.position,ht.quaternion,ht.scale),ht.matrix.premultiply(d),ht.matrix.decompose(ht.position,ht.quaternion,ht.scale),ht.matrixWorldNeedsUpdate=!0,ht.visible=!0;var St=Tt.id==="Daydream Controller"?0:1;O[et]===void 0&&(O[et]=!1),O[et]!==Tt.buttons[St].pressed&&(O[et]=Tt.buttons[St].pressed,O[et]===!0?ht.dispatchEvent({type:"selectstart"}):(ht.dispatchEvent({type:"selectend"}),ht.dispatchEvent({type:"select"}))),St=2,q[et]===void 0&&(q[et]=!1),Tt.buttons[St]!==void 0&&q[et]!==Tt.buttons[St].pressed&&(q[et]=Tt.buttons[St].pressed,q[et]===!0?ht.dispatchEvent({type:"squeezestart"}):(ht.dispatchEvent({type:"squeezeend"}),ht.dispatchEvent({type:"squeeze"})))}else ht.visible=!1}}function ct(et,ht){ht!==null&&ht.length===4&&et.set(ht[0]*t,ht[1]*e,ht[2]*t,ht[3]*e)}this.enabled=!1,this.getController=function(et){var ht=u[et];return ht===void 0&&(ht=new So,ht.matrixAutoUpdate=!1,ht.visible=!1,u[et]=ht),ht},this.getDevice=function(){return s},this.setDevice=function(et){et!==void 0&&(s=et),pt.setContext(et)},this.setFramebufferScaleFactor=function(et){m=et},this.setReferenceSpaceType=function(et){y=et},this.setPoseTarget=function(et){et!==void 0&&(c=et)},this.cameraAutoUpdate=!0,this.updateCamera=function(et){var ht=y==="local-floor"?1.6:0;if(s.depthNear=et.near,s.depthFar=et.far,s.getFrameData(o),y==="local-floor"){var Tt=s.stageParameters;Tt?d.fromArray(Tt.sittingToStandingTransform):d.makeTranslation(0,ht,0)}var Ft=o.pose,St=c!==null?c:et;St.matrix.copy(d),St.matrix.decompose(St.position,St.quaternion,St.scale),Ft.orientation!==null&&(x.fromArray(Ft.orientation),St.quaternion.multiply(x)),Ft.position!==null&&(x.setFromRotationMatrix(d),k.fromArray(Ft.position),k.applyQuaternion(x),St.position.add(k)),St.updateMatrixWorld();for(var nt=St.children,wt=0,K=nt.length;wt<K;wt++)nt[wt].updateMatrixWorld(!0);S.near=et.near,_.near=et.near,S.far=et.far,_.far=et.far,S.matrixWorldInverse.fromArray(o.leftViewMatrix),_.matrixWorldInverse.fromArray(o.rightViewMatrix),f.copy(d).invert(),y==="local-floor"&&(S.matrixWorldInverse.multiply(f),_.matrixWorldInverse.multiply(f));var Z=St.parent;Z!==null&&(v.copy(Z.matrixWorld).invert(),S.matrixWorldInverse.multiply(v),_.matrixWorldInverse.multiply(v)),S.matrixWorld.copy(S.matrixWorldInverse).invert(),_.matrixWorld.copy(_.matrixWorldInverse).invert(),S.projectionMatrix.fromArray(o.leftProjectionMatrix),_.projectionMatrix.fromArray(o.rightProjectionMatrix),px(z,S,_);var X=s.getLayers();if(X.length){var R=X[0];ct(S.viewport,R.leftBounds),ct(_.viewport,R.rightBounds)}return Y(),z},this.getCamera=function(){return z},this.getFoveation=function(){return 1},this.setFoveation=function(et){et!==1&&console.warn("THREE.WebVRManager: setFoveation() not used in WebVR.")},this.getEnvironmentBlendMode=function(){if(i.isPresenting)return"opaque"},this.getStandingMatrix=function(){return d},this.isPresenting=!1;var pt=new ux;this.setAnimationLoop=function(et){pt.setAnimationLoop(et),this.isPresenting&&pt.start()},this.submitFrame=function(){this.isPresenting&&s.submitFrame()},this.dispose=function(){typeof window<"u"&&window.removeEventListener("vrdisplaypresentchange",I)},this.setFrameOfReferenceType=function(){console.warn("THREE.WebVRManager: setFrameOfReferenceType() has been deprecated.")}}Object.assign(mx.prototype,{addEventListener:ii.prototype.addEventListener,hasEventListener:ii.prototype.hasEventListener,removeEventListener:ii.prototype.removeEventListener,dispatchEvent:ii.prototype.dispatchEvent});class yx extends Xv{constructor(t,e,i,s={}){super(t,e,s),this.depthBuffer=!1,this.stencilBuffer=!1,this.numViews=i}copy(t){return super.copy(t),this.numViews=t.numViews,this}}yx.prototype.isWebGLMultiviewRenderTarget=!0;class gx extends te{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new we,this.environmentIntensity=1,this.environmentRotation=new we,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return this.fog!==null&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(e.object.backgroundIntensity=this.backgroundIntensity),e.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(e.object.environmentIntensity=this.environmentIntensity),e.object.environmentRotation=this.environmentRotation.toArray(),e}}const _m=new L,Cm=new ge,Rm=new ge,vx=new L,Pm=new Mt,xl=new L,uh=new ys,zm=new Mt,hh=new Xh;class Ny extends Ii{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Zp,this.bindMatrix=new Mt,this.bindMatrixInverse=new Mt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const t=this.geometry;this.boundingBox===null&&(this.boundingBox=new ms),this.boundingBox.makeEmpty();const e=t.getAttribute("position");for(let i=0;i<e.count;i++)this.getVertexPosition(i,xl),this.boundingBox.expandByPoint(xl)}computeBoundingSphere(){const t=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new ys),this.boundingSphere.makeEmpty();const e=t.getAttribute("position");for(let i=0;i<e.count;i++)this.getVertexPosition(i,xl),this.boundingSphere.expandByPoint(xl)}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,e){const i=this.material,s=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),uh.copy(this.boundingSphere),uh.applyMatrix4(s),t.ray.intersectsSphere(uh)!==!1&&(zm.copy(s).invert(),hh.copy(t.ray).applyMatrix4(zm),!(this.boundingBox!==null&&hh.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(t,e,hh)))}getVertexPosition(t,e){return super.getVertexPosition(t,e),this.applyBoneTransform(t,e),e}bind(t,e){this.skeleton=t,e===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new ge,e=this.geometry.attributes.skinWeight;for(let i=0,s=e.count;i<s;i++){t.fromBufferAttribute(e,i);const o=1/t.manhattanLength();o!==1/0?t.multiplyScalar(o):t.set(1,0,0,0),e.setXYZW(i,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===Zp?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===gv?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,e){const i=this.skeleton,s=this.geometry;Cm.fromBufferAttribute(s.attributes.skinIndex,t),Rm.fromBufferAttribute(s.attributes.skinWeight,t),_m.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let o=0;o<4;o++){const c=Rm.getComponent(o);if(c!==0){const u=Cm.getComponent(o);Pm.multiplyMatrices(i.bones[u].matrixWorld,i.boneInverses[u]),e.addScaledVector(vx.copy(_m).applyMatrix4(Pm),c)}}return e.applyMatrix4(this.bindMatrixInverse)}}class Ll extends te{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Fy extends Je{constructor(t=null,e=1,i=1,s,o,c,u,d,f=zl,m=zl,y,v){super(null,c,u,d,f,m,s,o,y,v),this.isDataTexture=!0,this.image={data:t,width:e,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Nm=new Mt,xx=new Mt;class jl{constructor(t=[],e=[]){this.uuid=ji(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),e.length===0)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,s=this.bones.length;i<s;i++)this.boneInverses.push(new Mt)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const i=new Mt;this.bones[t]&&i.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const i=this.bones[t];i&&i.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const i=this.bones[t];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const t=this.bones,e=this.boneInverses,i=this.boneMatrices,s=this.boneTexture;for(let o=0,c=t.length;o<c;o++){const u=t[o]?t[o].matrixWorld:xx;Nm.multiplyMatrices(u,e[o]),Nm.toArray(i,o*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new jl(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(this.bones.length*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const i=new Fy(e,t,t,Sy,by);return i.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=i,this}getBoneByName(t){for(let e=0,i=this.bones.length;e<i;e++){const s=this.bones[e];if(s.name===t)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let i=0,s=t.bones.length;i<s;i++){const o=t.bones[i];let c=e[o];c===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),c=new Ll),this.bones.push(c),this.boneInverses.push(new Mt().fromArray(t.boneInverses[i]))}return this.init(),this}toJSON(){const t={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,i=this.boneInverses;for(let s=0,o=e.length;s<o;s++){const c=e[s];t.bones.push(c.uuid);const u=i[s];t.boneInverses.push(u.toArray())}return t}}class Ao extends Vl{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new oe(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const Il=new L,Dl=new L,Fm=new Mt,mo=new Xh,wl=new ys,dh=new L,Lm=new L;class Hl extends te{constructor(t=new mn,e=new Ao){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.index===null){const e=t.attributes.position,i=[0];for(let s=1,o=e.count;s<o;s++)Il.fromBufferAttribute(e,s-1),Dl.fromBufferAttribute(e,s),i[s]=i[s-1],i[s]+=Il.distanceTo(Dl);t.setAttribute("lineDistance",new ae(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const i=this.geometry,s=this.matrixWorld,o=t.params.Line.threshold,c=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),wl.copy(i.boundingSphere),wl.applyMatrix4(s),wl.radius+=o,t.ray.intersectsSphere(wl)===!1)return;Fm.copy(s).invert(),mo.copy(t.ray).applyMatrix4(Fm);const u=o/((this.scale.x+this.scale.y+this.scale.z)/3),d=u*u,f=this.isLineSegments?2:1,m=i.index,v=i.attributes.position;if(m!==null){const x=Math.max(0,c.start),k=Math.min(m.count,c.start+c.count);for(let S=x,_=k-1;S<_;S+=f){const z=m.getX(S),H=m.getX(S+1),F=El(this,t,mo,d,z,H);F&&e.push(F)}if(this.isLineLoop){const S=m.getX(k-1),_=m.getX(x),z=El(this,t,mo,d,S,_);z&&e.push(z)}}else{const x=Math.max(0,c.start),k=Math.min(v.count,c.start+c.count);for(let S=x,_=k-1;S<_;S+=f){const z=El(this,t,mo,d,S,S+1);z&&e.push(z)}if(this.isLineLoop){const S=El(this,t,mo,d,k-1,x);S&&e.push(S)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){const s=e[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,c=s.length;o<c;o++){const u=s[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=o}}}}}function El(l,t,e,i,s,o){const c=l.geometry.attributes.position;if(Il.fromBufferAttribute(c,s),Dl.fromBufferAttribute(c,o),e.distanceSqToSegment(Il,Dl,dh,Lm)>i)return;dh.applyMatrix4(l.matrixWorld);const d=t.ray.origin.distanceTo(dh);if(!(d<t.near||d>t.far))return{distance:d,point:Lm.clone().applyMatrix4(l.matrixWorld),index:s,face:null,faceIndex:null,object:l}}const Im=new L,Dm=new L;class wx extends Hl{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.index===null){const e=t.attributes.position,i=[];for(let s=0,o=e.count;s<o;s+=2)Im.fromBufferAttribute(e,s),Dm.fromBufferAttribute(e,s+1),i[s]=s===0?0:i[s-1],i[s+1]=i[s]+Im.distanceTo(Dm);t.setAttribute("lineDistance",new ae(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Ex{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const i=this.getUtoTmapping(t);return this.getPoint(i,e)}getPoints(t=5){const e=[];for(let i=0;i<=t;i++)e.push(this.getPoint(i/t));return e}getSpacedPoints(t=5){const e=[];for(let i=0;i<=t;i++)e.push(this.getPointAt(i/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let i,s=this.getPoint(0),o=0;e.push(0);for(let c=1;c<=t;c++)i=this.getPoint(c/t),o+=i.distanceTo(s),e.push(o),s=i;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const i=this.getLengths();let s=0;const o=i.length;let c;e?c=e:c=t*i[o-1];let u=0,d=o-1,f;for(;u<=d;)if(s=Math.floor(u+(d-u)/2),f=i[s]-c,f<0)u=s+1;else if(f>0)d=s-1;else{d=s;break}if(s=d,i[s]===c)return s/(o-1);const m=i[s],v=i[s+1]-m,x=(c-m)/v;return(s+x)/(o-1)}getTangent(t,e){let s=t-1e-4,o=t+1e-4;s<0&&(s=0),o>1&&(o=1);const c=this.getPoint(s),u=this.getPoint(o),d=e||(c.isVector2?new Qt:new L);return d.copy(u).sub(c).normalize(),d}getTangentAt(t,e){const i=this.getUtoTmapping(t);return this.getTangent(i,e)}computeFrenetFrames(t,e){const i=new L,s=[],o=[],c=[],u=new L,d=new Mt;for(let x=0;x<=t;x++){const k=x/t;s[x]=this.getTangentAt(k,new L)}o[0]=new L,c[0]=new L;let f=Number.MAX_VALUE;const m=Math.abs(s[0].x),y=Math.abs(s[0].y),v=Math.abs(s[0].z);m<=f&&(f=m,i.set(1,0,0)),y<=f&&(f=y,i.set(0,1,0)),v<=f&&i.set(0,0,1),u.crossVectors(s[0],i).normalize(),o[0].crossVectors(s[0],u),c[0].crossVectors(s[0],o[0]);for(let x=1;x<=t;x++){if(o[x]=o[x-1].clone(),c[x]=c[x-1].clone(),u.crossVectors(s[x-1],s[x]),u.length()>Number.EPSILON){u.normalize();const k=Math.acos(Ce(s[x-1].dot(s[x]),-1,1));o[x].applyMatrix4(d.makeRotationAxis(u,k))}c[x].crossVectors(s[x],o[x])}if(e===!0){let x=Math.acos(Ce(o[0].dot(o[t]),-1,1));x/=t,s[0].dot(u.crossVectors(o[0],o[t]))>0&&(x=-x);for(let k=1;k<=t;k++)o[k].applyMatrix4(d.makeRotationAxis(s[k],x*k)),c[k].crossVectors(s[k],o[k])}return{tangents:s,normals:o,binormals:c}}clone(){return new this.constructor().copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}const kx={triangulate:function(l,t,e=2){const i=t&&t.length,s=i?t[0]*e:l.length;let o=Ly(l,0,s,e,!0);const c=[];if(!o||o.next===o.prev)return c;let u,d,f,m,y,v,x;if(i&&(o=Tx(l,t,o,e)),l.length>80*e){u=f=l[0],d=m=l[1];for(let k=e;k<s;k+=e)y=l[k],v=l[k+1],y<u&&(u=y),v<d&&(d=v),y>f&&(f=y),v>m&&(m=v);x=Math.max(f-u,m-d),x=x!==0?32767/x:0}return To(o,c,e,u,d,x,0),c}};function Ly(l,t,e,i,s){let o,c;if(s===Ox(l,t,e,i)>0)for(o=t;o<e;o+=i)c=Om(o,l[o],l[o+1],c);else for(o=e-i;o>=t;o-=i)c=Om(o,l[o],l[o+1],c);return c&&Ul(c,c.next)&&(Co(c),c=c.next),c}function mr(l,t){if(!l)return l;t||(t=l);let e=l,i;do if(i=!1,!e.steiner&&(Ul(e,e.next)||ie(e.prev,e,e.next)===0)){if(Co(e),e=t=e.prev,e===e.next)break;i=!0}else e=e.next;while(i||e!==t);return t}function To(l,t,e,i,s,o,c){if(!l)return;!c&&o&&zx(l,i,s,o);let u=l,d,f;for(;l.prev!==l.next;){if(d=l.prev,f=l.next,o?bx(l,i,s,o):Mx(l)){t.push(d.i/e|0),t.push(l.i/e|0),t.push(f.i/e|0),Co(l),l=f.next,u=f.next;continue}if(l=f,l===u){c?c===1?(l=Sx(mr(l),t,e),To(l,t,e,i,s,o,2)):c===2&&Ax(l,t,e,i,s,o):To(mr(l),t,e,i,s,o,1);break}}}function Mx(l){const t=l.prev,e=l,i=l.next;if(ie(t,e,i)>=0)return!1;const s=t.x,o=e.x,c=i.x,u=t.y,d=e.y,f=i.y,m=s<o?s<c?s:c:o<c?o:c,y=u<d?u<f?u:f:d<f?d:f,v=s>o?s>c?s:c:o>c?o:c,x=u>d?u>f?u:f:d>f?d:f;let k=i.next;for(;k!==t;){if(k.x>=m&&k.x<=v&&k.y>=y&&k.y<=x&&ds(s,u,o,d,c,f,k.x,k.y)&&ie(k.prev,k,k.next)>=0)return!1;k=k.next}return!0}function bx(l,t,e,i){const s=l.prev,o=l,c=l.next;if(ie(s,o,c)>=0)return!1;const u=s.x,d=o.x,f=c.x,m=s.y,y=o.y,v=c.y,x=u<d?u<f?u:f:d<f?d:f,k=m<y?m<v?m:v:y<v?y:v,S=u>d?u>f?u:f:d>f?d:f,_=m>y?m>v?m:v:y>v?y:v,z=Dh(x,k,t,e,i),H=Dh(S,_,t,e,i);let F=l.prevZ,I=l.nextZ;for(;F&&F.z>=z&&I&&I.z<=H;){if(F.x>=x&&F.x<=S&&F.y>=k&&F.y<=_&&F!==s&&F!==c&&ds(u,m,d,y,f,v,F.x,F.y)&&ie(F.prev,F,F.next)>=0||(F=F.prevZ,I.x>=x&&I.x<=S&&I.y>=k&&I.y<=_&&I!==s&&I!==c&&ds(u,m,d,y,f,v,I.x,I.y)&&ie(I.prev,I,I.next)>=0))return!1;I=I.nextZ}for(;F&&F.z>=z;){if(F.x>=x&&F.x<=S&&F.y>=k&&F.y<=_&&F!==s&&F!==c&&ds(u,m,d,y,f,v,F.x,F.y)&&ie(F.prev,F,F.next)>=0)return!1;F=F.prevZ}for(;I&&I.z<=H;){if(I.x>=x&&I.x<=S&&I.y>=k&&I.y<=_&&I!==s&&I!==c&&ds(u,m,d,y,f,v,I.x,I.y)&&ie(I.prev,I,I.next)>=0)return!1;I=I.nextZ}return!0}function Sx(l,t,e){let i=l;do{const s=i.prev,o=i.next.next;!Ul(s,o)&&Iy(s,i,i.next,o)&&_o(s,o)&&_o(o,s)&&(t.push(s.i/e|0),t.push(i.i/e|0),t.push(o.i/e|0),Co(i),Co(i.next),i=l=o),i=i.next}while(i!==l);return mr(i)}function Ax(l,t,e,i,s,o){let c=l;do{let u=c.next.next;for(;u!==c.prev;){if(c.i!==u.i&&Lx(c,u)){let d=Dy(c,u);c=mr(c,c.next),d=mr(d,d.next),To(c,t,e,i,s,o,0),To(d,t,e,i,s,o,0);return}u=u.next}c=c.next}while(c!==l)}function Tx(l,t,e,i){const s=[];let o,c,u,d,f;for(o=0,c=t.length;o<c;o++)u=t[o]*i,d=o<c-1?t[o+1]*i:l.length,f=Ly(l,u,d,i,!1),f===f.next&&(f.steiner=!0),s.push(Fx(f));for(s.sort(_x),o=0;o<s.length;o++)e=Cx(s[o],e);return e}function _x(l,t){return l.x-t.x}function Cx(l,t){const e=Rx(l,t);if(!e)return t;const i=Dy(e,l);return mr(i,i.next),mr(e,e.next)}function Rx(l,t){let e=t,i=-1/0,s;const o=l.x,c=l.y;do{if(c<=e.y&&c>=e.next.y&&e.next.y!==e.y){const v=e.x+(c-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(v<=o&&v>i&&(i=v,s=e.x<e.next.x?e:e.next,v===o))return s}e=e.next}while(e!==t);if(!s)return null;const u=s,d=s.x,f=s.y;let m=1/0,y;e=s;do o>=e.x&&e.x>=d&&o!==e.x&&ds(c<f?o:i,c,d,f,c<f?i:o,c,e.x,e.y)&&(y=Math.abs(c-e.y)/(o-e.x),_o(e,l)&&(y<m||y===m&&(e.x>s.x||e.x===s.x&&Px(s,e)))&&(s=e,m=y)),e=e.next;while(e!==u);return s}function Px(l,t){return ie(l.prev,l,t.prev)<0&&ie(t.next,l,l.next)<0}function zx(l,t,e,i){let s=l;do s.z===0&&(s.z=Dh(s.x,s.y,t,e,i)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==l);s.prevZ.nextZ=null,s.prevZ=null,Nx(s)}function Nx(l){let t,e,i,s,o,c,u,d,f=1;do{for(e=l,l=null,o=null,c=0;e;){for(c++,i=e,u=0,t=0;t<f&&(u++,i=i.nextZ,!!i);t++);for(d=f;u>0||d>0&&i;)u!==0&&(d===0||!i||e.z<=i.z)?(s=e,e=e.nextZ,u--):(s=i,i=i.nextZ,d--),o?o.nextZ=s:l=s,s.prevZ=o,o=s;e=i}o.nextZ=null,f*=2}while(c>1);return l}function Dh(l,t,e,i,s){return l=(l-e)*s|0,t=(t-i)*s|0,l=(l|l<<8)&16711935,l=(l|l<<4)&252645135,l=(l|l<<2)&858993459,l=(l|l<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,l|t<<1}function Fx(l){let t=l,e=l;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==l);return e}function ds(l,t,e,i,s,o,c,u){return(s-c)*(t-u)>=(l-c)*(o-u)&&(l-c)*(i-u)>=(e-c)*(t-u)&&(e-c)*(o-u)>=(s-c)*(i-u)}function Lx(l,t){return l.next.i!==t.i&&l.prev.i!==t.i&&!Ix(l,t)&&(_o(l,t)&&_o(t,l)&&Dx(l,t)&&(ie(l.prev,l,t.prev)||ie(l,t.prev,t))||Ul(l,t)&&ie(l.prev,l,l.next)>0&&ie(t.prev,t,t.next)>0)}function ie(l,t,e){return(t.y-l.y)*(e.x-t.x)-(t.x-l.x)*(e.y-t.y)}function Ul(l,t){return l.x===t.x&&l.y===t.y}function Iy(l,t,e,i){const s=Ml(ie(l,t,e)),o=Ml(ie(l,t,i)),c=Ml(ie(e,i,l)),u=Ml(ie(e,i,t));return!!(s!==o&&c!==u||s===0&&kl(l,e,t)||o===0&&kl(l,i,t)||c===0&&kl(e,l,i)||u===0&&kl(e,t,i))}function kl(l,t,e){return t.x<=Math.max(l.x,e.x)&&t.x>=Math.min(l.x,e.x)&&t.y<=Math.max(l.y,e.y)&&t.y>=Math.min(l.y,e.y)}function Ml(l){return l>0?1:l<0?-1:0}function Ix(l,t){let e=l;do{if(e.i!==l.i&&e.next.i!==l.i&&e.i!==t.i&&e.next.i!==t.i&&Iy(e,e.next,l,t))return!0;e=e.next}while(e!==l);return!1}function _o(l,t){return ie(l.prev,l,l.next)<0?ie(l,t,l.next)>=0&&ie(l,l.prev,t)>=0:ie(l,t,l.prev)<0||ie(l,l.next,t)<0}function Dx(l,t){let e=l,i=!1;const s=(l.x+t.x)/2,o=(l.y+t.y)/2;do e.y>o!=e.next.y>o&&e.next.y!==e.y&&s<(e.next.x-e.x)*(o-e.y)/(e.next.y-e.y)+e.x&&(i=!i),e=e.next;while(e!==l);return i}function Dy(l,t){const e=new Oh(l.i,l.x,l.y),i=new Oh(t.i,t.x,t.y),s=l.next,o=t.prev;return l.next=t,t.prev=l,e.next=s,s.prev=e,i.next=e,e.prev=i,o.next=i,i.prev=o,i}function Om(l,t,e,i){const s=new Oh(l,t,e);return i?(s.next=i.next,s.prev=i,i.next.prev=s,i.next=s):(s.prev=s,s.next=s),s}function Co(l){l.next.prev=l.prev,l.prev.next=l.next,l.prevZ&&(l.prevZ.nextZ=l.nextZ),l.nextZ&&(l.nextZ.prevZ=l.prevZ)}function Oh(l,t,e){this.i=l,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ox(l,t,e,i){let s=0;for(let o=t,c=e-i;o<e;o+=i)s+=(l[c]-l[o])*(l[o+1]+l[c+1]),c=o;return s}class Yh{static area(t){const e=t.length;let i=0;for(let s=e-1,o=0;o<e;s=o++)i+=t[s].x*t[o].y-t[o].x*t[s].y;return i*.5}static isClockWise(t){return Yh.area(t)<0}static triangulateShape(t,e){const i=[],s=[],o=[];Bm(t),Vm(i,t);let c=t.length;e.forEach(Bm);for(let d=0;d<e.length;d++)s.push(c),c+=e[d].length,Vm(i,e[d]);const u=kx.triangulate(i,s);for(let d=0;d<u.length;d+=3)o.push(u.slice(d,d+3));return o}}function Bm(l){const t=l.length;t>2&&l[t-1].equals(l[0])&&l.pop()}function Vm(l,t){for(let e=0;e<t.length;e++)l.push(t[e].x),l.push(t[e].y)}class Ol extends mn{constructor(t=1,e=32,i=16,s=0,o=Math.PI*2,c=0,u=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:s,phiLength:o,thetaStart:c,thetaLength:u},e=Math.max(3,Math.floor(e)),i=Math.max(2,Math.floor(i));const d=Math.min(c+u,Math.PI);let f=0;const m=[],y=new L,v=new L,x=[],k=[],S=[],_=[];for(let z=0;z<=i;z++){const H=[],F=z/i;let I=0;z===0&&c===0?I=.5/e:z===i&&d===Math.PI&&(I=-.5/e);for(let O=0;O<=e;O++){const q=O/e;y.x=-t*Math.cos(s+q*o)*Math.sin(c+F*u),y.y=t*Math.cos(c+F*u),y.z=t*Math.sin(s+q*o)*Math.sin(c+F*u),k.push(y.x,y.y,y.z),v.copy(y).normalize(),S.push(v.x,v.y,v.z),_.push(q+I,1-F),H.push(f++)}m.push(H)}for(let z=0;z<i;z++)for(let H=0;H<e;H++){const F=m[z][H+1],I=m[z][H],O=m[z+1][H],q=m[z+1][H+1];(z!==0||c>0)&&x.push(F,I,q),(z!==i-1||d<Math.PI)&&x.push(I,O,q)}this.setIndex(x),this.setAttribute("position",new ae(k,3)),this.setAttribute("normal",new ae(S,3)),this.setAttribute("uv",new ae(_,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Ol(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class Eo extends Vl{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new oe(16777215),this.specular=new oe(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new oe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ay,this.normalScale=new Qt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new we,this.combine=Wh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class Oy extends Vl{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new oe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new oe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ay,this.normalScale=new Qt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new we,this.combine=Wh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}function bl(l,t,e){return!l||!e&&l.constructor===t?l:typeof t.BYTES_PER_ELEMENT=="number"?new t(l):Array.prototype.slice.call(l)}function Bx(l){return ArrayBuffer.isView(l)&&!(l instanceof DataView)}function Vx(l){function t(s,o){return l[s]-l[o]}const e=l.length,i=new Array(e);for(let s=0;s!==e;++s)i[s]=s;return i.sort(t),i}function jm(l,t,e){const i=l.length,s=new l.constructor(i);for(let o=0,c=0;c!==i;++o){const u=e[o]*t;for(let d=0;d!==t;++d)s[c++]=l[u+d]}return s}function By(l,t,e,i){let s=1,o=l[0];for(;o!==void 0&&o[i]===void 0;)o=l[s++];if(o===void 0)return;let c=o[i];if(c!==void 0)if(Array.isArray(c))do c=o[i],c!==void 0&&(t.push(o.time),e.push.apply(e,c)),o=l[s++];while(o!==void 0);else if(c.toArray!==void 0)do c=o[i],c!==void 0&&(t.push(o.time),c.toArray(e,e.length)),o=l[s++];while(o!==void 0);else do c=o[i],c!==void 0&&(t.push(o.time),e.push(c)),o=l[s++];while(o!==void 0)}class Wl{constructor(t,e,i,s){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new e.constructor(i),this.sampleValues=e,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let i=this._cachedIndex,s=e[i],o=e[i-1];t:{e:{let c;n:{i:if(!(t<s)){for(let u=i+2;;){if(s===void 0){if(t<o)break i;return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===u)break;if(o=s,s=e[++i],t<s)break e}c=e.length;break n}if(!(t>=o)){const u=e[1];t<u&&(i=2,o=u);for(let d=i-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===d)break;if(s=o,o=e[--i-1],t>=o)break e}c=i,i=0;break n}break t}for(;i<c;){const u=i+c>>>1;t<e[u]?c=u:i=u+1}if(s=e[i],o=e[i-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,o,s)}return this.interpolate_(i,o,t,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,i=this.sampleValues,s=this.valueSize,o=t*s;for(let c=0;c!==s;++c)e[c]=i[o+c];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class jx extends Wl{constructor(t,e,i,s){super(t,e,i,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Qp,endingEnd:Qp}}intervalChanged_(t,e,i){const s=this.parameterPositions;let o=t-2,c=t+1,u=s[o],d=s[c];if(u===void 0)switch(this.getSettings_().endingStart){case $p:o=t,u=2*e-i;break;case tm:o=s.length-2,u=e+s[o]-s[o+1];break;default:o=t,u=i}if(d===void 0)switch(this.getSettings_().endingEnd){case $p:c=t,d=2*i-e;break;case tm:c=1,d=i+s[1]-s[0];break;default:c=t-1,d=e}const f=(i-e)*.5,m=this.valueSize;this._weightPrev=f/(e-u),this._weightNext=f/(d-i),this._offsetPrev=o*m,this._offsetNext=c*m}interpolate_(t,e,i,s){const o=this.resultBuffer,c=this.sampleValues,u=this.valueSize,d=t*u,f=d-u,m=this._offsetPrev,y=this._offsetNext,v=this._weightPrev,x=this._weightNext,k=(i-e)/(s-e),S=k*k,_=S*k,z=-v*_+2*v*S-v*k,H=(1+v)*_+(-1.5-2*v)*S+(-.5+v)*k+1,F=(-1-x)*_+(1.5+x)*S+.5*k,I=x*_-x*S;for(let O=0;O!==u;++O)o[O]=z*c[m+O]+H*c[f+O]+F*c[d+O]+I*c[y+O];return o}}class Hx extends Wl{constructor(t,e,i,s){super(t,e,i,s)}interpolate_(t,e,i,s){const o=this.resultBuffer,c=this.sampleValues,u=this.valueSize,d=t*u,f=d-u,m=(i-e)/(s-e),y=1-m;for(let v=0;v!==u;++v)o[v]=c[f+v]*y+c[d+v]*m;return o}}class Ux extends Wl{constructor(t,e,i,s){super(t,e,i,s)}interpolate_(t){return this.copySampleValue_(t-1)}}class On{constructor(t,e,i,s){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(e===void 0||e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=bl(e,this.TimeBufferType),this.values=bl(i,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let i;if(e.toJSON!==this.toJSON)i=e.toJSON(t);else{i={name:t.name,times:bl(t.times,Array),values:bl(t.values,Array)};const s=t.getInterpolation();s!==t.DefaultInterpolation&&(i.interpolation=s)}return i.type=t.ValueTypeName,i}InterpolantFactoryMethodDiscrete(t){return new Ux(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new Hx(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new jx(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case Nl:e=this.InterpolantFactoryMethodDiscrete;break;case Fl:e=this.InterpolantFactoryMethodLinear;break;case Gu:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Nl;case this.InterpolantFactoryMethodLinear:return Fl;case this.InterpolantFactoryMethodSmooth:return Gu}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){const e=this.times;for(let i=0,s=e.length;i!==s;++i)e[i]+=t}return this}scale(t){if(t!==1){const e=this.times;for(let i=0,s=e.length;i!==s;++i)e[i]*=t}return this}trim(t,e){const i=this.times,s=i.length;let o=0,c=s-1;for(;o!==s&&i[o]<t;)++o;for(;c!==-1&&i[c]>e;)--c;if(++c,o!==0||c!==s){o>=c&&(c=Math.max(c,1),o=c-1);const u=this.getValueSize();this.times=i.slice(o,c),this.values=this.values.slice(o*u,c*u)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const i=this.times,s=this.values,o=i.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let c=null;for(let u=0;u!==o;u++){const d=i[u];if(typeof d=="number"&&isNaN(d)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,u,d),t=!1;break}if(c!==null&&c>d){console.error("THREE.KeyframeTrack: Out of order keys.",this,u,d,c),t=!1;break}c=d}if(s!==void 0&&Bx(s))for(let u=0,d=s.length;u!==d;++u){const f=s[u];if(isNaN(f)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,f),t=!1;break}}return t}optimize(){const t=this.times.slice(),e=this.values.slice(),i=this.getValueSize(),s=this.getInterpolation()===Gu,o=t.length-1;let c=1;for(let u=1;u<o;++u){let d=!1;const f=t[u],m=t[u+1];if(f!==m&&(u!==1||f!==t[0]))if(s)d=!0;else{const y=u*i,v=y-i,x=y+i;for(let k=0;k!==i;++k){const S=e[y+k];if(S!==e[v+k]||S!==e[x+k]){d=!0;break}}}if(d){if(u!==c){t[c]=t[u];const y=u*i,v=c*i;for(let x=0;x!==i;++x)e[v+x]=e[y+x]}++c}}if(o>0){t[c]=t[o];for(let u=o*i,d=c*i,f=0;f!==i;++f)e[d+f]=e[u+f];++c}return c!==t.length?(this.times=t.slice(0,c),this.values=e.slice(0,c*i)):(this.times=t,this.values=e),this}clone(){const t=this.times.slice(),e=this.values.slice(),i=this.constructor,s=new i(this.name,t,e);return s.createInterpolant=this.createInterpolant,s}}On.prototype.TimeBufferType=Float32Array;On.prototype.ValueBufferType=Float32Array;On.prototype.DefaultInterpolation=Fl;class gs extends On{}gs.prototype.ValueTypeName="bool";gs.prototype.ValueBufferType=Array;gs.prototype.DefaultInterpolation=Nl;gs.prototype.InterpolantFactoryMethodLinear=void 0;gs.prototype.InterpolantFactoryMethodSmooth=void 0;class Vy extends On{}Vy.prototype.ValueTypeName="color";class Ro extends On{}Ro.prototype.ValueTypeName="number";class Wx extends Wl{constructor(t,e,i,s){super(t,e,i,s)}interpolate_(t,e,i,s){const o=this.resultBuffer,c=this.sampleValues,u=this.valueSize,d=(i-e)/(s-e);let f=t*u;for(let m=f+u;f!==m;f+=4)Ie.slerpFlat(o,0,c,f-u,c,f,d);return o}}class Vi extends On{InterpolantFactoryMethodLinear(t){return new Wx(this.times,this.values,this.getValueSize(),t)}}Vi.prototype.ValueTypeName="quaternion";Vi.prototype.DefaultInterpolation=Fl;Vi.prototype.InterpolantFactoryMethodSmooth=void 0;class vs extends On{}vs.prototype.ValueTypeName="string";vs.prototype.ValueBufferType=Array;vs.prototype.DefaultInterpolation=Nl;vs.prototype.InterpolantFactoryMethodLinear=void 0;vs.prototype.InterpolantFactoryMethodSmooth=void 0;class yr extends On{}yr.prototype.ValueTypeName="vector";class Bh{constructor(t="",e=-1,i=[],s=kv){this.name=t,this.tracks=i,this.duration=e,this.blendMode=s,this.uuid=ji(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],i=t.tracks,s=1/(t.fps||1);for(let c=0,u=i.length;c!==u;++c)e.push(qx(i[c]).scale(s));const o=new this(t.name,t.duration,e,t.blendMode);return o.uuid=t.uuid,o}static toJSON(t){const e=[],i=t.tracks,s={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let o=0,c=i.length;o!==c;++o)e.push(On.toJSON(i[o]));return s}static CreateFromMorphTargetSequence(t,e,i,s){const o=e.length,c=[];for(let u=0;u<o;u++){let d=[],f=[];d.push((u+o-1)%o,u,(u+1)%o),f.push(0,1,0);const m=Vx(d);d=jm(d,1,m),f=jm(f,1,m),!s&&d[0]===0&&(d.push(o),f.push(f[0])),c.push(new Ro(".morphTargetInfluences["+e[u].name+"]",d,f).scale(1/i))}return new this(t,-1,c)}static findByName(t,e){let i=t;if(!Array.isArray(t)){const s=t;i=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<i.length;s++)if(i[s].name===e)return i[s];return null}static CreateClipsFromMorphTargetSequences(t,e,i){const s={},o=/^([\w-]*?)([\d]+)$/;for(let u=0,d=t.length;u<d;u++){const f=t[u],m=f.name.match(o);if(m&&m.length>1){const y=m[1];let v=s[y];v||(s[y]=v=[]),v.push(f)}}const c=[];for(const u in s)c.push(this.CreateFromMorphTargetSequence(u,s[u],e,i));return c}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(y,v,x,k,S){if(x.length!==0){const _=[],z=[];By(x,_,z,k),_.length!==0&&S.push(new y(v,_,z))}},s=[],o=t.name||"default",c=t.fps||30,u=t.blendMode;let d=t.length||-1;const f=t.hierarchy||[];for(let y=0;y<f.length;y++){const v=f[y].keys;if(!(!v||v.length===0))if(v[0].morphTargets){const x={};let k;for(k=0;k<v.length;k++)if(v[k].morphTargets)for(let S=0;S<v[k].morphTargets.length;S++)x[v[k].morphTargets[S]]=-1;for(const S in x){const _=[],z=[];for(let H=0;H!==v[k].morphTargets.length;++H){const F=v[k];_.push(F.time),z.push(F.morphTarget===S?1:0)}s.push(new Ro(".morphTargetInfluence["+S+"]",_,z))}d=x.length*c}else{const x=".bones["+e[y].name+"]";i(yr,x+".position",v,"pos",s),i(Vi,x+".quaternion",v,"rot",s),i(yr,x+".scale",v,"scl",s)}}return s.length===0?null:new this(o,d,s,u)}resetDuration(){const t=this.tracks;let e=0;for(let i=0,s=t.length;i!==s;++i){const o=this.tracks[i];e=Math.max(e,o.times[o.times.length-1])}return this.duration=e,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Gx(l){switch(l.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ro;case"vector":case"vector2":case"vector3":case"vector4":return yr;case"color":return Vy;case"quaternion":return Vi;case"bool":case"boolean":return gs;case"string":return vs}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+l)}function qx(l){if(l.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=Gx(l.type);if(l.times===void 0){const e=[],i=[];By(l.keys,e,i,"value"),l.times=e,l.values=i}return t.parse!==void 0?t.parse(l):new t(l.name,l.times,l.values,l.interpolation)}const Bl={enabled:!1,files:{},add:function(l,t){this.enabled!==!1&&(this.files[l]=t)},get:function(l){if(this.enabled!==!1)return this.files[l]},remove:function(l){delete this.files[l]},clear:function(){this.files={}}};class Kx{constructor(t,e,i){const s=this;let o=!1,c=0,u=0,d;const f=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(m){u++,o===!1&&s.onStart!==void 0&&s.onStart(m,c,u),o=!0},this.itemEnd=function(m){c++,s.onProgress!==void 0&&s.onProgress(m,c,u),c===u&&(o=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(m){s.onError!==void 0&&s.onError(m)},this.resolveURL=function(m){return d?d(m):m},this.setURLModifier=function(m){return d=m,this},this.addHandler=function(m,y){return f.push(m,y),this},this.removeHandler=function(m){const y=f.indexOf(m);return y!==-1&&f.splice(y,2),this},this.getHandler=function(m){for(let y=0,v=f.length;y<v;y+=2){const x=f[y],k=f[y+1];if(x.global&&(x.lastIndex=0),x.test(m))return k}return null}}}const Xx=new Kx;class In{constructor(t){this.manager=t!==void 0?t:Xx,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const i=this;return new Promise(function(s,o){i.load(t,s,e,o)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}In.DEFAULT_MATERIAL_NAME="__DEFAULT";const ni={};class Zx extends Error{constructor(t,e){super(t),this.response=e}}class Jh extends In{constructor(t){super(t)}load(t,e,i,s){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const o=Bl.get(t);if(o!==void 0)return this.manager.itemStart(t),setTimeout(()=>{e&&e(o),this.manager.itemEnd(t)},0),o;if(ni[t]!==void 0){ni[t].push({onLoad:e,onProgress:i,onError:s});return}ni[t]=[],ni[t].push({onLoad:e,onProgress:i,onError:s});const c=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),u=this.mimeType,d=this.responseType;fetch(c).then(f=>{if(f.status===200||f.status===0){if(f.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||f.body===void 0||f.body.getReader===void 0)return f;const m=ni[t],y=f.body.getReader(),v=f.headers.get("X-File-Size")||f.headers.get("Content-Length"),x=v?parseInt(v):0,k=x!==0;let S=0;const _=new ReadableStream({start(z){H();function H(){y.read().then(({done:F,value:I})=>{if(F)z.close();else{S+=I.byteLength;const O=new ProgressEvent("progress",{lengthComputable:k,loaded:S,total:x});for(let q=0,G=m.length;q<G;q++){const Y=m[q];Y.onProgress&&Y.onProgress(O)}z.enqueue(I),H()}})}}});return new Response(_)}else throw new Zx(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`,f)}).then(f=>{switch(d){case"arraybuffer":return f.arrayBuffer();case"blob":return f.blob();case"document":return f.text().then(m=>new DOMParser().parseFromString(m,u));case"json":return f.json();default:if(u===void 0)return f.text();{const y=/charset="?([^;"\s]*)"?/i.exec(u),v=y&&y[1]?y[1].toLowerCase():void 0,x=new TextDecoder(v);return f.arrayBuffer().then(k=>x.decode(k))}}}).then(f=>{Bl.add(t,f);const m=ni[t];delete ni[t];for(let y=0,v=m.length;y<v;y++){const x=m[y];x.onLoad&&x.onLoad(f)}}).catch(f=>{const m=ni[t];if(m===void 0)throw this.manager.itemError(t),f;delete ni[t];for(let y=0,v=m.length;y<v;y++){const x=m[y];x.onError&&x.onError(f)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class Yx extends In{constructor(t){super(t)}load(t,e,i,s){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const o=this,c=Bl.get(t);if(c!==void 0)return o.manager.itemStart(t),setTimeout(function(){e&&e(c),o.manager.itemEnd(t)},0),c;const u=Ih("img");function d(){m(),Bl.add(t,this),e&&e(this),o.manager.itemEnd(t)}function f(y){m(),s&&s(y),o.manager.itemError(t),o.manager.itemEnd(t)}function m(){u.removeEventListener("load",d,!1),u.removeEventListener("error",f,!1)}return u.addEventListener("load",d,!1),u.addEventListener("error",f,!1),t.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(u.crossOrigin=this.crossOrigin),o.manager.itemStart(t),u.src=t,u}}class Jx extends In{constructor(t){super(t)}load(t,e,i,s){const o=this,c=new Fy,u=new Jh(this.manager);return u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setPath(this.path),u.setWithCredentials(o.withCredentials),u.load(t,function(d){let f;try{f=o.parse(d)}catch(m){if(s!==void 0)s(m);else{console.error(m);return}}f.image!==void 0?c.image=f.image:f.data!==void 0&&(c.image.width=f.width,c.image.height=f.height,c.image.data=f.data),c.wrapS=f.wrapS!==void 0?f.wrapS:Ln,c.wrapT=f.wrapT!==void 0?f.wrapT:Ln,c.magFilter=f.magFilter!==void 0?f.magFilter:go,c.minFilter=f.minFilter!==void 0?f.minFilter:go,c.anisotropy=f.anisotropy!==void 0?f.anisotropy:1,f.colorSpace!==void 0&&(c.colorSpace=f.colorSpace),f.flipY!==void 0&&(c.flipY=f.flipY),f.format!==void 0&&(c.format=f.format),f.type!==void 0&&(c.type=f.type),f.mipmaps!==void 0&&(c.mipmaps=f.mipmaps,c.minFilter=Gh),f.mipmapCount===1&&(c.minFilter=go),f.generateMipmaps!==void 0&&(c.generateMipmaps=f.generateMipmaps),c.needsUpdate=!0,e&&e(c,f)},i,s),c}}class jy extends In{constructor(t){super(t)}load(t,e,i,s){const o=new Je,c=new Yx(this.manager);return c.setCrossOrigin(this.crossOrigin),c.setPath(this.path),c.load(t,function(u){o.image=u,o.needsUpdate=!0,e!==void 0&&e(o)},i,s),o}}class Gl extends te{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new oe(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),e}}const fh=new Mt,Hm=new L,Um=new L;class Qh{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Qt(512,512),this.map=null,this.mapPass=null,this.matrix=new Mt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new cx,this._frameExtents=new Qt(1,1),this._viewportCount=1,this._viewports=[new ge(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,i=this.matrix;Hm.setFromMatrixPosition(t.matrixWorld),e.position.copy(Hm),Um.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(Um),e.updateMatrixWorld(),fh.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(fh),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(fh)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const t={};return this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class Qx extends Qh{constructor(){super(new Bi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const e=this.camera,i=bo*2*t.angle*this.focus,s=this.mapSize.width/this.mapSize.height,o=t.distance||e.far;(i!==e.fov||s!==e.aspect||o!==e.far)&&(e.fov=i,e.aspect=s,e.far=o,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class Hy extends Gl{constructor(t,e,i=0,s=Math.PI/3,o=0,c=2){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(te.DEFAULT_UP),this.updateMatrix(),this.target=new te,this.distance=i,this.angle=s,this.penumbra=o,this.decay=c,this.map=null,this.shadow=new Qx}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const Wm=new Mt,yo=new L,ph=new L;class $x extends Qh{constructor(){super(new Bi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Qt(4,2),this._viewportCount=6,this._viewports=[new ge(2,1,1,1),new ge(0,1,1,1),new ge(3,1,1,1),new ge(1,1,1,1),new ge(3,0,1,1),new ge(1,0,1,1)],this._cubeDirections=[new L(1,0,0),new L(-1,0,0),new L(0,0,1),new L(0,0,-1),new L(0,1,0),new L(0,-1,0)],this._cubeUps=[new L(0,1,0),new L(0,1,0),new L(0,1,0),new L(0,1,0),new L(0,0,1),new L(0,0,-1)]}updateMatrices(t,e=0){const i=this.camera,s=this.matrix,o=t.distance||i.far;o!==i.far&&(i.far=o,i.updateProjectionMatrix()),yo.setFromMatrixPosition(t.matrixWorld),i.position.copy(yo),ph.copy(i.position),ph.add(this._cubeDirections[e]),i.up.copy(this._cubeUps[e]),i.lookAt(ph),i.updateMatrixWorld(),s.makeTranslation(-yo.x,-yo.y,-yo.z),Wm.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Wm)}}class Vh extends Gl{constructor(t,e,i=0,s=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=s,this.shadow=new $x}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class t1 extends Qh{constructor(){super(new Zh(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Uy extends Gl{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(te.DEFAULT_UP),this.updateMatrix(),this.target=new te,this.shadow=new t1}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class Wy extends Gl{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}class Gy{static decodeText(t){if(typeof TextDecoder<"u")return new TextDecoder().decode(t);let e="";for(let i=0,s=t.length;i<s;i++)e+=String.fromCharCode(t[i]);try{return decodeURIComponent(escape(e))}catch{return e}}static extractUrlBase(t){const e=t.lastIndexOf("/");return e===-1?"./":t.slice(0,e+1)}static resolveURL(t,e){return typeof t!="string"||t===""?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}const $h="\\[\\]\\.:\\/",e1=new RegExp("["+$h+"]","g"),td="[^"+$h+"]",n1="[^"+$h.replace("\\.","")+"]",i1=/((?:WC+[\/:])*)/.source.replace("WC",td),r1=/(WCOD+)?/.source.replace("WCOD",n1),s1=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",td),o1=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",td),a1=new RegExp("^"+i1+r1+s1+o1+"$"),l1=["material","materials","bones","map"];class c1{constructor(t,e,i){const s=i||Gt.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,s)}getValue(t,e){this.bind();const i=this._targetGroup.nCachedObjects_,s=this._bindings[i];s!==void 0&&s.getValue(t,e)}setValue(t,e){const i=this._bindings;for(let s=this._targetGroup.nCachedObjects_,o=i.length;s!==o;++s)i[s].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}}class Gt{constructor(t,e,i){this.path=e,this.parsedPath=i||Gt.parseTrackName(e),this.node=Gt.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,i){return t&&t.isAnimationObjectGroup?new Gt.Composite(t,e,i):new Gt(t,e,i)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(e1,"")}static parseTrackName(t){const e=a1.exec(t);if(e===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const i={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},s=i.nodeName&&i.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const o=i.nodeName.substring(s+1);l1.indexOf(o)!==-1&&(i.nodeName=i.nodeName.substring(0,s),i.objectName=o)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return i}static findNode(t,e){if(e===void 0||e===""||e==="."||e===-1||e===t.name||e===t.uuid)return t;if(t.skeleton){const i=t.skeleton.getBoneByName(e);if(i!==void 0)return i}if(t.children){const i=function(o){for(let c=0;c<o.length;c++){const u=o[c];if(u.name===e||u.uuid===e)return u;const d=i(u.children);if(d)return d}return null},s=i(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)t[e++]=i[s]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,i=e.objectName,s=e.propertyName;let o=e.propertyIndex;if(t||(t=Gt.findNode(this.rootNode,e.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let f=e.objectIndex;switch(i){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let m=0;m<t.length;m++)if(t[m].name===f){f=m;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[i]}if(f!==void 0){if(t[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[f]}}const c=t[s];if(c===void 0){const f=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+s+" but it wasn't found.",t);return}let u=this.Versioning.None;this.targetObject=t,t.needsUpdate!==void 0?u=this.Versioning.NeedsUpdate:t.matrixWorldNeedsUpdate!==void 0&&(u=this.Versioning.MatrixWorldNeedsUpdate);let d=this.BindingType.Direct;if(o!==void 0){if(s==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[o]!==void 0&&(o=t.morphTargetDictionary[o])}d=this.BindingType.ArrayElement,this.resolvedProperty=c,this.propertyIndex=o}else c.fromArray!==void 0&&c.toArray!==void 0?(d=this.BindingType.HasFromToArray,this.resolvedProperty=c):Array.isArray(c)?(d=this.BindingType.EntireArray,this.resolvedProperty=c):this.propertyName=s;this.getValue=this.GetterByBindingType[d],this.setValue=this.SetterByBindingTypeAndVersioning[d][u]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Gt.Composite=c1;Gt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Gt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Gt.prototype.GetterByBindingType=[Gt.prototype._getValue_direct,Gt.prototype._getValue_array,Gt.prototype._getValue_arrayElement,Gt.prototype._getValue_toArray];Gt.prototype.SetterByBindingTypeAndVersioning=[[Gt.prototype._setValue_direct,Gt.prototype._setValue_direct_setNeedsUpdate,Gt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Gt.prototype._setValue_array,Gt.prototype._setValue_array_setNeedsUpdate,Gt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Gt.prototype._setValue_arrayElement,Gt.prototype._setValue_arrayElement_setNeedsUpdate,Gt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Gt.prototype._setValue_fromArray,Gt.prototype._setValue_fromArray_setNeedsUpdate,Gt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:ky}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=ky);class Gm extends Jx{constructor(t){super(t)}parse(t){function e(nt){switch(nt.image_type){case v:case S:if(nt.colormap_length>256||nt.colormap_size!==24||nt.colormap_type!==1)throw new Error("THREE.TGALoader: Invalid type colormap data for indexed type.");break;case x:case k:case _:case z:if(nt.colormap_type)throw new Error("THREE.TGALoader: Invalid type colormap data for colormap type.");break;case y:throw new Error("THREE.TGALoader: No data.");default:throw new Error("THREE.TGALoader: Invalid type "+nt.image_type)}if(nt.width<=0||nt.height<=0)throw new Error("THREE.TGALoader: Invalid image size.");if(nt.pixel_size!==8&&nt.pixel_size!==16&&nt.pixel_size!==24&&nt.pixel_size!==32)throw new Error("THREE.TGALoader: Invalid pixel size "+nt.pixel_size)}function i(nt,wt,K,Z,X){let R,U;const rt=K.pixel_size>>3,ot=K.width*K.height*rt;if(wt&&(U=X.subarray(Z,Z+=K.colormap_length*(K.colormap_size>>3))),nt){R=new Uint8Array(ot);let st,Q,ut,At=0;const Lt=new Uint8Array(rt);for(;At<ot;)if(st=X[Z++],Q=(st&127)+1,st&128){for(ut=0;ut<rt;++ut)Lt[ut]=X[Z++];for(ut=0;ut<Q;++ut)R.set(Lt,At+ut*rt);At+=rt*Q}else{for(Q*=rt,ut=0;ut<Q;++ut)R[At+ut]=X[Z++];At+=Q}}else R=X.subarray(Z,Z+=wt?K.width*K.height:ot);return{pixel_data:R,palettes:U}}function s(nt,wt,K,Z,X,R,U,rt,ot){const st=ot;let Q,ut=0,At,Lt;const re=pt.width;for(Lt=wt;Lt!==Z;Lt+=K)for(At=X;At!==U;At+=R,ut++)Q=rt[ut],nt[(At+re*Lt)*4+3]=255,nt[(At+re*Lt)*4+2]=st[Q*3+0],nt[(At+re*Lt)*4+1]=st[Q*3+1],nt[(At+re*Lt)*4+0]=st[Q*3+2];return nt}function o(nt,wt,K,Z,X,R,U,rt){let ot,st=0,Q,ut;const At=pt.width;for(ut=wt;ut!==Z;ut+=K)for(Q=X;Q!==U;Q+=R,st+=2)ot=rt[st+0]+(rt[st+1]<<8),nt[(Q+At*ut)*4+0]=(ot&31744)>>7,nt[(Q+At*ut)*4+1]=(ot&992)>>2,nt[(Q+At*ut)*4+2]=(ot&31)<<3,nt[(Q+At*ut)*4+3]=ot&32768?0:255;return nt}function c(nt,wt,K,Z,X,R,U,rt){let ot=0,st,Q;const ut=pt.width;for(Q=wt;Q!==Z;Q+=K)for(st=X;st!==U;st+=R,ot+=3)nt[(st+ut*Q)*4+3]=255,nt[(st+ut*Q)*4+2]=rt[ot+0],nt[(st+ut*Q)*4+1]=rt[ot+1],nt[(st+ut*Q)*4+0]=rt[ot+2];return nt}function u(nt,wt,K,Z,X,R,U,rt){let ot=0,st,Q;const ut=pt.width;for(Q=wt;Q!==Z;Q+=K)for(st=X;st!==U;st+=R,ot+=4)nt[(st+ut*Q)*4+2]=rt[ot+0],nt[(st+ut*Q)*4+1]=rt[ot+1],nt[(st+ut*Q)*4+0]=rt[ot+2],nt[(st+ut*Q)*4+3]=rt[ot+3];return nt}function d(nt,wt,K,Z,X,R,U,rt){let ot,st=0,Q,ut;const At=pt.width;for(ut=wt;ut!==Z;ut+=K)for(Q=X;Q!==U;Q+=R,st++)ot=rt[st],nt[(Q+At*ut)*4+0]=ot,nt[(Q+At*ut)*4+1]=ot,nt[(Q+At*ut)*4+2]=ot,nt[(Q+At*ut)*4+3]=255;return nt}function f(nt,wt,K,Z,X,R,U,rt){let ot=0,st,Q;const ut=pt.width;for(Q=wt;Q!==Z;Q+=K)for(st=X;st!==U;st+=R,ot+=2)nt[(st+ut*Q)*4+0]=rt[ot+0],nt[(st+ut*Q)*4+1]=rt[ot+0],nt[(st+ut*Q)*4+2]=rt[ot+0],nt[(st+ut*Q)*4+3]=rt[ot+1];return nt}function m(nt,wt,K,Z,X){let R,U,rt,ot,st,Q;switch((pt.flags&H)>>F){default:case q:R=0,rt=1,st=wt,U=0,ot=1,Q=K;break;case I:R=0,rt=1,st=wt,U=K-1,ot=-1,Q=-1;break;case G:R=wt-1,rt=-1,st=-1,U=0,ot=1,Q=K;break;case O:R=wt-1,rt=-1,st=-1,U=K-1,ot=-1,Q=-1;break}if(Tt)switch(pt.pixel_size){case 8:d(nt,U,ot,Q,R,rt,st,Z);break;case 16:f(nt,U,ot,Q,R,rt,st,Z);break;default:throw new Error("THREE.TGALoader: Format not supported.")}else switch(pt.pixel_size){case 8:s(nt,U,ot,Q,R,rt,st,Z,X);break;case 16:o(nt,U,ot,Q,R,rt,st,Z);break;case 24:c(nt,U,ot,Q,R,rt,st,Z);break;case 32:u(nt,U,ot,Q,R,rt,st,Z);break;default:throw new Error("THREE.TGALoader: Format not supported.")}return nt}const y=0,v=1,x=2,k=3,S=9,_=10,z=11,H=48,F=4,I=0,O=1,q=2,G=3;if(t.length<19)throw new Error("THREE.TGALoader: Not enough data to contain header.");let Y=0;const ct=new Uint8Array(t),pt={id_length:ct[Y++],colormap_type:ct[Y++],image_type:ct[Y++],colormap_index:ct[Y++]|ct[Y++]<<8,colormap_length:ct[Y++]|ct[Y++]<<8,colormap_size:ct[Y++],origin:[ct[Y++]|ct[Y++]<<8,ct[Y++]|ct[Y++]<<8],width:ct[Y++]|ct[Y++]<<8,height:ct[Y++]|ct[Y++]<<8,pixel_size:ct[Y++],flags:ct[Y++]};if(e(pt),pt.id_length+Y>t.length)throw new Error("THREE.TGALoader: No data.");Y+=pt.id_length;let et=!1,ht=!1,Tt=!1;switch(pt.image_type){case S:et=!0,ht=!0;break;case v:ht=!0;break;case _:et=!0;break;case x:break;case z:et=!0,Tt=!0;break;case k:Tt=!0;break}const Ft=new Uint8Array(pt.width*pt.height*4),St=i(et,ht,pt,Y,ct);return m(Ft,pt.width,pt.height,St.pixel_data,St.palettes),{data:Ft,width:pt.width,height:pt.height,flipY:!0,generateMipmaps:!0,minFilter:Gh}}}class u1 extends In{load(t,e,i,s){const o=this,c=o.path===""?Gy.extractUrlBase(t):o.path,u=new Jh(o.manager);u.setPath(o.path),u.setRequestHeader(o.requestHeader),u.setWithCredentials(o.withCredentials),u.load(t,function(d){try{e(o.parse(d,c))}catch(f){s?s(f):console.error(f),o.manager.itemError(t)}},i,s)}parse(t,e){function i(E,w){const A=[],b=E.childNodes;for(let T=0,V=b.length;T<V;T++){const W=b[T];W.nodeName===w&&A.push(W)}return A}function s(E){if(E.length===0)return[];const w=E.trim().split(/\s+/),A=new Array(w.length);for(let b=0,T=w.length;b<T;b++)A[b]=w[b];return A}function o(E){if(E.length===0)return[];const w=E.trim().split(/\s+/),A=new Array(w.length);for(let b=0,T=w.length;b<T;b++)A[b]=parseFloat(w[b]);return A}function c(E){if(E.length===0)return[];const w=E.trim().split(/\s+/),A=new Array(w.length);for(let b=0,T=w.length;b<T;b++)A[b]=parseInt(w[b]);return A}function u(E){return E.substring(1)}function d(){return"three_default_"+ta++}function f(E){return Object.keys(E).length===0}function m(E){return{unit:y(i(E,"unit")[0]),upAxis:v(i(E,"up_axis")[0])}}function y(E){return E!==void 0&&E.hasAttribute("meter")===!0?parseFloat(E.getAttribute("meter")):1}function v(E){return E!==void 0?E.textContent:"Y_UP"}function x(E,w,A,b){const T=i(E,w)[0];if(T!==void 0){const V=i(T,A);for(let W=0;W<V.length;W++)b(V[W])}}function k(E,w){for(const A in E){const b=E[A];b.build=w(E[A])}}function S(E,w){return E.build!==void 0||(E.build=w(E)),E.build}function _(E){const w={sources:{},samplers:{},channels:{}};let A=!1;for(let b=0,T=E.childNodes.length;b<T;b++){const V=E.childNodes[b];if(V.nodeType!==1)continue;let W;switch(V.nodeName){case"source":W=V.getAttribute("id"),w.sources[W]=Rn(V);break;case"sampler":W=V.getAttribute("id"),w.samplers[W]=z(V);break;case"channel":W=V.getAttribute("target"),w.channels[W]=H(V);break;case"animation":_(V),A=!0;break;default:console.log(V)}}A===!1&&(Rt.animations[E.getAttribute("id")||ye.generateUUID()]=w)}function z(E){const w={inputs:{}};for(let A=0,b=E.childNodes.length;A<b;A++){const T=E.childNodes[A];if(T.nodeType===1)switch(T.nodeName){case"input":const V=u(T.getAttribute("source")),W=T.getAttribute("semantic");w.inputs[W]=V;break}}return w}function H(E){const w={};let b=E.getAttribute("target").split("/");const T=b.shift();let V=b.shift();const W=V.indexOf("(")!==-1,ft=V.indexOf(".")!==-1;if(ft)b=V.split("."),V=b.shift(),w.member=b.shift();else if(W){const lt=V.split("(");V=lt.shift();for(let dt=0;dt<lt.length;dt++)lt[dt]=parseInt(lt[dt].replace(/\)/,""));w.indices=lt}return w.id=T,w.sid=V,w.arraySyntax=W,w.memberSyntax=ft,w.sampler=u(E.getAttribute("source")),w}function F(E){const w=[],A=E.channels,b=E.samplers,T=E.sources;for(const V in A)if(A.hasOwnProperty(V)){const W=A[V],ft=b[W.sampler],lt=ft.inputs.INPUT,dt=ft.inputs.OUTPUT,gt=T[lt],tt=T[dt],Et=O(W,gt,tt);pt(Et,w)}return w}function I(E){return S(Rt.animations[E],F)}function O(E,w,A){const b=Rt.nodes[E.id],T=ci(b.id),V=b.transforms[E.sid],W=b.matrix.clone().transpose();let ft,lt,dt,gt,tt,Et;const yt={};switch(V){case"matrix":for(dt=0,gt=w.array.length;dt<gt;dt++)if(ft=w.array[dt],lt=dt*A.stride,yt[ft]===void 0&&(yt[ft]={}),E.arraySyntax===!0){const qt=A.array[lt],Ut=E.indices[0]+4*E.indices[1];yt[ft][Ut]=qt}else for(tt=0,Et=A.stride;tt<Et;tt++)yt[ft][tt]=A.array[lt+tt];break;case"translate":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',V);break;case"rotate":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',V);break;case"scale":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',V);break}const Ct=q(yt,W);return{name:T.uuid,keyframes:Ct}}function q(E,w){const A=[];for(const T in E)A.push({time:parseFloat(T),value:E[T]});A.sort(b);for(let T=0;T<16;T++)et(A,T,w.elements[T]);return A;function b(T,V){return T.time-V.time}}const G=new L,Y=new L,ct=new Ie;function pt(E,w){const A=E.keyframes,b=E.name,T=[],V=[],W=[],ft=[];for(let lt=0,dt=A.length;lt<dt;lt++){const gt=A[lt],tt=gt.time,Et=gt.value;Oe.fromArray(Et).transpose(),Oe.decompose(G,ct,Y),T.push(tt),V.push(G.x,G.y,G.z),W.push(ct.x,ct.y,ct.z,ct.w),ft.push(Y.x,Y.y,Y.z)}return V.length>0&&w.push(new yr(b+".position",T,V)),W.length>0&&w.push(new Vi(b+".quaternion",T,W)),ft.length>0&&w.push(new yr(b+".scale",T,ft)),w}function et(E,w,A){let b,T=!0,V,W;for(V=0,W=E.length;V<W;V++)b=E[V],b.value[w]===void 0?b.value[w]=null:T=!1;if(T===!0)for(V=0,W=E.length;V<W;V++)b=E[V],b.value[w]=A;else ht(E,w)}function ht(E,w){let A,b;for(let T=0,V=E.length;T<V;T++){const W=E[T];if(W.value[w]===null){if(A=Tt(E,T,w),b=Ft(E,T,w),A===null){W.value[w]=b.value[w];continue}if(b===null){W.value[w]=A.value[w];continue}St(W,A,b,w)}}}function Tt(E,w,A){for(;w>=0;){const b=E[w];if(b.value[A]!==null)return b;w--}return null}function Ft(E,w,A){for(;w<E.length;){const b=E[w];if(b.value[A]!==null)return b;w++}return null}function St(E,w,A,b){if(A.time-w.time===0){E.value[b]=w.value[b];return}E.value[b]=(E.time-w.time)*(A.value[b]-w.value[b])/(A.time-w.time)+w.value[b]}function nt(E){const w={name:E.getAttribute("id")||"default",start:parseFloat(E.getAttribute("start")||0),end:parseFloat(E.getAttribute("end")||0),animations:[]};for(let A=0,b=E.childNodes.length;A<b;A++){const T=E.childNodes[A];if(T.nodeType===1)switch(T.nodeName){case"instance_animation":w.animations.push(u(T.getAttribute("url")));break}}Rt.clips[E.getAttribute("id")]=w}function wt(E){const w=[],A=E.name,b=E.end-E.start||-1,T=E.animations;for(let V=0,W=T.length;V<W;V++){const ft=I(T[V]);for(let lt=0,dt=ft.length;lt<dt;lt++)w.push(ft[lt])}return new Bh(A,b,w)}function K(E){return S(Rt.clips[E],wt)}function Z(E){const w={};for(let A=0,b=E.childNodes.length;A<b;A++){const T=E.childNodes[A];if(T.nodeType===1)switch(T.nodeName){case"skin":w.id=u(T.getAttribute("source")),w.skin=X(T);break;case"morph":w.id=u(T.getAttribute("source")),console.warn("THREE.ColladaLoader: Morph target animation not supported yet.");break}}Rt.controllers[E.getAttribute("id")]=w}function X(E){const w={sources:{}};for(let A=0,b=E.childNodes.length;A<b;A++){const T=E.childNodes[A];if(T.nodeType===1)switch(T.nodeName){case"bind_shape_matrix":w.bindShapeMatrix=o(T.textContent);break;case"source":const V=T.getAttribute("id");w.sources[V]=Rn(T);break;case"joints":w.joints=R(T);break;case"vertex_weights":w.vertexWeights=U(T);break}}return w}function R(E){const w={inputs:{}};for(let A=0,b=E.childNodes.length;A<b;A++){const T=E.childNodes[A];if(T.nodeType===1)switch(T.nodeName){case"input":const V=T.getAttribute("semantic"),W=u(T.getAttribute("source"));w.inputs[V]=W;break}}return w}function U(E){const w={inputs:{}};for(let A=0,b=E.childNodes.length;A<b;A++){const T=E.childNodes[A];if(T.nodeType===1)switch(T.nodeName){case"input":const V=T.getAttribute("semantic"),W=u(T.getAttribute("source")),ft=parseInt(T.getAttribute("offset"));w.inputs[V]={id:W,offset:ft};break;case"vcount":w.vcount=c(T.textContent);break;case"v":w.v=c(T.textContent);break}}return w}function rt(E){const w={id:E.id},A=Rt.geometries[w.id];return E.skin!==void 0&&(w.skin=ot(E.skin),A.sources.skinIndices=w.skin.indices,A.sources.skinWeights=w.skin.weights),w}function ot(E){const A={joints:[],indices:{array:[],stride:4},weights:{array:[],stride:4}},b=E.sources,T=E.vertexWeights,V=T.vcount,W=T.v,ft=T.inputs.JOINT.offset,lt=T.inputs.WEIGHT.offset,dt=E.sources[E.joints.inputs.JOINT],gt=E.sources[E.joints.inputs.INV_BIND_MATRIX],tt=b[T.inputs.WEIGHT.id].array;let Et=0,yt,Ct,_t;for(yt=0,_t=V.length;yt<_t;yt++){const Ut=V[yt],Vt=[];for(Ct=0;Ct<Ut;Ct++){const Ot=W[Et+ft],Be=W[Et+lt],ce=tt[Be];Vt.push({index:Ot,weight:ce}),Et+=2}for(Vt.sort(qt),Ct=0;Ct<4;Ct++){const Ot=Vt[Ct];Ot!==void 0?(A.indices.array.push(Ot.index),A.weights.array.push(Ot.weight)):(A.indices.array.push(0),A.weights.array.push(0))}}for(E.bindShapeMatrix?A.bindMatrix=new Mt().fromArray(E.bindShapeMatrix).transpose():A.bindMatrix=new Mt().identity(),yt=0,_t=dt.array.length;yt<_t;yt++){const Ut=dt.array[yt],Vt=new Mt().fromArray(gt.array,yt*gt.stride).transpose();A.joints.push({name:Ut,boneInverse:Vt})}return A;function qt(Ut,Vt){return Vt.weight-Ut.weight}}function st(E){return S(Rt.controllers[E],rt)}function Q(E){const w={init_from:i(E,"init_from")[0].textContent};Rt.images[E.getAttribute("id")]=w}function ut(E){return E.build!==void 0?E.build:E.init_from}function At(E){const w=Rt.images[E];return w!==void 0?S(w,ut):(console.warn("THREE.ColladaLoader: Couldn't find image with ID:",E),null)}function Lt(E){const w={};for(let A=0,b=E.childNodes.length;A<b;A++){const T=E.childNodes[A];if(T.nodeType===1)switch(T.nodeName){case"profile_COMMON":w.profile=re(T);break}}Rt.effects[E.getAttribute("id")]=w}function re(E){const w={surfaces:{},samplers:{}};for(let A=0,b=E.childNodes.length;A<b;A++){const T=E.childNodes[A];if(T.nodeType===1)switch(T.nodeName){case"newparam":Bn(T,w);break;case"technique":w.technique=xs(T);break;case"extra":w.extra=si(T);break}}return w}function Bn(E,w){const A=E.getAttribute("sid");for(let b=0,T=E.childNodes.length;b<T;b++){const V=E.childNodes[b];if(V.nodeType===1)switch(V.nodeName){case"surface":w.surfaces[A]=Hi(V);break;case"sampler2D":w.samplers[A]=Vn(V);break}}}function Hi(E){const w={};for(let A=0,b=E.childNodes.length;A<b;A++){const T=E.childNodes[A];if(T.nodeType===1)switch(T.nodeName){case"init_from":w.init_from=T.textContent;break}}return w}function Vn(E){const w={};for(let A=0,b=E.childNodes.length;A<b;A++){const T=E.childNodes[A];if(T.nodeType===1)switch(T.nodeName){case"source":w.source=T.textContent;break}}return w}function xs(E){const w={};for(let A=0,b=E.childNodes.length;A<b;A++){const T=E.childNodes[A];if(T.nodeType===1)switch(T.nodeName){case"constant":case"lambert":case"blinn":case"phong":w.type=T.nodeName,w.parameters=zo(T);break;case"extra":w.extra=si(T);break}}return w}function zo(E){const w={};for(let A=0,b=E.childNodes.length;A<b;A++){const T=E.childNodes[A];if(T.nodeType===1)switch(T.nodeName){case"emission":case"diffuse":case"specular":case"bump":case"ambient":case"shininess":case"transparency":w[T.nodeName]=ws(T);break;case"transparent":w[T.nodeName]={opaque:T.hasAttribute("opaque")?T.getAttribute("opaque"):"A_ONE",data:ws(T)};break}}return w}function ws(E){const w={};for(let A=0,b=E.childNodes.length;A<b;A++){const T=E.childNodes[A];if(T.nodeType===1)switch(T.nodeName){case"color":w[T.nodeName]=o(T.textContent);break;case"float":w[T.nodeName]=parseFloat(T.textContent);break;case"texture":w[T.nodeName]={id:T.getAttribute("texture"),extra:gr(T)};break}}return w}function gr(E){const w={technique:{}};for(let A=0,b=E.childNodes.length;A<b;A++){const T=E.childNodes[A];if(T.nodeType===1)switch(T.nodeName){case"extra":No(T,w);break}}return w}function No(E,w){for(let A=0,b=E.childNodes.length;A<b;A++){const T=E.childNodes[A];if(T.nodeType===1)switch(T.nodeName){case"technique":Es(T,w);break}}}function Es(E,w){for(let A=0,b=E.childNodes.length;A<b;A++){const T=E.childNodes[A];if(T.nodeType===1)switch(T.nodeName){case"repeatU":case"repeatV":case"offsetU":case"offsetV":w.technique[T.nodeName]=parseFloat(T.textContent);break;case"wrapU":case"wrapV":T.textContent.toUpperCase()==="TRUE"?w.technique[T.nodeName]=1:T.textContent.toUpperCase()==="FALSE"?w.technique[T.nodeName]=0:w.technique[T.nodeName]=parseInt(T.textContent);break;case"bump":w[T.nodeName]=vr(T);break}}}function si(E){const w={};for(let A=0,b=E.childNodes.length;A<b;A++){const T=E.childNodes[A];if(T.nodeType===1)switch(T.nodeName){case"technique":w.technique=oi(T);break}}return w}function oi(E){const w={};for(let A=0,b=E.childNodes.length;A<b;A++){const T=E.childNodes[A];if(T.nodeType===1)switch(T.nodeName){case"double_sided":w[T.nodeName]=parseInt(T.textContent);break;case"bump":w[T.nodeName]=vr(T);break}}return w}function vr(E){const w={};for(let A=0,b=E.childNodes.length;A<b;A++){const T=E.childNodes[A];if(T.nodeType===1)switch(T.nodeName){case"texture":w[T.nodeName]={id:T.getAttribute("texture"),texcoord:T.getAttribute("texcoord"),extra:gr(T)};break}}return w}function ks(E){return E}function Fo(E){return S(Rt.effects[E],ks)}function Lo(E){const w={name:E.getAttribute("name")};for(let A=0,b=E.childNodes.length;A<b;A++){const T=E.childNodes[A];if(T.nodeType===1)switch(T.nodeName){case"instance_effect":w.url=u(T.getAttribute("url"));break}}Rt.materials[E.getAttribute("id")]=w}function Io(E){let w,A=E.slice((E.lastIndexOf(".")-1>>>0)+2);switch(A=A.toLowerCase(),A){case"tga":w=Hn;break;default:w=Ar}return w}function xr(E){const w=Fo(E.url),A=w.profile.technique;let b;switch(A.type){case"phong":case"blinn":b=new Eo;break;case"lambert":b=new Oy;break;default:b=new Li;break}b.name=E.name||"";function T(lt,dt=null){const gt=w.profile.samplers[lt.id];let tt=null;if(gt!==void 0){const Et=w.profile.surfaces[gt.source];tt=At(Et.init_from)}else console.warn("THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530)."),tt=At(lt.id);if(tt!==null){const Et=Io(tt);if(Et!==void 0){const yt=Et.load(tt),Ct=lt.extra;if(Ct!==void 0&&Ct.technique!==void 0&&f(Ct.technique)===!1){const _t=Ct.technique;yt.wrapS=_t.wrapU?Di:Ln,yt.wrapT=_t.wrapV?Di:Ln,yt.offset.set(_t.offsetU||0,_t.offsetV||0),yt.repeat.set(_t.repeatU||1,_t.repeatV||1)}else yt.wrapS=Di,yt.wrapT=Di;return dt!==null&&(yt.colorSpace=dt),yt}else return console.warn("THREE.ColladaLoader: Loader for texture %s not found.",tt),null}else return console.warn("THREE.ColladaLoader: Couldn't create texture with ID:",lt.id),null}const V=A.parameters;for(const lt in V){const dt=V[lt];switch(lt){case"diffuse":dt.color&&b.color.fromArray(dt.color),dt.texture&&(b.map=T(dt.texture,We));break;case"specular":dt.color&&b.specular&&b.specular.fromArray(dt.color),dt.texture&&(b.specularMap=T(dt.texture));break;case"bump":dt.texture&&(b.normalMap=T(dt.texture));break;case"ambient":dt.texture&&(b.lightMap=T(dt.texture,We));break;case"shininess":dt.float&&b.shininess&&(b.shininess=dt.float);break;case"emission":dt.color&&b.emissive&&b.emissive.fromArray(dt.color),dt.texture&&(b.emissiveMap=T(dt.texture,We));break}}b.color.convertSRGBToLinear(),b.specular&&b.specular.convertSRGBToLinear(),b.emissive&&b.emissive.convertSRGBToLinear();let W=V.transparent,ft=V.transparency;if(ft===void 0&&W&&(ft={float:1}),W===void 0&&ft&&(W={opaque:"A_ONE",data:{color:[1,1,1,1]}}),W&&ft)if(W.data.texture)b.transparent=!0;else{const lt=W.data.color;switch(W.opaque){case"A_ONE":b.opacity=lt[3]*ft.float;break;case"RGB_ZERO":b.opacity=1-lt[0]*ft.float;break;case"A_ZERO":b.opacity=1-lt[3]*ft.float;break;case"RGB_ONE":b.opacity=lt[0]*ft.float;break;default:console.warn('THREE.ColladaLoader: Invalid opaque type "%s" of transparent tag.',W.opaque)}b.opacity<1&&(b.transparent=!0)}if(A.extra!==void 0&&A.extra.technique!==void 0){const lt=A.extra.technique;for(const dt in lt){const gt=lt[dt];switch(dt){case"double_sided":b.side=gt===1?yv:Pl;break;case"bump":b.normalMap=T(gt.texture),b.normalScale=new Qt(1,1);break}}}return b}function wr(E){return S(Rt.materials[E],xr)}function Do(E){const w={name:E.getAttribute("name")};for(let A=0,b=E.childNodes.length;A<b;A++){const T=E.childNodes[A];if(T.nodeType===1)switch(T.nodeName){case"optics":w.optics=Ui(T);break}}Rt.cameras[E.getAttribute("id")]=w}function Ui(E){for(let w=0;w<E.childNodes.length;w++){const A=E.childNodes[w];switch(A.nodeName){case"technique_common":return Wi(A)}}return{}}function Wi(E){const w={};for(let A=0;A<E.childNodes.length;A++){const b=E.childNodes[A];switch(b.nodeName){case"perspective":case"orthographic":w.technique=b.nodeName,w.parameters=ql(b);break}}return w}function ql(E){const w={};for(let A=0;A<E.childNodes.length;A++){const b=E.childNodes[A];switch(b.nodeName){case"xfov":case"yfov":case"xmag":case"ymag":case"znear":case"zfar":case"aspect_ratio":w[b.nodeName]=parseFloat(b.textContent);break}}return w}function Ms(E){let w;switch(E.optics.technique){case"perspective":w=new Bi(E.optics.parameters.yfov,E.optics.parameters.aspect_ratio,E.optics.parameters.znear,E.optics.parameters.zfar);break;case"orthographic":let A=E.optics.parameters.ymag,b=E.optics.parameters.xmag;const T=E.optics.parameters.aspect_ratio;b=b===void 0?A*T:b,A=A===void 0?b/T:A,b*=.5,A*=.5,w=new Zh(-b,b,A,-A,E.optics.parameters.znear,E.optics.parameters.zfar);break;default:w=new Bi;break}return w.name=E.name||"",w}function Oo(E){const w=Rt.cameras[E];return w!==void 0?S(w,Ms):(console.warn("THREE.ColladaLoader: Couldn't find camera with ID:",E),null)}function Kl(E){let w={};for(let A=0,b=E.childNodes.length;A<b;A++){const T=E.childNodes[A];if(T.nodeType===1)switch(T.nodeName){case"technique_common":w=bs(T);break}}Rt.lights[E.getAttribute("id")]=w}function bs(E){const w={};for(let A=0,b=E.childNodes.length;A<b;A++){const T=E.childNodes[A];if(T.nodeType===1)switch(T.nodeName){case"directional":case"point":case"spot":case"ambient":w.technique=T.nodeName,w.parameters=Ss(T)}}return w}function Ss(E){const w={};for(let A=0,b=E.childNodes.length;A<b;A++){const T=E.childNodes[A];if(T.nodeType===1)switch(T.nodeName){case"color":const V=o(T.textContent);w.color=new oe().fromArray(V).convertSRGBToLinear();break;case"falloff_angle":w.falloffAngle=parseFloat(T.textContent);break;case"quadratic_attenuation":const W=parseFloat(T.textContent);w.distance=W?Math.sqrt(1/W):0;break}}return w}function Er(E){let w;switch(E.technique){case"directional":w=new Uy;break;case"point":w=new Vh;break;case"spot":w=new Hy;break;case"ambient":w=new Wy;break}return E.parameters.color&&w.color.copy(E.parameters.color),E.parameters.distance&&(w.distance=E.parameters.distance),w}function As(E){const w=Rt.lights[E];return w!==void 0?S(w,Er):(console.warn("THREE.ColladaLoader: Couldn't find light with ID:",E),null)}function Ts(E){const w={name:E.getAttribute("name"),sources:{},vertices:{},primitives:[]},A=i(E,"mesh")[0];if(A!==void 0){for(let b=0;b<A.childNodes.length;b++){const T=A.childNodes[b];if(T.nodeType!==1)continue;const V=T.getAttribute("id");switch(T.nodeName){case"source":w.sources[V]=Rn(T);break;case"vertices":w.vertices=ai(T);break;case"polygons":console.warn("THREE.ColladaLoader: Unsupported primitive type: ",T.nodeName);break;case"lines":case"linestrips":case"polylist":case"triangles":w.primitives.push(Bo(T));break;default:console.log(T)}}Rt.geometries[E.getAttribute("id")]=w}}function Rn(E){const w={array:[],stride:3};for(let A=0;A<E.childNodes.length;A++){const b=E.childNodes[A];if(b.nodeType===1)switch(b.nodeName){case"float_array":w.array=o(b.textContent);break;case"Name_array":w.array=s(b.textContent);break;case"technique_common":const T=i(b,"accessor")[0];T!==void 0&&(w.stride=parseInt(T.getAttribute("stride")));break}}return w}function ai(E){const w={};for(let A=0;A<E.childNodes.length;A++){const b=E.childNodes[A];b.nodeType===1&&(w[b.getAttribute("semantic")]=u(b.getAttribute("source")))}return w}function Bo(E){const w={type:E.nodeName,material:E.getAttribute("material"),count:parseInt(E.getAttribute("count")),inputs:{},stride:0,hasUV:!1};for(let A=0,b=E.childNodes.length;A<b;A++){const T=E.childNodes[A];if(T.nodeType===1)switch(T.nodeName){case"input":const V=u(T.getAttribute("source")),W=T.getAttribute("semantic"),ft=parseInt(T.getAttribute("offset")),lt=parseInt(T.getAttribute("set")),dt=lt>0?W+lt:W;w.inputs[dt]={id:V,offset:ft},w.stride=Math.max(w.stride,ft+1),W==="TEXCOORD"&&(w.hasUV=!0);break;case"vcount":w.vcount=c(T.textContent);break;case"p":w.p=c(T.textContent);break}}return w}function Vo(E){const w={};for(let A=0;A<E.length;A++){const b=E[A];w[b.type]===void 0&&(w[b.type]=[]),w[b.type].push(b)}return w}function jo(E){let w=0;for(let A=0,b=E.length;A<b;A++)E[A].hasUV===!0&&w++;w>0&&w<E.length&&(E.uvsNeedsFix=!0)}function _s(E){const w={},A=E.sources,b=E.vertices,T=E.primitives;if(T.length===0)return{};const V=Vo(T);for(const W in V){const ft=V[W];jo(ft),w[W]=Ho(ft,A,b)}return w}function Ho(E,w,A){const b={},T={array:[],stride:0},V={array:[],stride:0},W={array:[],stride:0},ft={array:[],stride:0},lt={array:[],stride:0},dt={array:[],stride:4},gt={array:[],stride:4},tt=new mn,Et=[];let yt=0;for(let Ct=0;Ct<E.length;Ct++){const _t=E[Ct],qt=_t.inputs;let Ut=0;switch(_t.type){case"lines":case"linestrips":Ut=_t.count*2;break;case"triangles":Ut=_t.count*3;break;case"polylist":for(let Vt=0;Vt<_t.count;Vt++){const Ot=_t.vcount[Vt];switch(Ot){case 3:Ut+=3;break;case 4:Ut+=6;break;default:Ut+=(Ot-2)*3;break}}break;default:console.warn("THREE.ColladaLoader: Unknow primitive type:",_t.type)}tt.addGroup(yt,Ut,Ct),yt+=Ut,_t.material&&Et.push(_t.material);for(const Vt in qt){const Ot=qt[Vt];switch(Vt){case"VERTEX":for(const Be in A){const ce=A[Be];switch(Be){case"POSITION":const yn=T.array.length;if(De(_t,w[ce],Ot.offset,T.array),T.stride=w[ce].stride,w.skinWeights&&w.skinIndices&&(De(_t,w.skinIndices,Ot.offset,dt.array),De(_t,w.skinWeights,Ot.offset,gt.array)),_t.hasUV===!1&&E.uvsNeedsFix===!0){const tc=(T.array.length-yn)/T.stride;for(let ea=0;ea<tc;ea++)W.array.push(0,0)}break;case"NORMAL":De(_t,w[ce],Ot.offset,V.array),V.stride=w[ce].stride;break;case"COLOR":De(_t,w[ce],Ot.offset,lt.array),lt.stride=w[ce].stride;break;case"TEXCOORD":De(_t,w[ce],Ot.offset,W.array),W.stride=w[ce].stride;break;case"TEXCOORD1":De(_t,w[ce],Ot.offset,ft.array),W.stride=w[ce].stride;break;default:console.warn('THREE.ColladaLoader: Semantic "%s" not handled in geometry build process.',Be)}}break;case"NORMAL":De(_t,w[Ot.id],Ot.offset,V.array),V.stride=w[Ot.id].stride;break;case"COLOR":De(_t,w[Ot.id],Ot.offset,lt.array,!0),lt.stride=w[Ot.id].stride;break;case"TEXCOORD":De(_t,w[Ot.id],Ot.offset,W.array),W.stride=w[Ot.id].stride;break;case"TEXCOORD1":De(_t,w[Ot.id],Ot.offset,ft.array),ft.stride=w[Ot.id].stride;break}}}return T.array.length>0&&tt.setAttribute("position",new ae(T.array,T.stride)),V.array.length>0&&tt.setAttribute("normal",new ae(V.array,V.stride)),lt.array.length>0&&tt.setAttribute("color",new ae(lt.array,lt.stride)),W.array.length>0&&tt.setAttribute("uv",new ae(W.array,W.stride)),ft.array.length>0&&tt.setAttribute("uv1",new ae(ft.array,ft.stride)),dt.array.length>0&&tt.setAttribute("skinIndex",new ae(dt.array,dt.stride)),gt.array.length>0&&tt.setAttribute("skinWeight",new ae(gt.array,gt.stride)),b.data=tt,b.type=E[0].type,b.materialKeys=Et,b}function De(E,w,A,b,T=!1){const V=E.p,W=E.stride,ft=E.vcount;function lt(tt){let Et=V[tt+A]*gt;const yt=Et+gt;for(;Et<yt;Et++)b.push(dt[Et]);if(T){const Ct=b.length-gt-1;Tr.setRGB(b[Ct+0],b[Ct+1],b[Ct+2]).convertSRGBToLinear(),b[Ct+0]=Tr.r,b[Ct+1]=Tr.g,b[Ct+2]=Tr.b}}const dt=w.array,gt=w.stride;if(E.vcount!==void 0){let tt=0;for(let Et=0,yt=ft.length;Et<yt;Et++){const Ct=ft[Et];if(Ct===4){const _t=tt+W*0,qt=tt+W*1,Ut=tt+W*2,Vt=tt+W*3;lt(_t),lt(qt),lt(Vt),lt(qt),lt(Ut),lt(Vt)}else if(Ct===3){const _t=tt+W*0,qt=tt+W*1,Ut=tt+W*2;lt(_t),lt(qt),lt(Ut)}else if(Ct>4)for(let _t=1,qt=Ct-2;_t<=qt;_t++){const Ut=tt+W*0,Vt=tt+W*_t,Ot=tt+W*(_t+1);lt(Ut),lt(Vt),lt(Ot)}tt+=W*Ct}}else for(let tt=0,Et=V.length;tt<Et;tt+=W)lt(tt)}function Cs(E){return S(Rt.geometries[E],_s)}function Gi(E){const w={name:E.getAttribute("name")||"",joints:{},links:[]};for(let A=0;A<E.childNodes.length;A++){const b=E.childNodes[A];if(b.nodeType===1)switch(b.nodeName){case"technique_common":Xl(b,w);break}}Rt.kinematicsModels[E.getAttribute("id")]=w}function Rs(E){return E.build!==void 0?E.build:E}function qi(E){return S(Rt.kinematicsModels[E],Rs)}function Xl(E,w){for(let A=0;A<E.childNodes.length;A++){const b=E.childNodes[A];if(b.nodeType===1)switch(b.nodeName){case"joint":w.joints[b.getAttribute("sid")]=Ki(b);break;case"link":w.links.push(Xi(b));break}}}function Ki(E){let w;for(let A=0;A<E.childNodes.length;A++){const b=E.childNodes[A];if(b.nodeType===1)switch(b.nodeName){case"prismatic":case"revolute":w=kr(b);break}}return w}function kr(E){const w={sid:E.getAttribute("sid"),name:E.getAttribute("name")||"",axis:new L,limits:{min:0,max:0},type:E.nodeName,static:!1,zeroPosition:0,middlePosition:0};for(let A=0;A<E.childNodes.length;A++){const b=E.childNodes[A];if(b.nodeType===1)switch(b.nodeName){case"axis":const T=o(b.textContent);w.axis.fromArray(T);break;case"limits":const V=b.getElementsByTagName("max")[0],W=b.getElementsByTagName("min")[0];w.limits.max=parseFloat(V.textContent),w.limits.min=parseFloat(W.textContent);break}}return w.limits.min>=w.limits.max&&(w.static=!0),w.middlePosition=(w.limits.min+w.limits.max)/2,w}function Xi(E){const w={sid:E.getAttribute("sid"),name:E.getAttribute("name")||"",attachments:[],transforms:[]};for(let A=0;A<E.childNodes.length;A++){const b=E.childNodes[A];if(b.nodeType===1)switch(b.nodeName){case"attachment_full":w.attachments.push(Ps(b));break;case"matrix":case"translate":case"rotate":w.transforms.push(Uo(b));break}}return w}function Ps(E){const w={joint:E.getAttribute("joint").split("/").pop(),transforms:[],links:[]};for(let A=0;A<E.childNodes.length;A++){const b=E.childNodes[A];if(b.nodeType===1)switch(b.nodeName){case"link":w.links.push(Xi(b));break;case"matrix":case"translate":case"rotate":w.transforms.push(Uo(b));break}}return w}function Uo(E){const w={type:E.nodeName},A=o(E.textContent);switch(w.type){case"matrix":w.obj=new Mt,w.obj.fromArray(A).transpose();break;case"translate":w.obj=new L,w.obj.fromArray(A);break;case"rotate":w.obj=new L,w.obj.fromArray(A),w.angle=ye.degToRad(A[3]);break}return w}function Zl(E){const w={name:E.getAttribute("name")||"",rigidBodies:{}};for(let A=0;A<E.childNodes.length;A++){const b=E.childNodes[A];if(b.nodeType===1)switch(b.nodeName){case"rigid_body":w.rigidBodies[b.getAttribute("name")]={},Yl(b,w.rigidBodies[b.getAttribute("name")]);break}}Rt.physicsModels[E.getAttribute("id")]=w}function Yl(E,w){for(let A=0;A<E.childNodes.length;A++){const b=E.childNodes[A];if(b.nodeType===1)switch(b.nodeName){case"technique_common":jn(b,w);break}}}function jn(E,w){for(let A=0;A<E.childNodes.length;A++){const b=E.childNodes[A];if(b.nodeType===1)switch(b.nodeName){case"inertia":w.inertia=o(b.textContent);break;case"mass":w.mass=o(b.textContent)[0];break}}}function Wo(E){const w={bindJointAxis:[]};for(let A=0;A<E.childNodes.length;A++){const b=E.childNodes[A];if(b.nodeType===1)switch(b.nodeName){case"bind_joint_axis":w.bindJointAxis.push(Go(b));break}}Rt.kinematicsScenes[u(E.getAttribute("url"))]=w}function Go(E){const w={target:E.getAttribute("target").split("/").pop()};for(let A=0;A<E.childNodes.length;A++){const b=E.childNodes[A];if(b.nodeType===1)switch(b.nodeName){case"axis":const T=b.getElementsByTagName("param")[0];w.axis=T.textContent;const V=w.axis.split("inst_").pop().split("axis")[0];w.jointIndex=V.substring(0,V.length-1);break}}return w}function Jl(E){return E.build!==void 0?E.build:E}function qo(E){return S(Rt.kinematicsScenes[E],Jl)}function Ko(){const E=Object.keys(Rt.kinematicsModels)[0],w=Object.keys(Rt.kinematicsScenes)[0],A=Object.keys(Rt.visualScenes)[0];if(E===void 0||w===void 0)return;const b=qi(E),T=qo(w),V=$o(A),W=T.bindJointAxis,ft={};for(let gt=0,tt=W.length;gt<tt;gt++){const Et=W[gt],yt=le.querySelector('[sid="'+Et.target+'"]');if(yt){const Ct=yt.parentElement;lt(Et.jointIndex,Ct)}}function lt(gt,tt){const Et=tt.getAttribute("name"),yt=b.joints[gt];V.traverse(function(Ct){Ct.name===Et&&(ft[gt]={object:Ct,transforms:Xo(tt),joint:yt,position:yt.zeroPosition})})}const dt=new Mt;Ht={joints:b&&b.joints,getJointValue:function(gt){const tt=ft[gt];if(tt)return tt.position;console.warn("THREE.ColladaLoader: Joint "+gt+" doesn't exist.")},setJointValue:function(gt,tt){const Et=ft[gt];if(Et){const yt=Et.joint;if(tt>yt.limits.max||tt<yt.limits.min)console.warn("THREE.ColladaLoader: Joint "+gt+" value "+tt+" outside of limits (min: "+yt.limits.min+", max: "+yt.limits.max+").");else if(yt.static)console.warn("THREE.ColladaLoader: Joint "+gt+" is static.");else{const Ct=Et.object,_t=yt.axis,qt=Et.transforms;Oe.identity();for(let Ut=0;Ut<qt.length;Ut++){const Vt=qt[Ut];if(Vt.sid&&Vt.sid.indexOf(gt)!==-1)switch(yt.type){case"revolute":Oe.multiply(dt.makeRotationAxis(_t,ye.degToRad(tt)));break;case"prismatic":Oe.multiply(dt.makeTranslation(_t.x*tt,_t.y*tt,_t.z*tt));break;default:console.warn("THREE.ColladaLoader: Unknown joint type: "+yt.type);break}else switch(Vt.type){case"matrix":Oe.multiply(Vt.obj);break;case"translate":Oe.multiply(dt.makeTranslation(Vt.obj.x,Vt.obj.y,Vt.obj.z));break;case"scale":Oe.scale(Vt.obj);break;case"rotate":Oe.multiply(dt.makeRotationAxis(Vt.obj,Vt.angle));break}}Ct.matrix.copy(Oe),Ct.matrix.decompose(Ct.position,Ct.quaternion,Ct.scale),ft[gt].position=tt}}else console.log("THREE.ColladaLoader: "+gt+" does not exist.")}}}function Xo(E){const w=[],A=le.querySelector('[id="'+E.id+'"]');for(let b=0;b<A.childNodes.length;b++){const T=A.childNodes[b];if(T.nodeType!==1)continue;let V,W;switch(T.nodeName){case"matrix":V=o(T.textContent);const ft=new Mt().fromArray(V).transpose();w.push({sid:T.getAttribute("sid"),type:T.nodeName,obj:ft});break;case"translate":case"scale":V=o(T.textContent),W=new L().fromArray(V),w.push({sid:T.getAttribute("sid"),type:T.nodeName,obj:W});break;case"rotate":V=o(T.textContent),W=new L().fromArray(V);const lt=ye.degToRad(V[3]);w.push({sid:T.getAttribute("sid"),type:T.nodeName,obj:W,angle:lt});break}}return w}function Zo(E){const w=E.getElementsByTagName("node");for(let A=0;A<w.length;A++){const b=w[A];b.hasAttribute("id")===!1&&b.setAttribute("id",d())}}const Oe=new Mt,li=new L;function Xt(E){const w={name:E.getAttribute("name")||"",type:E.getAttribute("type"),id:E.getAttribute("id"),sid:E.getAttribute("sid"),matrix:new Mt,nodes:[],instanceCameras:[],instanceControllers:[],instanceLights:[],instanceGeometries:[],instanceNodes:[],transforms:{}};for(let A=0;A<E.childNodes.length;A++){const b=E.childNodes[A];if(b.nodeType!==1)continue;let T;switch(b.nodeName){case"node":w.nodes.push(b.getAttribute("id")),Xt(b);break;case"instance_camera":w.instanceCameras.push(u(b.getAttribute("url")));break;case"instance_controller":w.instanceControllers.push(Yo(b));break;case"instance_light":w.instanceLights.push(u(b.getAttribute("url")));break;case"instance_geometry":w.instanceGeometries.push(Yo(b));break;case"instance_node":w.instanceNodes.push(u(b.getAttribute("url")));break;case"matrix":T=o(b.textContent),w.matrix.multiply(Oe.fromArray(T).transpose()),w.transforms[b.getAttribute("sid")]=b.nodeName;break;case"translate":T=o(b.textContent),li.fromArray(T),w.matrix.multiply(Oe.makeTranslation(li.x,li.y,li.z)),w.transforms[b.getAttribute("sid")]=b.nodeName;break;case"rotate":T=o(b.textContent);const V=ye.degToRad(T[3]);w.matrix.multiply(Oe.makeRotationAxis(li.fromArray(T),V)),w.transforms[b.getAttribute("sid")]=b.nodeName;break;case"scale":T=o(b.textContent),w.matrix.scale(li.fromArray(T)),w.transforms[b.getAttribute("sid")]=b.nodeName;break;case"extra":break;default:console.log(b)}}return Qe(w.id)?console.warn("THREE.ColladaLoader: There is already a node with ID %s. Exclude current node from further processing.",w.id):Rt.nodes[w.id]=w,w}function Yo(E){const w={id:u(E.getAttribute("url")),materials:{},skeletons:[]};for(let A=0;A<E.childNodes.length;A++){const b=E.childNodes[A];switch(b.nodeName){case"bind_material":const T=b.getElementsByTagName("instance_material");for(let V=0;V<T.length;V++){const W=T[V],ft=W.getAttribute("symbol"),lt=W.getAttribute("target");w.materials[ft]=u(lt)}break;case"skeleton":w.skeletons.push(u(b.textContent));break}}return w}function zs(E,w){const A=[],b=[];let T,V,W;for(T=0;T<E.length;T++){const dt=E[T];let gt;if(Qe(dt))gt=ci(dt),Ns(gt,w,A);else if($l(dt)){const Et=Rt.visualScenes[dt].children;for(let yt=0;yt<Et.length;yt++){const Ct=Et[yt];if(Ct.type==="JOINT"){const _t=ci(Ct.id);Ns(_t,w,A)}}}else console.error("THREE.ColladaLoader: Unable to find root bone of skeleton with ID:",dt)}for(T=0;T<w.length;T++)for(V=0;V<A.length;V++)if(W=A[V],W.bone.name===w[T].name){b[T]=W,W.processed=!0;break}for(T=0;T<A.length;T++)W=A[T],W.processed===!1&&(b.push(W),W.processed=!0);const ft=[],lt=[];for(T=0;T<b.length;T++)W=b[T],ft.push(W.bone),lt.push(W.boneInverse);return new jl(ft,lt)}function Ns(E,w,A){E.traverse(function(b){if(b.isBone===!0){let T;for(let V=0;V<w.length;V++){const W=w[V];if(W.name===b.name){T=W.boneInverse;break}}T===void 0&&(T=new Mt),A.push({bone:b,boneInverse:T,processed:!1})}})}function Mr(E){const w=[],A=E.matrix,b=E.nodes,T=E.type,V=E.instanceCameras,W=E.instanceControllers,ft=E.instanceLights,lt=E.instanceGeometries,dt=E.instanceNodes;for(let tt=0,Et=b.length;tt<Et;tt++)w.push(ci(b[tt]));for(let tt=0,Et=V.length;tt<Et;tt++){const yt=Oo(V[tt]);yt!==null&&w.push(yt.clone())}for(let tt=0,Et=W.length;tt<Et;tt++){const yt=W[tt],Ct=st(yt.id),_t=Cs(Ct.id),qt=Zi(_t,yt.materials),Ut=yt.skeletons,Vt=Ct.skin.joints,Ot=zs(Ut,Vt);for(let Be=0,ce=qt.length;Be<ce;Be++){const yn=qt[Be];yn.isSkinnedMesh&&(yn.bind(Ot,Ct.skin.bindMatrix),yn.normalizeSkinWeights()),w.push(yn)}}for(let tt=0,Et=ft.length;tt<Et;tt++){const yt=As(ft[tt]);yt!==null&&w.push(yt.clone())}for(let tt=0,Et=lt.length;tt<Et;tt++){const yt=lt[tt],Ct=Cs(yt.id),_t=Zi(Ct,yt.materials);for(let qt=0,Ut=_t.length;qt<Ut;qt++)w.push(_t[qt])}for(let tt=0,Et=dt.length;tt<Et;tt++)w.push(ci(dt[tt]).clone());let gt;if(b.length===0&&w.length===1)gt=w[0];else{gt=T==="JOINT"?new Ll:new So;for(let tt=0;tt<w.length;tt++)gt.add(w[tt])}return gt.name=T==="JOINT"?E.sid:E.name,gt.matrix.copy(A),gt.matrix.decompose(gt.position,gt.quaternion,gt.scale),gt}const Ql=new Li({name:In.DEFAULT_MATERIAL_NAME,color:16711935});function Jo(E,w){const A=[];for(let b=0,T=E.length;b<T;b++){const V=w[E[b]];V===void 0?(console.warn("THREE.ColladaLoader: Material with key %s not found. Apply fallback material.",E[b]),A.push(Ql)):A.push(wr(V))}return A}function Zi(E,w){const A=[];for(const b in E){const T=E[b],V=Jo(T.materialKeys,w);if(V.length===0&&(b==="lines"||b==="linestrips"?V.push(new Ao):V.push(new Eo)),b==="lines"||b==="linestrips")for(let dt=0,gt=V.length;dt<gt;dt++){const tt=V[dt];if(tt.isMeshPhongMaterial===!0||tt.isMeshLambertMaterial===!0){const Et=new Ao;Et.color.copy(tt.color),Et.opacity=tt.opacity,Et.transparent=tt.transparent,V[dt]=Et}}const W=T.data.attributes.skinIndex!==void 0,ft=V.length===1?V[0]:V;let lt;switch(b){case"lines":lt=new wx(T.data,ft);break;case"linestrips":lt=new Hl(T.data,ft);break;case"triangles":case"polylist":W?lt=new Ny(T.data,ft):lt=new Ii(T.data,ft);break}A.push(lt)}return A}function Qe(E){return Rt.nodes[E]!==void 0}function ci(E){return S(Rt.nodes[E],Mr)}function $e(E){const w={name:E.getAttribute("name"),children:[]};Zo(E);const A=i(E,"node");for(let b=0;b<A.length;b++)w.children.push(Xt(A[b]));Rt.visualScenes[E.getAttribute("id")]=w}function Qo(E){const w=new So;w.name=E.name;const A=E.children;for(let b=0;b<A.length;b++){const T=A[b];w.add(ci(T.id))}return w}function $l(E){return Rt.visualScenes[E]!==void 0}function $o(E){return S(Rt.visualScenes[E],Qo)}function br(E){const w=i(E,"instance_visual_scene")[0];return $o(u(w.getAttribute("url")))}function Sr(){const E=Rt.clips;if(f(E)===!0){if(f(Rt.animations)===!1){const w=[];for(const A in Rt.animations){const b=I(A);for(let T=0,V=b.length;T<V;T++)w.push(b[T])}ui.push(new Bh("default",-1,w))}}else for(const w in E)ui.push(K(w))}function Yi(E){let w="";const A=[E];for(;A.length;){const b=A.shift();b.nodeType===Node.TEXT_NODE?w+=b.textContent:(w+=`
`,A.push.apply(A,b.childNodes))}return w.trim()}if(t.length===0)return{scene:new gx};const Ji=new DOMParser().parseFromString(t,"application/xml"),le=i(Ji,"COLLADA")[0],Fs=Ji.getElementsByTagName("parsererror")[0];if(Fs!==void 0){const E=i(Fs,"div")[0];let w;return E?w=E.textContent:w=Yi(Fs),console.error(`THREE.ColladaLoader: Failed to parse collada file.
`,w),null}const Ls=le.getAttribute("version");console.debug("THREE.ColladaLoader: File version",Ls);const Is=m(i(le,"asset")[0]),Ar=new jy(this.manager);Ar.setPath(this.resourcePath||e).setCrossOrigin(this.crossOrigin);let Hn;Gm&&(Hn=new Gm(this.manager),Hn.setPath(this.resourcePath||e));const Tr=new oe,ui=[];let Ht={},ta=0;const Rt={animations:{},clips:{},controllers:{},images:{},effects:{},materials:{},cameras:{},lights:{},geometries:{},nodes:{},visualScenes:{},kinematicsModels:{},physicsModels:{},kinematicsScenes:{}};x(le,"library_animations","animation",_),x(le,"library_animation_clips","animation_clip",nt),x(le,"library_controllers","controller",Z),x(le,"library_images","image",Q),x(le,"library_effects","effect",Lt),x(le,"library_materials","material",Lo),x(le,"library_cameras","camera",Do),x(le,"library_lights","light",Kl),x(le,"library_geometries","geometry",Ts),x(le,"library_nodes","node",Xt),x(le,"library_visual_scenes","visual_scene",$e),x(le,"library_kinematics_models","kinematics_model",Gi),x(le,"library_physics_models","physics_model",Zl),x(le,"scene","instance_kinematics_scene",Wo),k(Rt.animations,F),k(Rt.clips,wt),k(Rt.controllers,rt),k(Rt.images,ut),k(Rt.effects,ks),k(Rt.materials,xr),k(Rt.cameras,Ms),k(Rt.lights,Er),k(Rt.geometries,_s),k(Rt.visualScenes,Qo),Sr(),Ko();const hi=br(i(le,"scene")[0]);return hi.animations=ui,Is.upAxis==="Z_UP"&&(console.warn("THREE.ColladaLoader: You are loading an asset with a Z-UP coordinate system. The loader just rotates the asset to transform it into Y-UP. The vertex data are not converted, see #24289."),hi.rotation.set(-Math.PI/2,0,0)),hi.scale.multiplyScalar(Is.unit),{get animations(){return console.warn("THREE.ColladaLoader: Please access animations over scene.animations now."),ui},kinematics:Ht,library:Rt,scene:hi}}}THREE.ColladaLoader=u1;AFRAME.registerComponent("collada-model-legacy",{schema:{type:"asset"},init:function(){this.model=null,this.loader=new THREE.ColladaLoader},update:function(){var l=this,t=this.el,e=this.data,i=this.el.sceneEl.systems.renderer;e&&(this.remove(),this.loader.load(e,function(s){l.model=s.scene,l.model.traverse(function(o){if(o.isMesh){var c=o.material;c.color&&i.applyColorCorrection(c.color),c.map&&i.applyColorCorrection(c.map),c.emissive&&i.applyColorCorrection(c.emissive),c.emissiveMap&&i.applyColorCorrection(c.emissiveMap)}}),t.setObject3D("mesh",l.model),t.emit("model-loaded",{format:"collada",model:l.model})}))},remove:function(){this.model&&this.el.removeObject3D("mesh")}});/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.8.2
*/var pn=Uint8Array,fs=Uint16Array,h1=Int32Array,qy=new pn([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ky=new pn([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),d1=new pn([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Xy=function(l,t){for(var e=new fs(31),i=0;i<31;++i)e[i]=t+=1<<l[i-1];for(var s=new h1(e[30]),i=1;i<30;++i)for(var o=e[i];o<e[i+1];++o)s[o]=o-e[i]<<5|i;return{b:e,r:s}},Zy=Xy(qy,2),Yy=Zy.b,f1=Zy.r;Yy[28]=258,f1[258]=28;var p1=Xy(Ky,0),m1=p1.b,jh=new fs(32768);for(var Jt=0;Jt<32768;++Jt){var Ni=(Jt&43690)>>1|(Jt&21845)<<1;Ni=(Ni&52428)>>2|(Ni&13107)<<2,Ni=(Ni&61680)>>4|(Ni&3855)<<4,jh[Jt]=((Ni&65280)>>8|(Ni&255)<<8)>>1}var ko=function(l,t,e){for(var i=l.length,s=0,o=new fs(t);s<i;++s)l[s]&&++o[l[s]-1];var c=new fs(t);for(s=1;s<t;++s)c[s]=c[s-1]+o[s-1]<<1;var u;if(e){u=new fs(1<<t);var d=15-t;for(s=0;s<i;++s)if(l[s])for(var f=s<<4|l[s],m=t-l[s],y=c[l[s]-1]++<<m,v=y|(1<<m)-1;y<=v;++y)u[jh[y]>>d]=f}else for(u=new fs(i),s=0;s<i;++s)l[s]&&(u[s]=jh[c[l[s]-1]++]>>15-l[s]);return u},Po=new pn(288);for(var Jt=0;Jt<144;++Jt)Po[Jt]=8;for(var Jt=144;Jt<256;++Jt)Po[Jt]=9;for(var Jt=256;Jt<280;++Jt)Po[Jt]=7;for(var Jt=280;Jt<288;++Jt)Po[Jt]=8;var Jy=new pn(32);for(var Jt=0;Jt<32;++Jt)Jy[Jt]=5;var y1=ko(Po,9,1),g1=ko(Jy,5,1),mh=function(l){for(var t=l[0],e=1;e<l.length;++e)l[e]>t&&(t=l[e]);return t},Tn=function(l,t,e){var i=t/8|0;return(l[i]|l[i+1]<<8)>>(t&7)&e},yh=function(l,t){var e=t/8|0;return(l[e]|l[e+1]<<8|l[e+2]<<16)>>(t&7)},v1=function(l){return(l+7)/8|0},x1=function(l,t,e){return(e==null||e>l.length)&&(e=l.length),new pn(l.subarray(t,e))},w1=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],_n=function(l,t,e){var i=new Error(t||w1[l]);if(i.code=l,Error.captureStackTrace&&Error.captureStackTrace(i,_n),!e)throw i;return i},E1=function(l,t,e,i){var s=l.length,o=0;if(!s||t.f&&!t.l)return e||new pn(0);var c=!e,u=c||t.i!=2,d=t.i;c&&(e=new pn(s*3));var f=function(Bn){var Hi=e.length;if(Bn>Hi){var Vn=new pn(Math.max(Hi*2,Bn));Vn.set(e),e=Vn}},m=t.f||0,y=t.p||0,v=t.b||0,x=t.l,k=t.d,S=t.m,_=t.n,z=s*8;do{if(!x){m=Tn(l,y,1);var H=Tn(l,y+1,3);if(y+=3,H)if(H==1)x=y1,k=g1,S=9,_=5;else if(H==2){var q=Tn(l,y,31)+257,G=Tn(l,y+10,15)+4,Y=q+Tn(l,y+5,31)+1;y+=14;for(var ct=new pn(Y),pt=new pn(19),et=0;et<G;++et)pt[d1[et]]=Tn(l,y+et*3,7);y+=G*3;for(var ht=mh(pt),Tt=(1<<ht)-1,Ft=ko(pt,ht,1),et=0;et<Y;){var St=Ft[Tn(l,y,Tt)];y+=St&15;var F=St>>4;if(F<16)ct[et++]=F;else{var nt=0,wt=0;for(F==16?(wt=3+Tn(l,y,3),y+=2,nt=ct[et-1]):F==17?(wt=3+Tn(l,y,7),y+=3):F==18&&(wt=11+Tn(l,y,127),y+=7);wt--;)ct[et++]=nt}}var K=ct.subarray(0,q),Z=ct.subarray(q);S=mh(K),_=mh(Z),x=ko(K,S,1),k=ko(Z,_,1)}else _n(1);else{var F=v1(y)+4,I=l[F-4]|l[F-3]<<8,O=F+I;if(O>s){d&&_n(0);break}u&&f(v+I),e.set(l.subarray(F,O),v),t.b=v+=I,t.p=y=O*8,t.f=m;continue}if(y>z){d&&_n(0);break}}u&&f(v+131072);for(var X=(1<<S)-1,R=(1<<_)-1,U=y;;U=y){var nt=x[yh(l,y)&X],rt=nt>>4;if(y+=nt&15,y>z){d&&_n(0);break}if(nt||_n(2),rt<256)e[v++]=rt;else if(rt==256){U=y,x=null;break}else{var ot=rt-254;if(rt>264){var et=rt-257,st=qy[et];ot=Tn(l,y,(1<<st)-1)+Yy[et],y+=st}var Q=k[yh(l,y)&R],ut=Q>>4;Q||_n(3),y+=Q&15;var Z=m1[ut];if(ut>3){var st=Ky[ut];Z+=yh(l,y)&(1<<st)-1,y+=st}if(y>z){d&&_n(0);break}u&&f(v+131072);var At=v+ot;if(v<Z){var Lt=o-Z,re=Math.min(Z,At);for(Lt+v<0&&_n(3);v<re;++v)e[v]=i[Lt+v]}for(;v<At;++v)e[v]=e[v-Z]}}t.l=x,t.p=U,t.b=v,t.f=m,x&&(m=1,t.m=S,t.d=k,t.n=_)}while(!m);return v!=e.length&&c?x1(e,0,v):e.subarray(0,v)},k1=new pn(0),M1=function(l,t){return((l[0]&15)!=8||l[0]>>4>7||(l[0]<<8|l[1])%31)&&_n(6,"invalid zlib data"),(l[1]>>5&1)==+!t&&_n(6,"invalid zlib data: "+(l[1]&32?"need":"unexpected")+" dictionary"),(l[1]>>3&4)+2};function b1(l,t){return E1(l.subarray(M1(l,t),-4),{i:2},t,t)}var S1=typeof TextDecoder<"u"&&new TextDecoder,A1=0;try{S1.decode(k1,{stream:!0}),A1=1}catch{}function Qy(l,t,e){const i=e.length-l-1;if(t>=e[i])return i-1;if(t<=e[l])return l;let s=l,o=i,c=Math.floor((s+o)/2);for(;t<e[c]||t>=e[c+1];)t<e[c]?o=c:s=c,c=Math.floor((s+o)/2);return c}function T1(l,t,e,i){const s=[],o=[],c=[];s[0]=1;for(let u=1;u<=e;++u){o[u]=t-i[l+1-u],c[u]=i[l+u]-t;let d=0;for(let f=0;f<u;++f){const m=c[f+1],y=o[u-f],v=s[f]/(m+y);s[f]=d+m*v,d=y*v}s[u]=d}return s}function _1(l,t,e,i){const s=Qy(l,i,t),o=T1(s,i,l,t),c=new ge(0,0,0,0);for(let u=0;u<=l;++u){const d=e[s-l+u],f=o[u],m=d.w*f;c.x+=d.x*m,c.y+=d.y*m,c.z+=d.z*m,c.w+=d.w*f}return c}function C1(l,t,e,i,s){const o=[];for(let y=0;y<=e;++y)o[y]=0;const c=[];for(let y=0;y<=i;++y)c[y]=o.slice(0);const u=[];for(let y=0;y<=e;++y)u[y]=o.slice(0);u[0][0]=1;const d=o.slice(0),f=o.slice(0);for(let y=1;y<=e;++y){d[y]=t-s[l+1-y],f[y]=s[l+y]-t;let v=0;for(let x=0;x<y;++x){const k=f[x+1],S=d[y-x];u[y][x]=k+S;const _=u[x][y-1]/u[y][x];u[x][y]=v+k*_,v=S*_}u[y][y]=v}for(let y=0;y<=e;++y)c[0][y]=u[y][e];for(let y=0;y<=e;++y){let v=0,x=1;const k=[];for(let S=0;S<=e;++S)k[S]=o.slice(0);k[0][0]=1;for(let S=1;S<=i;++S){let _=0;const z=y-S,H=e-S;y>=S&&(k[x][0]=k[v][0]/u[H+1][z],_=k[x][0]*u[z][H]);const F=z>=-1?1:-z,I=y-1<=H?S-1:e-y;for(let q=F;q<=I;++q)k[x][q]=(k[v][q]-k[v][q-1])/u[H+1][z+q],_+=k[x][q]*u[z+q][H];y<=H&&(k[x][S]=-k[v][S-1]/u[H+1][y],_+=k[x][S]*u[y][H]),c[S][y]=_;const O=v;v=x,x=O}}let m=e;for(let y=1;y<=i;++y){for(let v=0;v<=e;++v)c[y][v]*=m;m*=e-y}return c}function R1(l,t,e,i,s){const o=s<l?s:l,c=[],u=Qy(l,i,t),d=C1(u,i,l,o,t),f=[];for(let m=0;m<e.length;++m){const y=e[m].clone(),v=y.w;y.x*=v,y.y*=v,y.z*=v,f[m]=y}for(let m=0;m<=o;++m){const y=f[u-l].clone().multiplyScalar(d[m][0]);for(let v=1;v<=l;++v)y.add(f[u-l+v].clone().multiplyScalar(d[m][v]));c[m]=y}for(let m=o+1;m<=s+1;++m)c[m]=new ge(0,0,0);return c}function P1(l,t){let e=1;for(let s=2;s<=l;++s)e*=s;let i=1;for(let s=2;s<=t;++s)i*=s;for(let s=2;s<=l-t;++s)i*=s;return e/i}function z1(l){const t=l.length,e=[],i=[];for(let o=0;o<t;++o){const c=l[o];e[o]=new L(c.x,c.y,c.z),i[o]=c.w}const s=[];for(let o=0;o<t;++o){const c=e[o].clone();for(let u=1;u<=o;++u)c.sub(s[o-u].clone().multiplyScalar(P1(o,u)*i[u]));s[o]=c.divideScalar(i[0])}return s}function N1(l,t,e,i,s){const o=R1(l,t,e,i,s);return z1(o)}class F1 extends Ex{constructor(t,e,i,s,o){super(),this.degree=t,this.knots=e,this.controlPoints=[],this.startKnot=s||0,this.endKnot=o||this.knots.length-1;for(let c=0;c<i.length;++c){const u=i[c];this.controlPoints[c]=new ge(u.x,u.y,u.z,u.w)}}getPoint(t,e=new L){const i=e,s=this.knots[this.startKnot]+t*(this.knots[this.endKnot]-this.knots[this.startKnot]),o=_1(this.degree,this.knots,this.controlPoints,s);return o.w!==1&&o.divideScalar(o.w),i.set(o.x,o.y,o.z)}getTangent(t,e=new L){const i=e,s=this.knots[0]+t*(this.knots[this.knots.length-1]-this.knots[0]),o=N1(this.degree,this.knots,this.controlPoints,s,1);return i.copy(o[1]).normalize(),i}}let Dt,he,Ue;class L1 extends In{constructor(t){super(t)}load(t,e,i,s){const o=this,c=o.path===""?Gy.extractUrlBase(t):o.path,u=new Jh(this.manager);u.setPath(o.path),u.setResponseType("arraybuffer"),u.setRequestHeader(o.requestHeader),u.setWithCredentials(o.withCredentials),u.load(t,function(d){try{e(o.parse(d,c))}catch(f){s?s(f):console.error(f),o.manager.itemError(t)}},i,s)}parse(t,e){if(j1(t))Dt=new V1().parse(t);else{const s=n0(t);if(!H1(s))throw new Error("THREE.FBXLoader: Unknown format.");if(Km(s)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+Km(s));Dt=new B1().parse(s)}const i=new jy(this.manager).setPath(this.resourcePath||e).setCrossOrigin(this.crossOrigin);return new I1(i,this.manager).parse(Dt)}}class I1{constructor(t,e){this.textureLoader=t,this.manager=e}parse(){he=this.parseConnections();const t=this.parseImages(),e=this.parseTextures(t),i=this.parseMaterials(e),s=this.parseDeformers(),o=new D1().parse(s);return this.parseScene(s,o,i),Ue}parseConnections(){const t=new Map;return"Connections"in Dt&&Dt.Connections.connections.forEach(function(i){const s=i[0],o=i[1],c=i[2];t.has(s)||t.set(s,{parents:[],children:[]});const u={ID:o,relationship:c};t.get(s).parents.push(u),t.has(o)||t.set(o,{parents:[],children:[]});const d={ID:s,relationship:c};t.get(o).children.push(d)}),t}parseImages(){const t={},e={};if("Video"in Dt.Objects){const i=Dt.Objects.Video;for(const s in i){const o=i[s],c=parseInt(s);if(t[c]=o.RelativeFilename||o.Filename,"Content"in o){const u=o.Content instanceof ArrayBuffer&&o.Content.byteLength>0,d=typeof o.Content=="string"&&o.Content!=="";if(u||d){const f=this.parseImage(i[s]);e[o.RelativeFilename||o.Filename]=f}}}}for(const i in t){const s=t[i];e[s]!==void 0?t[i]=e[s]:t[i]=t[i].split("\\").pop()}return t}parseImage(t){const e=t.Content,i=t.RelativeFilename||t.Filename,s=i.slice(i.lastIndexOf(".")+1).toLowerCase();let o;switch(s){case"bmp":o="image/bmp";break;case"jpg":case"jpeg":o="image/jpeg";break;case"png":o="image/png";break;case"tif":o="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",i),o="image/tga";break;default:console.warn('FBXLoader: Image type "'+s+'" is not supported.');return}if(typeof e=="string")return"data:"+o+";base64,"+e;{const c=new Uint8Array(e);return window.URL.createObjectURL(new Blob([c],{type:o}))}}parseTextures(t){const e=new Map;if("Texture"in Dt.Objects){const i=Dt.Objects.Texture;for(const s in i){const o=this.parseTexture(i[s],t);e.set(parseInt(s),o)}}return e}parseTexture(t,e){const i=this.loadTexture(t,e);i.ID=t.id,i.name=t.attrName;const s=t.WrapModeU,o=t.WrapModeV,c=s!==void 0?s.value:0,u=o!==void 0?o.value:0;if(i.wrapS=c===0?Di:Ln,i.wrapT=u===0?Di:Ln,"Scaling"in t){const d=t.Scaling.value;i.repeat.x=d[0],i.repeat.y=d[1]}if("Translation"in t){const d=t.Translation.value;i.offset.x=d[0],i.offset.y=d[1]}return i}loadTexture(t,e){let i;const s=this.textureLoader.path,o=he.get(t.id).children;o!==void 0&&o.length>0&&e[o[0].ID]!==void 0&&(i=e[o[0].ID],(i.indexOf("blob:")===0||i.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let c;const u=t.FileName.slice(-3).toLowerCase();if(u==="tga"){const d=this.manager.getHandler(".tga");d===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",t.RelativeFilename),c=new Je):(d.setPath(this.textureLoader.path),c=d.load(i))}else if(u==="dds"){const d=this.manager.getHandler(".dds");d===null?(console.warn("FBXLoader: DDS loader not found, creating placeholder texture for",t.RelativeFilename),c=new Je):(d.setPath(this.textureLoader.path),c=d.load(i))}else u==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",t.RelativeFilename),c=new Je):c=this.textureLoader.load(i);return this.textureLoader.setPath(s),c}parseMaterials(t){const e=new Map;if("Material"in Dt.Objects){const i=Dt.Objects.Material;for(const s in i){const o=this.parseMaterial(i[s],t);o!==null&&e.set(parseInt(s),o)}}return e}parseMaterial(t,e){const i=t.id,s=t.attrName;let o=t.ShadingModel;if(typeof o=="object"&&(o=o.value),!he.has(i))return null;const c=this.parseParameters(t,e,i);let u;switch(o.toLowerCase()){case"phong":u=new Eo;break;case"lambert":u=new Oy;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',o),u=new Eo;break}return u.setValues(c),u.name=s,u}parseParameters(t,e,i){const s={};t.BumpFactor&&(s.bumpScale=t.BumpFactor.value),t.Diffuse?s.color=new oe().fromArray(t.Diffuse.value).convertSRGBToLinear():t.DiffuseColor&&(t.DiffuseColor.type==="Color"||t.DiffuseColor.type==="ColorRGB")&&(s.color=new oe().fromArray(t.DiffuseColor.value).convertSRGBToLinear()),t.DisplacementFactor&&(s.displacementScale=t.DisplacementFactor.value),t.Emissive?s.emissive=new oe().fromArray(t.Emissive.value).convertSRGBToLinear():t.EmissiveColor&&(t.EmissiveColor.type==="Color"||t.EmissiveColor.type==="ColorRGB")&&(s.emissive=new oe().fromArray(t.EmissiveColor.value).convertSRGBToLinear()),t.EmissiveFactor&&(s.emissiveIntensity=parseFloat(t.EmissiveFactor.value)),t.Opacity&&(s.opacity=parseFloat(t.Opacity.value)),s.opacity<1&&(s.transparent=!0),t.ReflectionFactor&&(s.reflectivity=t.ReflectionFactor.value),t.Shininess&&(s.shininess=t.Shininess.value),t.Specular?s.specular=new oe().fromArray(t.Specular.value).convertSRGBToLinear():t.SpecularColor&&t.SpecularColor.type==="Color"&&(s.specular=new oe().fromArray(t.SpecularColor.value).convertSRGBToLinear());const o=this;return he.get(i).children.forEach(function(c){const u=c.relationship;switch(u){case"Bump":s.bumpMap=o.getTexture(e,c.ID);break;case"Maya|TEX_ao_map":s.aoMap=o.getTexture(e,c.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":s.map=o.getTexture(e,c.ID),s.map!==void 0&&(s.map.colorSpace=We);break;case"DisplacementColor":s.displacementMap=o.getTexture(e,c.ID);break;case"EmissiveColor":s.emissiveMap=o.getTexture(e,c.ID),s.emissiveMap!==void 0&&(s.emissiveMap.colorSpace=We);break;case"NormalMap":case"Maya|TEX_normal_map":s.normalMap=o.getTexture(e,c.ID);break;case"ReflectionColor":s.envMap=o.getTexture(e,c.ID),s.envMap!==void 0&&(s.envMap.mapping=vv,s.envMap.colorSpace=We);break;case"SpecularColor":s.specularMap=o.getTexture(e,c.ID),s.specularMap!==void 0&&(s.specularMap.colorSpace=We);break;case"TransparentColor":case"TransparencyFactor":s.alphaMap=o.getTexture(e,c.ID),s.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",u);break}}),s}getTexture(t,e){return"LayeredTexture"in Dt.Objects&&e in Dt.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),e=he.get(e).children[0].ID),t.get(e)}parseDeformers(){const t={},e={};if("Deformer"in Dt.Objects){const i=Dt.Objects.Deformer;for(const s in i){const o=i[s],c=he.get(parseInt(s));if(o.attrType==="Skin"){const u=this.parseSkeleton(c,i);u.ID=s,c.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),u.geometryID=c.parents[0].ID,t[s]=u}else if(o.attrType==="BlendShape"){const u={id:s};u.rawTargets=this.parseMorphTargets(c,i),u.id=s,c.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),e[s]=u}}}return{skeletons:t,morphTargets:e}}parseSkeleton(t,e){const i=[];return t.children.forEach(function(s){const o=e[s.ID];if(o.attrType!=="Cluster")return;const c={ID:s.ID,indices:[],weights:[],transformLink:new Mt().fromArray(o.TransformLink.a)};"Indexes"in o&&(c.indices=o.Indexes.a,c.weights=o.Weights.a),i.push(c)}),{rawBones:i,bones:[]}}parseMorphTargets(t,e){const i=[];for(let s=0;s<t.children.length;s++){const o=t.children[s],c=e[o.ID],u={name:c.attrName,initialWeight:c.DeformPercent,id:c.id,fullWeights:c.FullWeights.a};if(c.attrType!=="BlendShapeChannel")return;u.geoID=he.get(parseInt(o.ID)).children.filter(function(d){return d.relationship===void 0})[0].ID,i.push(u)}return i}parseScene(t,e,i){Ue=new So;const s=this.parseModels(t.skeletons,e,i),o=Dt.Objects.Model,c=this;s.forEach(function(d){const f=o[d.ID];c.setLookAtProperties(d,f),he.get(d.ID).parents.forEach(function(y){const v=s.get(y.ID);v!==void 0&&v.add(d)}),d.parent===null&&Ue.add(d)}),this.bindSkeleton(t.skeletons,e,s),this.addGlobalSceneSettings(),Ue.traverse(function(d){if(d.userData.transformData){d.parent&&(d.userData.transformData.parentMatrix=d.parent.matrix,d.userData.transformData.parentMatrixWorld=d.parent.matrixWorld);const f=t0(d.userData.transformData);d.applyMatrix4(f),d.updateWorldMatrix()}});const u=new O1().parse();Ue.children.length===1&&Ue.children[0].isGroup&&(Ue.children[0].animations=u,Ue=Ue.children[0]),Ue.animations=u}parseModels(t,e,i){const s=new Map,o=Dt.Objects.Model;for(const c in o){const u=parseInt(c),d=o[c],f=he.get(u);let m=this.buildSkeleton(f,t,u,d.attrName);if(!m){switch(d.attrType){case"Camera":m=this.createCamera(f);break;case"Light":m=this.createLight(f);break;case"Mesh":m=this.createMesh(f,e,i);break;case"NurbsCurve":m=this.createCurve(f,e);break;case"LimbNode":case"Root":m=new Ll;break;case"Null":default:m=new So;break}m.name=d.attrName?Gt.sanitizeNodeName(d.attrName):"",m.userData.originalName=d.attrName,m.ID=u}this.getTransformData(m,d),s.set(u,m)}return s}buildSkeleton(t,e,i,s){let o=null;return t.parents.forEach(function(c){for(const u in e){const d=e[u];d.rawBones.forEach(function(f,m){if(f.ID===c.ID){const y=o;o=new Ll,o.matrixWorld.copy(f.transformLink),o.name=s?Gt.sanitizeNodeName(s):"",o.userData.originalName=s,o.ID=i,d.bones[m]=o,y!==null&&o.add(y)}})}}),o}createCamera(t){let e,i;if(t.children.forEach(function(s){const o=Dt.Objects.NodeAttribute[s.ID];o!==void 0&&(i=o)}),i===void 0)e=new te;else{let s=0;i.CameraProjectionType!==void 0&&i.CameraProjectionType.value===1&&(s=1);let o=1;i.NearPlane!==void 0&&(o=i.NearPlane.value/1e3);let c=1e3;i.FarPlane!==void 0&&(c=i.FarPlane.value/1e3);let u=window.innerWidth,d=window.innerHeight;i.AspectWidth!==void 0&&i.AspectHeight!==void 0&&(u=i.AspectWidth.value,d=i.AspectHeight.value);const f=u/d;let m=45;i.FieldOfView!==void 0&&(m=i.FieldOfView.value);const y=i.FocalLength?i.FocalLength.value:null;switch(s){case 0:e=new Bi(m,f,o,c),y!==null&&e.setFocalLength(y);break;case 1:e=new Zh(-u/2,u/2,d/2,-d/2,o,c);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+s+"."),e=new te;break}}return e}createLight(t){let e,i;if(t.children.forEach(function(s){const o=Dt.Objects.NodeAttribute[s.ID];o!==void 0&&(i=o)}),i===void 0)e=new te;else{let s;i.LightType===void 0?s=0:s=i.LightType.value;let o=16777215;i.Color!==void 0&&(o=new oe().fromArray(i.Color.value).convertSRGBToLinear());let c=i.Intensity===void 0?1:i.Intensity.value/100;i.CastLightOnObject!==void 0&&i.CastLightOnObject.value===0&&(c=0);let u=0;i.FarAttenuationEnd!==void 0&&(i.EnableFarAttenuation!==void 0&&i.EnableFarAttenuation.value===0?u=0:u=i.FarAttenuationEnd.value);const d=1;switch(s){case 0:e=new Vh(o,c,u,d);break;case 1:e=new Uy(o,c);break;case 2:let f=Math.PI/3;i.InnerAngle!==void 0&&(f=ye.degToRad(i.InnerAngle.value));let m=0;i.OuterAngle!==void 0&&(m=ye.degToRad(i.OuterAngle.value),m=Math.max(m,1)),e=new Hy(o,c,u,f,m,d);break;default:console.warn("THREE.FBXLoader: Unknown light type "+i.LightType.value+", defaulting to a PointLight."),e=new Vh(o,c);break}i.CastShadows!==void 0&&i.CastShadows.value===1&&(e.castShadow=!0)}return e}createMesh(t,e,i){let s,o=null,c=null;const u=[];return t.children.forEach(function(d){e.has(d.ID)&&(o=e.get(d.ID)),i.has(d.ID)&&u.push(i.get(d.ID))}),u.length>1?c=u:u.length>0?c=u[0]:(c=new Eo({name:In.DEFAULT_MATERIAL_NAME,color:13421772}),u.push(c)),"color"in o.attributes&&u.forEach(function(d){d.vertexColors=!0}),o.FBX_Deformer?(s=new Ny(o,c),s.normalizeSkinWeights()):s=new Ii(o,c),s}createCurve(t,e){const i=t.children.reduce(function(o,c){return e.has(c.ID)&&(o=e.get(c.ID)),o},null),s=new Ao({name:In.DEFAULT_MATERIAL_NAME,color:3342591,linewidth:1});return new Hl(i,s)}getTransformData(t,e){const i={};"InheritType"in e&&(i.inheritType=parseInt(e.InheritType.value)),"RotationOrder"in e?i.eulerOrder=e0(e.RotationOrder.value):i.eulerOrder="ZYX","Lcl_Translation"in e&&(i.translation=e.Lcl_Translation.value),"PreRotation"in e&&(i.preRotation=e.PreRotation.value),"Lcl_Rotation"in e&&(i.rotation=e.Lcl_Rotation.value),"PostRotation"in e&&(i.postRotation=e.PostRotation.value),"Lcl_Scaling"in e&&(i.scale=e.Lcl_Scaling.value),"ScalingOffset"in e&&(i.scalingOffset=e.ScalingOffset.value),"ScalingPivot"in e&&(i.scalingPivot=e.ScalingPivot.value),"RotationOffset"in e&&(i.rotationOffset=e.RotationOffset.value),"RotationPivot"in e&&(i.rotationPivot=e.RotationPivot.value),t.userData.transformData=i}setLookAtProperties(t,e){"LookAtProperty"in e&&he.get(t.ID).children.forEach(function(s){if(s.relationship==="LookAtProperty"){const o=Dt.Objects.Model[s.ID];if("Lcl_Translation"in o){const c=o.Lcl_Translation.value;t.target!==void 0?(t.target.position.fromArray(c),Ue.add(t.target)):t.lookAt(new L().fromArray(c))}}})}bindSkeleton(t,e,i){const s=this.parsePoseNodes();for(const o in t){const c=t[o];he.get(parseInt(c.ID)).parents.forEach(function(d){if(e.has(d.ID)){const f=d.ID;he.get(f).parents.forEach(function(y){i.has(y.ID)&&i.get(y.ID).bind(new jl(c.bones),s[y.ID])})}})}}parsePoseNodes(){const t={};if("Pose"in Dt.Objects){const e=Dt.Objects.Pose;for(const i in e)if(e[i].attrType==="BindPose"&&e[i].NbPoseNodes>0){const s=e[i].PoseNode;Array.isArray(s)?s.forEach(function(o){t[o.Node]=new Mt().fromArray(o.Matrix.a)}):t[s.Node]=new Mt().fromArray(s.Matrix.a)}}return t}addGlobalSceneSettings(){if("GlobalSettings"in Dt){if("AmbientColor"in Dt.GlobalSettings){const t=Dt.GlobalSettings.AmbientColor.value,e=t[0],i=t[1],s=t[2];if(e!==0||i!==0||s!==0){const o=new oe(e,i,s).convertSRGBToLinear();Ue.add(new Wy(o,1))}}"UnitScaleFactor"in Dt.GlobalSettings&&(Ue.userData.unitScaleFactor=Dt.GlobalSettings.UnitScaleFactor.value)}}}class D1{constructor(){this.negativeMaterialIndices=!1}parse(t){const e=new Map;if("Geometry"in Dt.Objects){const i=Dt.Objects.Geometry;for(const s in i){const o=he.get(parseInt(s)),c=this.parseGeometry(o,i[s],t);e.set(parseInt(s),c)}}return this.negativeMaterialIndices===!0&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),e}parseGeometry(t,e,i){switch(e.attrType){case"Mesh":return this.parseMeshGeometry(t,e,i);case"NurbsCurve":return this.parseNurbsGeometry(e)}}parseMeshGeometry(t,e,i){const s=i.skeletons,o=[],c=t.parents.map(function(y){return Dt.Objects.Model[y.ID]});if(c.length===0)return;const u=t.children.reduce(function(y,v){return s[v.ID]!==void 0&&(y=s[v.ID]),y},null);t.children.forEach(function(y){i.morphTargets[y.ID]!==void 0&&o.push(i.morphTargets[y.ID])});const d=c[0],f={};"RotationOrder"in d&&(f.eulerOrder=e0(d.RotationOrder.value)),"InheritType"in d&&(f.inheritType=parseInt(d.InheritType.value)),"GeometricTranslation"in d&&(f.translation=d.GeometricTranslation.value),"GeometricRotation"in d&&(f.rotation=d.GeometricRotation.value),"GeometricScaling"in d&&(f.scale=d.GeometricScaling.value);const m=t0(f);return this.genGeometry(e,u,o,m)}genGeometry(t,e,i,s){const o=new mn;t.attrName&&(o.name=t.attrName);const c=this.parseGeoNode(t,e),u=this.genBuffers(c),d=new ae(u.vertex,3);if(d.applyMatrix4(s),o.setAttribute("position",d),u.colors.length>0&&o.setAttribute("color",new ae(u.colors,3)),e&&(o.setAttribute("skinIndex",new Py(u.weightsIndices,4)),o.setAttribute("skinWeight",new ae(u.vertexWeights,4)),o.FBX_Deformer=e),u.normal.length>0){const f=new Dn().getNormalMatrix(s),m=new ae(u.normal,3);m.applyNormalMatrix(f),o.setAttribute("normal",m)}if(u.uvs.forEach(function(f,m){const y=m===0?"uv":`uv${m}`;o.setAttribute(y,new ae(u.uvs[m],2))}),c.material&&c.material.mappingType!=="AllSame"){let f=u.materialIndex[0],m=0;if(u.materialIndex.forEach(function(y,v){y!==f&&(o.addGroup(m,v-m,f),f=y,m=v)}),o.groups.length>0){const y=o.groups[o.groups.length-1],v=y.start+y.count;v!==u.materialIndex.length&&o.addGroup(v,u.materialIndex.length-v,f)}o.groups.length===0&&o.addGroup(0,u.materialIndex.length,u.materialIndex[0])}return this.addMorphTargets(o,t,i,s),o}parseGeoNode(t,e){const i={};if(i.vertexPositions=t.Vertices!==void 0?t.Vertices.a:[],i.vertexIndices=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],t.LayerElementColor&&(i.color=this.parseVertexColors(t.LayerElementColor[0])),t.LayerElementMaterial&&(i.material=this.parseMaterialIndices(t.LayerElementMaterial[0])),t.LayerElementNormal&&(i.normal=this.parseNormals(t.LayerElementNormal[0])),t.LayerElementUV){i.uv=[];let s=0;for(;t.LayerElementUV[s];)t.LayerElementUV[s].UV&&i.uv.push(this.parseUVs(t.LayerElementUV[s])),s++}return i.weightTable={},e!==null&&(i.skeleton=e,e.rawBones.forEach(function(s,o){s.indices.forEach(function(c,u){i.weightTable[c]===void 0&&(i.weightTable[c]=[]),i.weightTable[c].push({id:o,weight:s.weights[u]})})})),i}genBuffers(t){const e={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let i=0,s=0,o=!1,c=[],u=[],d=[],f=[],m=[],y=[];const v=this;return t.vertexIndices.forEach(function(x,k){let S,_=!1;x<0&&(x=x^-1,_=!0);let z=[],H=[];if(c.push(x*3,x*3+1,x*3+2),t.color){const F=Sl(k,i,x,t.color);d.push(F[0],F[1],F[2])}if(t.skeleton){if(t.weightTable[x]!==void 0&&t.weightTable[x].forEach(function(F){H.push(F.weight),z.push(F.id)}),H.length>4){o||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),o=!0);const F=[0,0,0,0],I=[0,0,0,0];H.forEach(function(O,q){let G=O,Y=z[q];I.forEach(function(ct,pt,et){if(G>ct){et[pt]=G,G=ct;const ht=F[pt];F[pt]=Y,Y=ht}})}),z=F,H=I}for(;H.length<4;)H.push(0),z.push(0);for(let F=0;F<4;++F)m.push(H[F]),y.push(z[F])}if(t.normal){const F=Sl(k,i,x,t.normal);u.push(F[0],F[1],F[2])}t.material&&t.material.mappingType!=="AllSame"&&(S=Sl(k,i,x,t.material)[0],S<0&&(v.negativeMaterialIndices=!0,S=0)),t.uv&&t.uv.forEach(function(F,I){const O=Sl(k,i,x,F);f[I]===void 0&&(f[I]=[]),f[I].push(O[0]),f[I].push(O[1])}),s++,_&&(v.genFace(e,t,c,S,u,d,f,m,y,s),i++,s=0,c=[],u=[],d=[],f=[],m=[],y=[])}),e}getNormalNewell(t){const e=new L(0,0,0);for(let i=0;i<t.length;i++){const s=t[i],o=t[(i+1)%t.length];e.x+=(s.y-o.y)*(s.z+o.z),e.y+=(s.z-o.z)*(s.x+o.x),e.z+=(s.x-o.x)*(s.y+o.y)}return e.normalize(),e}getNormalTangentAndBitangent(t){const e=this.getNormalNewell(t),s=(Math.abs(e.z)>.5?new L(0,1,0):new L(0,0,1)).cross(e).normalize(),o=e.clone().cross(s).normalize();return{normal:e,tangent:s,bitangent:o}}flattenVertex(t,e,i){return new Qt(t.dot(e),t.dot(i))}genFace(t,e,i,s,o,c,u,d,f,m){let y;if(m>3){const v=[];for(let _=0;_<i.length;_+=3)v.push(new L(e.vertexPositions[i[_]],e.vertexPositions[i[_+1]],e.vertexPositions[i[_+2]]));const{tangent:x,bitangent:k}=this.getNormalTangentAndBitangent(v),S=[];for(const _ of v)S.push(this.flattenVertex(_,x,k));y=Yh.triangulateShape(S,[])}else y=[[0,1,2]];for(const[v,x,k]of y)t.vertex.push(e.vertexPositions[i[v*3]]),t.vertex.push(e.vertexPositions[i[v*3+1]]),t.vertex.push(e.vertexPositions[i[v*3+2]]),t.vertex.push(e.vertexPositions[i[x*3]]),t.vertex.push(e.vertexPositions[i[x*3+1]]),t.vertex.push(e.vertexPositions[i[x*3+2]]),t.vertex.push(e.vertexPositions[i[k*3]]),t.vertex.push(e.vertexPositions[i[k*3+1]]),t.vertex.push(e.vertexPositions[i[k*3+2]]),e.skeleton&&(t.vertexWeights.push(d[v*4]),t.vertexWeights.push(d[v*4+1]),t.vertexWeights.push(d[v*4+2]),t.vertexWeights.push(d[v*4+3]),t.vertexWeights.push(d[x*4]),t.vertexWeights.push(d[x*4+1]),t.vertexWeights.push(d[x*4+2]),t.vertexWeights.push(d[x*4+3]),t.vertexWeights.push(d[k*4]),t.vertexWeights.push(d[k*4+1]),t.vertexWeights.push(d[k*4+2]),t.vertexWeights.push(d[k*4+3]),t.weightsIndices.push(f[v*4]),t.weightsIndices.push(f[v*4+1]),t.weightsIndices.push(f[v*4+2]),t.weightsIndices.push(f[v*4+3]),t.weightsIndices.push(f[x*4]),t.weightsIndices.push(f[x*4+1]),t.weightsIndices.push(f[x*4+2]),t.weightsIndices.push(f[x*4+3]),t.weightsIndices.push(f[k*4]),t.weightsIndices.push(f[k*4+1]),t.weightsIndices.push(f[k*4+2]),t.weightsIndices.push(f[k*4+3])),e.color&&(t.colors.push(c[v*3]),t.colors.push(c[v*3+1]),t.colors.push(c[v*3+2]),t.colors.push(c[x*3]),t.colors.push(c[x*3+1]),t.colors.push(c[x*3+2]),t.colors.push(c[k*3]),t.colors.push(c[k*3+1]),t.colors.push(c[k*3+2])),e.material&&e.material.mappingType!=="AllSame"&&(t.materialIndex.push(s),t.materialIndex.push(s),t.materialIndex.push(s)),e.normal&&(t.normal.push(o[v*3]),t.normal.push(o[v*3+1]),t.normal.push(o[v*3+2]),t.normal.push(o[x*3]),t.normal.push(o[x*3+1]),t.normal.push(o[x*3+2]),t.normal.push(o[k*3]),t.normal.push(o[k*3+1]),t.normal.push(o[k*3+2])),e.uv&&e.uv.forEach(function(S,_){t.uvs[_]===void 0&&(t.uvs[_]=[]),t.uvs[_].push(u[_][v*2]),t.uvs[_].push(u[_][v*2+1]),t.uvs[_].push(u[_][x*2]),t.uvs[_].push(u[_][x*2+1]),t.uvs[_].push(u[_][k*2]),t.uvs[_].push(u[_][k*2+1])})}addMorphTargets(t,e,i,s){if(i.length===0)return;t.morphTargetsRelative=!0,t.morphAttributes.position=[];const o=this;i.forEach(function(c){c.rawTargets.forEach(function(u){const d=Dt.Objects.Geometry[u.geoID];d!==void 0&&o.genMorphGeometry(t,e,d,s,u.name)})})}genMorphGeometry(t,e,i,s,o){const c=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],u=i.Vertices!==void 0?i.Vertices.a:[],d=i.Indexes!==void 0?i.Indexes.a:[],f=t.attributes.position.count*3,m=new Float32Array(f);for(let k=0;k<d.length;k++){const S=d[k]*3;m[S]=u[k*3],m[S+1]=u[k*3+1],m[S+2]=u[k*3+2]}const y={vertexIndices:c,vertexPositions:m},v=this.genBuffers(y),x=new ae(v.vertex,3);x.name=o||i.attrName,x.applyMatrix4(s),t.morphAttributes.position.push(x)}parseNormals(t){const e=t.MappingInformationType,i=t.ReferenceInformationType,s=t.Normals.a;let o=[];return i==="IndexToDirect"&&("NormalIndex"in t?o=t.NormalIndex.a:"NormalsIndex"in t&&(o=t.NormalsIndex.a)),{dataSize:3,buffer:s,indices:o,mappingType:e,referenceType:i}}parseUVs(t){const e=t.MappingInformationType,i=t.ReferenceInformationType,s=t.UV.a;let o=[];return i==="IndexToDirect"&&(o=t.UVIndex.a),{dataSize:2,buffer:s,indices:o,mappingType:e,referenceType:i}}parseVertexColors(t){const e=t.MappingInformationType,i=t.ReferenceInformationType,s=t.Colors.a;let o=[];i==="IndexToDirect"&&(o=t.ColorIndex.a);for(let c=0,u=new oe;c<s.length;c+=4)u.fromArray(s,c).convertSRGBToLinear().toArray(s,c);return{dataSize:4,buffer:s,indices:o,mappingType:e,referenceType:i}}parseMaterialIndices(t){const e=t.MappingInformationType,i=t.ReferenceInformationType;if(e==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:i};const s=t.Materials.a,o=[];for(let c=0;c<s.length;++c)o.push(c);return{dataSize:1,buffer:s,indices:o,mappingType:e,referenceType:i}}parseNurbsGeometry(t){const e=parseInt(t.Order);if(isNaN(e))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",t.Order,t.id),new mn;const i=e-1,s=t.KnotVector.a,o=[],c=t.Points.a;for(let y=0,v=c.length;y<v;y+=4)o.push(new ge().fromArray(c,y));let u,d;if(t.Form==="Closed")o.push(o[0]);else if(t.Form==="Periodic"){u=i,d=s.length-1-u;for(let y=0;y<i;++y)o.push(o[y])}const m=new F1(i,s,o,u,d).getPoints(o.length*12);return new mn().setFromPoints(m)}}class O1{parse(){const t=[],e=this.parseClips();if(e!==void 0)for(const i in e){const s=e[i],o=this.addClip(s);t.push(o)}return t}parseClips(){if(Dt.Objects.AnimationCurve===void 0)return;const t=this.parseAnimationCurveNodes();this.parseAnimationCurves(t);const e=this.parseAnimationLayers(t);return this.parseAnimStacks(e)}parseAnimationCurveNodes(){const t=Dt.Objects.AnimationCurveNode,e=new Map;for(const i in t){const s=t[i];if(s.attrName.match(/S|R|T|DeformPercent/)!==null){const o={id:s.id,attr:s.attrName,curves:{}};e.set(o.id,o)}}return e}parseAnimationCurves(t){const e=Dt.Objects.AnimationCurve;for(const i in e){const s={id:e[i].id,times:e[i].KeyTime.a.map(U1),values:e[i].KeyValueFloat.a},o=he.get(s.id);if(o!==void 0){const c=o.parents[0].ID,u=o.parents[0].relationship;u.match(/X/)?t.get(c).curves.x=s:u.match(/Y/)?t.get(c).curves.y=s:u.match(/Z/)?t.get(c).curves.z=s:u.match(/DeformPercent/)&&t.has(c)&&(t.get(c).curves.morph=s)}}}parseAnimationLayers(t){const e=Dt.Objects.AnimationLayer,i=new Map;for(const s in e){const o=[],c=he.get(parseInt(s));c!==void 0&&(c.children.forEach(function(d,f){if(t.has(d.ID)){const m=t.get(d.ID);if(m.curves.x!==void 0||m.curves.y!==void 0||m.curves.z!==void 0){if(o[f]===void 0){const y=he.get(d.ID).parents.filter(function(v){return v.relationship!==void 0})[0].ID;if(y!==void 0){const v=Dt.Objects.Model[y.toString()];if(v===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",d);return}const x={modelName:v.attrName?Gt.sanitizeNodeName(v.attrName):"",ID:v.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Ue.traverse(function(k){k.ID===v.id&&(x.transform=k.matrix,k.userData.transformData&&(x.eulerOrder=k.userData.transformData.eulerOrder))}),x.transform||(x.transform=new Mt),"PreRotation"in v&&(x.preRotation=v.PreRotation.value),"PostRotation"in v&&(x.postRotation=v.PostRotation.value),o[f]=x}}o[f]&&(o[f][m.attr]=m)}else if(m.curves.morph!==void 0){if(o[f]===void 0){const y=he.get(d.ID).parents.filter(function(z){return z.relationship!==void 0})[0].ID,v=he.get(y).parents[0].ID,x=he.get(v).parents[0].ID,k=he.get(x).parents[0].ID,S=Dt.Objects.Model[k],_={modelName:S.attrName?Gt.sanitizeNodeName(S.attrName):"",morphName:Dt.Objects.Deformer[y].attrName};o[f]=_}o[f][m.attr]=m}}}),i.set(parseInt(s),o))}return i}parseAnimStacks(t){const e=Dt.Objects.AnimationStack,i={};for(const s in e){const o=he.get(parseInt(s)).children;o.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const c=t.get(o[0].ID);i[s]={name:e[s].attrName,layer:c}}return i}addClip(t){let e=[];const i=this;return t.layer.forEach(function(s){e=e.concat(i.generateTracks(s))}),new Bh(t.name,-1,e)}generateTracks(t){const e=[];let i=new L,s=new L;if(t.transform&&t.transform.decompose(i,new Ie,s),i=i.toArray(),s=s.toArray(),t.T!==void 0&&Object.keys(t.T.curves).length>0){const o=this.generateVectorTrack(t.modelName,t.T.curves,i,"position");o!==void 0&&e.push(o)}if(t.R!==void 0&&Object.keys(t.R.curves).length>0){const o=this.generateRotationTrack(t.modelName,t.R.curves,t.preRotation,t.postRotation,t.eulerOrder);o!==void 0&&e.push(o)}if(t.S!==void 0&&Object.keys(t.S.curves).length>0){const o=this.generateVectorTrack(t.modelName,t.S.curves,s,"scale");o!==void 0&&e.push(o)}if(t.DeformPercent!==void 0){const o=this.generateMorphTrack(t);o!==void 0&&e.push(o)}return e}generateVectorTrack(t,e,i,s){const o=this.getTimesForAllAxes(e),c=this.getKeyframeTrackValues(o,e,i);return new yr(t+"."+s,o,c)}generateRotationTrack(t,e,i,s,o){let c,u;if(e.x!==void 0&&e.y!==void 0&&e.z!==void 0){const y=this.interpolateRotations(e.x,e.y,e.z,o);c=y[0],u=y[1]}i!==void 0&&(i=i.map(ye.degToRad),i.push(o),i=new we().fromArray(i),i=new Ie().setFromEuler(i)),s!==void 0&&(s=s.map(ye.degToRad),s.push(o),s=new we().fromArray(s),s=new Ie().setFromEuler(s).invert());const d=new Ie,f=new we,m=[];if(!u||!c)return new Vi(t+".quaternion",[0],[0]);for(let y=0;y<u.length;y+=3)f.set(u[y],u[y+1],u[y+2],o),d.setFromEuler(f),i!==void 0&&d.premultiply(i),s!==void 0&&d.multiply(s),y>2&&new Ie().fromArray(m,(y-3)/3*4).dot(d)<0&&d.set(-d.x,-d.y,-d.z,-d.w),d.toArray(m,y/3*4);return new Vi(t+".quaternion",c,m)}generateMorphTrack(t){const e=t.DeformPercent.curves.morph,i=e.values.map(function(o){return o/100}),s=Ue.getObjectByName(t.modelName).morphTargetDictionary[t.morphName];return new Ro(t.modelName+".morphTargetInfluences["+s+"]",e.times,i)}getTimesForAllAxes(t){let e=[];if(t.x!==void 0&&(e=e.concat(t.x.times)),t.y!==void 0&&(e=e.concat(t.y.times)),t.z!==void 0&&(e=e.concat(t.z.times)),e=e.sort(function(i,s){return i-s}),e.length>1){let i=1,s=e[0];for(let o=1;o<e.length;o++){const c=e[o];c!==s&&(e[i]=c,s=c,i++)}e=e.slice(0,i)}return e}getKeyframeTrackValues(t,e,i){const s=i,o=[];let c=-1,u=-1,d=-1;return t.forEach(function(f){if(e.x&&(c=e.x.times.indexOf(f)),e.y&&(u=e.y.times.indexOf(f)),e.z&&(d=e.z.times.indexOf(f)),c!==-1){const m=e.x.values[c];o.push(m),s[0]=m}else o.push(s[0]);if(u!==-1){const m=e.y.values[u];o.push(m),s[1]=m}else o.push(s[1]);if(d!==-1){const m=e.z.values[d];o.push(m),s[2]=m}else o.push(s[2])}),o}interpolateRotations(t,e,i,s){const o=[],c=[];o.push(t.times[0]),c.push(ye.degToRad(t.values[0])),c.push(ye.degToRad(e.values[0])),c.push(ye.degToRad(i.values[0]));for(let u=1;u<t.values.length;u++){const d=[t.values[u-1],e.values[u-1],i.values[u-1]];if(isNaN(d[0])||isNaN(d[1])||isNaN(d[2]))continue;const f=d.map(ye.degToRad),m=[t.values[u],e.values[u],i.values[u]];if(isNaN(m[0])||isNaN(m[1])||isNaN(m[2]))continue;const y=m.map(ye.degToRad),v=[m[0]-d[0],m[1]-d[1],m[2]-d[2]],x=[Math.abs(v[0]),Math.abs(v[1]),Math.abs(v[2])];if(x[0]>=180||x[1]>=180||x[2]>=180){const S=Math.max(...x)/180,_=new we(...f,s),z=new we(...y,s),H=new Ie().setFromEuler(_),F=new Ie().setFromEuler(z);H.dot(F)&&F.set(-F.x,-F.y,-F.z,-F.w);const I=t.times[u-1],O=t.times[u]-I,q=new Ie,G=new we;for(let Y=0;Y<1;Y+=1/S)q.copy(H.clone().slerp(F.clone(),Y)),o.push(I+Y*O),G.setFromQuaternion(q,s),c.push(G.x),c.push(G.y),c.push(G.z)}else o.push(t.times[u]),c.push(ye.degToRad(t.values[u])),c.push(ye.degToRad(e.values[u])),c.push(ye.degToRad(i.values[u]))}return[o,c]}}class B1{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(t){this.nodeStack.push(t),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(t,e){this.currentProp=t,this.currentPropName=e}parse(t){this.currentIndent=0,this.allNodes=new $y,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const e=this,i=t.split(/[\r\n]+/);return i.forEach(function(s,o){const c=s.match(/^[\s\t]*;/),u=s.match(/^[\s\t]*$/);if(c||u)return;const d=s.match("^\\t{"+e.currentIndent+"}(\\w+):(.*){",""),f=s.match("^\\t{"+e.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),m=s.match("^\\t{"+(e.currentIndent-1)+"}}");d?e.parseNodeBegin(s,d):f?e.parseNodeProperty(s,f,i[++o]):m?e.popStack():s.match(/^[^\s\t}]/)&&e.parseNodePropertyContinued(s)}),this.allNodes}parseNodeBegin(t,e){const i=e[1].trim().replace(/^"/,"").replace(/"$/,""),s=e[2].split(",").map(function(d){return d.trim().replace(/^"/,"").replace(/"$/,"")}),o={name:i},c=this.parseNodeAttr(s),u=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(i,o):i in u?(i==="PoseNode"?u.PoseNode.push(o):u[i].id!==void 0&&(u[i]={},u[i][u[i].id]=u[i]),c.id!==""&&(u[i][c.id]=o)):typeof c.id=="number"?(u[i]={},u[i][c.id]=o):i!=="Properties70"&&(i==="PoseNode"?u[i]=[o]:u[i]=o),typeof c.id=="number"&&(o.id=c.id),c.name!==""&&(o.attrName=c.name),c.type!==""&&(o.attrType=c.type),this.pushStack(o)}parseNodeAttr(t){let e=t[0];t[0]!==""&&(e=parseInt(t[0]),isNaN(e)&&(e=t[0]));let i="",s="";return t.length>1&&(i=t[1].replace(/^(\w+)::/,""),s=t[2]),{id:e,name:i,type:s}}parseNodeProperty(t,e,i){let s=e[1].replace(/^"/,"").replace(/"$/,"").trim(),o=e[2].replace(/^"/,"").replace(/"$/,"").trim();s==="Content"&&o===","&&(o=i.replace(/"/g,"").replace(/,$/,"").trim());const c=this.getCurrentNode();if(c.name==="Properties70"){this.parseNodeSpecialProperty(t,s,o);return}if(s==="C"){const d=o.split(",").slice(1),f=parseInt(d[0]),m=parseInt(d[1]);let y=o.split(",").slice(3);y=y.map(function(v){return v.trim().replace(/^"/,"")}),s="connections",o=[f,m],G1(o,y),c[s]===void 0&&(c[s]=[])}s==="Node"&&(c.id=o),s in c&&Array.isArray(c[s])?c[s].push(o):s!=="a"?c[s]=o:c.a=o,this.setCurrentProp(c,s),s==="a"&&o.slice(-1)!==","&&(c.a=vh(o))}parseNodePropertyContinued(t){const e=this.getCurrentNode();e.a+=t,t.slice(-1)!==","&&(e.a=vh(e.a))}parseNodeSpecialProperty(t,e,i){const s=i.split('",').map(function(m){return m.trim().replace(/^\"/,"").replace(/\s/,"_")}),o=s[0],c=s[1],u=s[2],d=s[3];let f=s[4];switch(c){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":f=parseFloat(f);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":f=vh(f);break}this.getPrevNode()[o]={type:c,type2:u,flag:d,value:f},this.setCurrentProp(this.getPrevNode(),o)}}class V1{parse(t){const e=new qm(t);e.skip(23);const i=e.getUint32();if(i<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+i);const s=new $y;for(;!this.endOfContent(e);){const o=this.parseNode(e,i);o!==null&&s.add(o.name,o)}return s}endOfContent(t){return t.size()%16===0?(t.getOffset()+160+16&-16)>=t.size():t.getOffset()+160+16>=t.size()}parseNode(t,e){const i={},s=e>=7500?t.getUint64():t.getUint32(),o=e>=7500?t.getUint64():t.getUint32();e>=7500?t.getUint64():t.getUint32();const c=t.getUint8(),u=t.getString(c);if(s===0)return null;const d=[];for(let v=0;v<o;v++)d.push(this.parseProperty(t));const f=d.length>0?d[0]:"",m=d.length>1?d[1]:"",y=d.length>2?d[2]:"";for(i.singleProperty=o===1&&t.getOffset()===s;s>t.getOffset();){const v=this.parseNode(t,e);v!==null&&this.parseSubNode(u,i,v)}return i.propertyList=d,typeof f=="number"&&(i.id=f),m!==""&&(i.attrName=m),y!==""&&(i.attrType=y),u!==""&&(i.name=u),i}parseSubNode(t,e,i){if(i.singleProperty===!0){const s=i.propertyList[0];Array.isArray(s)?(e[i.name]=i,i.a=s):e[i.name]=s}else if(t==="Connections"&&i.name==="C"){const s=[];i.propertyList.forEach(function(o,c){c!==0&&s.push(o)}),e.connections===void 0&&(e.connections=[]),e.connections.push(s)}else if(i.name==="Properties70")Object.keys(i).forEach(function(o){e[o]=i[o]});else if(t==="Properties70"&&i.name==="P"){let s=i.propertyList[0],o=i.propertyList[1];const c=i.propertyList[2],u=i.propertyList[3];let d;s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),o.indexOf("Lcl ")===0&&(o=o.replace("Lcl ","Lcl_")),o==="Color"||o==="ColorRGB"||o==="Vector"||o==="Vector3D"||o.indexOf("Lcl_")===0?d=[i.propertyList[4],i.propertyList[5],i.propertyList[6]]:d=i.propertyList[4],e[s]={type:o,type2:c,flag:u,value:d}}else e[i.name]===void 0?typeof i.id=="number"?(e[i.name]={},e[i.name][i.id]=i):e[i.name]=i:i.name==="PoseNode"?(Array.isArray(e[i.name])||(e[i.name]=[e[i.name]]),e[i.name].push(i)):e[i.name][i.id]===void 0&&(e[i.name][i.id]=i)}parseProperty(t){const e=t.getString(1);let i;switch(e){case"C":return t.getBoolean();case"D":return t.getFloat64();case"F":return t.getFloat32();case"I":return t.getInt32();case"L":return t.getInt64();case"R":return i=t.getUint32(),t.getArrayBuffer(i);case"S":return i=t.getUint32(),t.getString(i);case"Y":return t.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const s=t.getUint32(),o=t.getUint32(),c=t.getUint32();if(o===0)switch(e){case"b":case"c":return t.getBooleanArray(s);case"d":return t.getFloat64Array(s);case"f":return t.getFloat32Array(s);case"i":return t.getInt32Array(s);case"l":return t.getInt64Array(s)}const u=b1(new Uint8Array(t.getArrayBuffer(c))),d=new qm(u.buffer);switch(e){case"b":case"c":return d.getBooleanArray(s);case"d":return d.getFloat64Array(s);case"f":return d.getFloat32Array(s);case"i":return d.getInt32Array(s);case"l":return d.getInt64Array(s)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+e)}}}class qm{constructor(t,e){this.dv=new DataView(t),this.offset=0,this.littleEndian=e!==void 0?e:!0,this._textDecoder=new TextDecoder}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(t){this.offset+=t}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(t){const e=[];for(let i=0;i<t;i++)e.push(this.getBoolean());return e}getUint8(){const t=this.dv.getUint8(this.offset);return this.offset+=1,t}getInt16(){const t=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}getInt32(){const t=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}getInt32Array(t){const e=[];for(let i=0;i<t;i++)e.push(this.getInt32());return e}getUint32(){const t=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}getInt64(){let t,e;return this.littleEndian?(t=this.getUint32(),e=this.getUint32()):(e=this.getUint32(),t=this.getUint32()),e&2147483648?(e=~e&4294967295,t=~t&4294967295,t===4294967295&&(e=e+1&4294967295),t=t+1&4294967295,-(e*4294967296+t)):e*4294967296+t}getInt64Array(t){const e=[];for(let i=0;i<t;i++)e.push(this.getInt64());return e}getUint64(){let t,e;return this.littleEndian?(t=this.getUint32(),e=this.getUint32()):(e=this.getUint32(),t=this.getUint32()),e*4294967296+t}getFloat32(){const t=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}getFloat32Array(t){const e=[];for(let i=0;i<t;i++)e.push(this.getFloat32());return e}getFloat64(){const t=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}getFloat64Array(t){const e=[];for(let i=0;i<t;i++)e.push(this.getFloat64());return e}getArrayBuffer(t){const e=this.dv.buffer.slice(this.offset,this.offset+t);return this.offset+=t,e}getString(t){const e=this.offset;let i=new Uint8Array(this.dv.buffer,e,t);this.skip(t);const s=i.indexOf(0);return s>=0&&(i=new Uint8Array(this.dv.buffer,e,s)),this._textDecoder.decode(i)}}class $y{add(t,e){this[t]=e}}function j1(l){const t="Kaydara FBX Binary  \0";return l.byteLength>=t.length&&t===n0(l,0,t.length)}function H1(l){const t=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let e=0;function i(s){const o=l[s-1];return l=l.slice(e+s),e++,o}for(let s=0;s<t.length;++s)if(i(1)===t[s])return!1;return!0}function Km(l){const t=/FBXVersion: (\d+)/,e=l.match(t);if(e)return parseInt(e[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function U1(l){return l/46186158e3}const W1=[];function Sl(l,t,e,i){let s;switch(i.mappingType){case"ByPolygonVertex":s=l;break;case"ByPolygon":s=t;break;case"ByVertice":s=e;break;case"AllSame":s=i.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+i.mappingType)}i.referenceType==="IndexToDirect"&&(s=i.indices[s]);const o=s*i.dataSize,c=o+i.dataSize;return q1(W1,i.buffer,o,c)}const gh=new we,cs=new L;function t0(l){const t=new Mt,e=new Mt,i=new Mt,s=new Mt,o=new Mt,c=new Mt,u=new Mt,d=new Mt,f=new Mt,m=new Mt,y=new Mt,v=new Mt,x=l.inheritType?l.inheritType:0;if(l.translation&&t.setPosition(cs.fromArray(l.translation)),l.preRotation){const pt=l.preRotation.map(ye.degToRad);pt.push(l.eulerOrder||we.DEFAULT_ORDER),e.makeRotationFromEuler(gh.fromArray(pt))}if(l.rotation){const pt=l.rotation.map(ye.degToRad);pt.push(l.eulerOrder||we.DEFAULT_ORDER),i.makeRotationFromEuler(gh.fromArray(pt))}if(l.postRotation){const pt=l.postRotation.map(ye.degToRad);pt.push(l.eulerOrder||we.DEFAULT_ORDER),s.makeRotationFromEuler(gh.fromArray(pt)),s.invert()}l.scale&&o.scale(cs.fromArray(l.scale)),l.scalingOffset&&u.setPosition(cs.fromArray(l.scalingOffset)),l.scalingPivot&&c.setPosition(cs.fromArray(l.scalingPivot)),l.rotationOffset&&d.setPosition(cs.fromArray(l.rotationOffset)),l.rotationPivot&&f.setPosition(cs.fromArray(l.rotationPivot)),l.parentMatrixWorld&&(y.copy(l.parentMatrix),m.copy(l.parentMatrixWorld));const k=e.clone().multiply(i).multiply(s),S=new Mt;S.extractRotation(m);const _=new Mt;_.copyPosition(m);const z=_.clone().invert().multiply(m),H=S.clone().invert().multiply(z),F=o,I=new Mt;if(x===0)I.copy(S).multiply(k).multiply(H).multiply(F);else if(x===1)I.copy(S).multiply(H).multiply(k).multiply(F);else{const et=new Mt().scale(new L().setFromMatrixScale(y)).clone().invert(),ht=H.clone().multiply(et);I.copy(S).multiply(k).multiply(ht).multiply(F)}const O=f.clone().invert(),q=c.clone().invert();let G=t.clone().multiply(d).multiply(f).multiply(e).multiply(i).multiply(s).multiply(O).multiply(u).multiply(c).multiply(o).multiply(q);const Y=new Mt().copyPosition(G),ct=m.clone().multiply(Y);return v.copyPosition(ct),G=v.clone().multiply(I),G.premultiply(m.invert()),G}function e0(l){l=l||0;const t=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return l===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),t[0]):t[l]}function vh(l){return l.split(",").map(function(e){return parseFloat(e)})}function n0(l,t,e){return t===void 0&&(t=0),e===void 0&&(e=l.byteLength),new TextDecoder().decode(new Uint8Array(l,t,e))}function G1(l,t){for(let e=0,i=l.length,s=t.length;e<s;e++,i++)l[i]=t[e]}function q1(l,t,e,i){for(let s=e,o=0;s<i;s++,o++)l[o]=t[s];return l}THREE.FBXLoader=L1;AFRAME.registerComponent("fbx-model",{schema:{src:{type:"asset"},crossorigin:{default:""}},init:function(){this.model=null},update:function(){const l=this.data;if(!l.src)return;this.remove();const t=new THREE.FBXLoader;l.crossorigin&&t.setCrossOrigin(l.crossorigin),t.load(l.src,this.load.bind(this))},load:function(l){this.model=l,this.el.setObject3D("mesh",l),this.el.emit("model-loaded",{format:"fbx",model:l})},remove:function(){this.model&&this.el.removeObject3D("mesh")}});var xh,Xm;function K1(){if(Xm)return xh;Xm=1;function l(){return"script_"+Date.now()+"_"+Math.ceil(Math.random()*1e5)}function t(c,u){var d=document.createElement("script");return d.type="text/javascript",d.async=!0,d.id=u,d.src=c,d}function e(c){const u=document.getElementById(c),d=u.parentNode;try{d&&d.removeChild(u)}catch{}}function i(c){const u=document.getElementsByTagName("script")[0];u.parentNode.insertBefore(c,u)}function s(c,u,d){return new d(function(f,m){const y=u.timeout||5e3,v=l(),x=t(c,v),k=setTimeout(function(){m(new Error("Script request to "+c+" timed out")),e(v)},y),S=function(_){clearTimeout(_)};x.addEventListener("load",function(_){f({ok:!0}),S(k),e(v)}),x.addEventListener("error",function(_){m(new Error("Script request to "+c+" failed "+_)),S(k),e(v)}),i(x)})}function o(c){return c=c||{},function(u,d){return d=d||{},s(u,d,c.Promise||Promise)}}return xh=o,xh}var wh,Zm;function X1(){if(Zm)return wh;Zm=1;const l=K1()(),t="https://cdn.jsdelivr.net/gh/mrdoob/three.js@r86/examples/js/loaders/GLTFLoader.js",e=function(){let i;return function(){return i=i||l(t),i}}();return wh=AFRAME.registerComponent("gltf-model-legacy",{schema:{type:"model"},init:function(){this.model=null,this.loader=null,this.loaderPromise=e().then(()=>{this.loader=new THREE.GLTFLoader,this.loader.setCrossOrigin("Anonymous")})},update:function(){const i=this,s=this.el,o=this.data;o&&(this.remove(),this.loaderPromise.then(()=>{this.loader.load(o,function(u){i.model=u.scene,i.model.animations=u.animations,s.setObject3D("mesh",i.model),s.emit("model-loaded",{format:"gltf",model:i.model})})}))},remove:function(){this.model&&this.el.removeObject3D("mesh")}}),wh}var Eh,Ym;function Z1(){return Ym||(Ym=1,Eh=AFRAME.registerComponent("object-model",{schema:{src:{type:"asset"},crossorigin:{default:""}},init:function(){this.model=null},update:function(){let l;const t=this.data;t.src&&(this.remove(),l=new THREE.ObjectLoader,t.crossorigin&&l.setCrossOrigin(t.crossorigin),l.load(t.src,e=>{e.traverse(i=>{i instanceof THREE.SkinnedMesh&&i.material&&(i.material.skinning=!!(i.geometry&&i.geometry.bones||[]).length)}),this.load(e)}))},load:function(l){this.model=l,this.el.setObject3D("mesh",l),this.el.emit("model-loaded",{format:"json",model:l})},remove:function(){this.model&&this.el.removeObject3D("mesh")}})),Eh}var Jm;function Y1(){return Jm||(Jm=1,pv(),X1(),Z1()),Hp}var Qm={},kh,$m;function J1(){return $m||($m=1,kh=AFRAME.registerComponent("checkpoint",{schema:{offset:{default:{x:0,y:0,z:0},type:"vec3"}},init:function(){this.active=!1,this.targetEl=null,this.fire=this.fire.bind(this),this.offset=new THREE.Vector3},update:function(){this.offset.copy(this.data.offset)},play:function(){this.el.addEventListener("click",this.fire)},pause:function(){this.el.removeEventListener("click",this.fire)},remove:function(){this.pause()},fire:function(){const l=this.el.sceneEl.querySelector("[checkpoint-controls]");if(!l)throw new Error("No `checkpoint-controls` component found.");l.components["checkpoint-controls"].setCheckpoint(this.el)},getOffset:function(){return this.offset.copy(this.data.offset)}})),kh}var Mh,ty;function Q1(){if(ty)return Mh;ty=1;function l(e){return e?Array.isArray(e)?e:e.materials?e.materials:[e]:[]}function t(e,i,s,o){e&&(i=i||[],e.traverse(c=>{if(!c.isMesh)return;l(c.material).forEach(d=>{d&&!("envMap"in d)||i.length&&i.indexOf(d.name)===-1||(d.envMap=s,d.reflectivity=o,d.needsUpdate=!0)})}))}return Mh=AFRAME.registerComponent("cube-env-map",{multiple:!0,schema:{path:{default:""},extension:{default:"jpg",oneOf:["jpg","png"]},enableBackground:{default:!1},reflectivity:{default:1,min:0,max:1},materials:{default:[]}},init:function(){const e=this.data;this.texture=new THREE.CubeTextureLoader().load([e.path+"posx."+e.extension,e.path+"negx."+e.extension,e.path+"posy."+e.extension,e.path+"negy."+e.extension,e.path+"posz."+e.extension,e.path+"negz."+e.extension]),this.texture.format=THREE.RGBAFormat,this.object3dsetHandler=()=>{const i=this.el.getObject3D("mesh"),s=this.data;t(i,s.materials,this.texture,s.reflectivity)},this.object3dsetHandler(),this.el.addEventListener("object3dset",this.object3dsetHandler)},update:function(e){const i=this.data,s=this.el.getObject3D("mesh");let o=[],c=[];if(i.materials.length&&(e.materials?(o=i.materials.filter(u=>!e.materials.includes(u)),c=e.materials.filter(u=>!i.materials.includes(u))):o=i.materials),o.length&&t(s,o,this.texture,i.reflectivity),c.length&&t(s,c,null,1),e.materials&&i.reflectivity!==e.reflectivity){const u=i.materials.filter(d=>e.materials.includes(d));u.length&&t(s,u,this.texture,i.reflectivity)}this.data.enableBackground&&!e.enableBackground?this.setBackground(this.texture):!this.data.enableBackground&&e.enableBackground&&this.setBackground(null)},remove:function(){this.el.removeEventListener("object3dset",this.object3dsetHandler);const e=this.el.getObject3D("mesh"),i=this.data;t(e,i.materials,null,1),i.enableBackground&&this.setBackground(null)},setBackground:function(e){this.el.sceneEl.object3D.background=e}}),Mh}var bh,ey;function $1(){return ey||(ey=1,bh=AFRAME.registerComponent("grab",{init:function(){this.system=this.el.sceneEl.systems.physics,this.GRABBED_STATE="grabbed",this.grabbing=!1,this.hitEl=null,this.physics=this.el.sceneEl.systems.physics,this.constraint=null,this.onHit=this.onHit.bind(this),this.onGripOpen=this.onGripOpen.bind(this),this.onGripClose=this.onGripClose.bind(this)},play:function(){const l=this.el;l.addEventListener("hit",this.onHit),l.addEventListener("gripdown",this.onGripClose),l.addEventListener("gripup",this.onGripOpen),l.addEventListener("trackpaddown",this.onGripClose),l.addEventListener("trackpadup",this.onGripOpen),l.addEventListener("triggerdown",this.onGripClose),l.addEventListener("triggerup",this.onGripOpen)},pause:function(){const l=this.el;l.removeEventListener("hit",this.onHit),l.removeEventListener("gripdown",this.onGripClose),l.removeEventListener("gripup",this.onGripOpen),l.removeEventListener("trackpaddown",this.onGripClose),l.removeEventListener("trackpadup",this.onGripOpen),l.removeEventListener("triggerdown",this.onGripClose),l.removeEventListener("triggerup",this.onGripOpen)},onGripClose:function(){this.grabbing=!0},onGripOpen:function(){const l=this.hitEl;this.grabbing=!1,l&&(l.removeState(this.GRABBED_STATE),this.hitEl=void 0,this.system.removeConstraint(this.constraint),this.constraint=null)},onHit:function(l){const t=l.detail.el;t.is(this.GRABBED_STATE)||!this.grabbing||this.hitEl||(t.addState(this.GRABBED_STATE),this.hitEl=t,this.constraint=new CANNON.LockConstraint(this.el.body,t.body),this.system.addConstraint(this.constraint))}})),bh}var Sh,ny;function tw(){return ny||(ny=1,Sh=AFRAME.registerComponent("normal-material",{init:function(){this.material=new THREE.MeshNormalMaterial({flatShading:!0}),this.applyMaterial=this.applyMaterial.bind(this),this.el.addEventListener("object3dset",this.applyMaterial),this.applyMaterial()},remove:function(){this.el.removeEventListener("object3dset",this.applyMaterial)},applyMaterial:function(){this.el.object3D.traverse(l=>{l.isMesh&&(l.material=this.material)})}})),Sh}var Ah,iy;function ew(){if(iy)return Ah;iy=1,Ah=AFRAME.registerComponent("sphere-collider",{schema:{enabled:{default:!0},interval:{default:80},objects:{default:""},state:{default:"collided"},radius:{default:.05},watch:{default:!0}},init:function(){this.observer=null,this.els=[],this.collisions=[],this.prevCheckTime=void 0,this.eventDetail={},this.handleHit=this.handleHit.bind(this),this.handleHitEnd=this.handleHitEnd.bind(this)},play:function(){const t=this.el.sceneEl;this.data.watch&&(this.observer=new MutationObserver(this.update.bind(this,null)),this.observer.observe(t,{childList:!0,subtree:!0}))},pause:function(){this.observer&&(this.observer.disconnect(),this.observer=null)},update:function(){const t=this.data;let e;t.objects?e=this.el.sceneEl.querySelectorAll(t.objects):e=this.el.sceneEl.children,this.els=Array.prototype.slice.call(e)},tick:function(){const t=new THREE.Vector3,e=new THREE.Vector3,i=new THREE.Vector3,s=new THREE.Vector3,o=new THREE.Box3,c=[],u=new Map;return function(d){if(!this.data.enabled)return;const f=this.prevCheckTime;if(f&&d-f<this.data.interval)return;this.prevCheckTime=d;const m=this.el,y=this.data,v=m.getObject3D("mesh");let x;if(!v)return;c.length=0,u.clear(),m.object3D.getWorldPosition(t),m.object3D.getWorldScale(i),x=y.radius*S(i),this.els.forEach(k),c.sort((_,z)=>u.get(_)>u.get(z)?1:-1).forEach(this.handleHit),this.collisions.filter(_=>!u.has(_)).forEach(this.handleHitEnd),l(this.collisions,c);function k(_){let z,H,F,I;_.isEntity&&(H=_.getObject3D("mesh"),H&&(o.setFromObject(H).getSize(s),I=Math.max(s.x,s.y,s.z)/2,z=Math.sqrt(2*I*I),o.getCenter(e),z&&(F=t.distanceTo(e),F<z+x&&(c.push(_),u.set(_,F)))))}function S(_){return Math.max(_.x,_.y,_.z)}}}(),handleHit:function(t){t.emit("hit"),t.addState(this.data.state),this.eventDetail.el=t,this.el.emit("hit",this.eventDetail)},handleHitEnd:function(t){t.emit("hitend"),t.removeState(this.data.state),this.eventDetail.el=t,this.el.emit("hitend",this.eventDetail)}});function l(t,e){t.length=0;for(let i=0;i<e.length;i++)t[i]=e[i]}return Ah}var ry;function nw(){return ry||(ry=1,J1(),Q1(),$1(),tw(),ew()),Qm}var sy={},Th,oy;function iw(){return oy||(oy=1,Th=AFRAME.registerComponent("nav-mesh",{schema:{nodeName:{type:"string"}},init:function(){this.system=this.el.sceneEl.systems.nav,this.hasLoadedNavMesh=!1,this.nodeName=this.data.nodeName,this.el.addEventListener("object3dset",this.loadNavMesh.bind(this))},play:function(){this.hasLoadedNavMesh||this.loadNavMesh()},loadNavMesh:function(){var l=this;const t=this.el.getObject3D("mesh");if(this.el.sceneEl.object3D,!t)return;let e;if(t.traverse(s=>{s.isMesh&&(!l.nodeName||s.name===l.nodeName)&&(e=s)}),!e)return;const i=e.geometry.clone();e.updateWorldMatrix(!0,!1),i.applyMatrix4(e.matrixWorld),this.system.setNavMeshGeometry(i),this.hasLoadedNavMesh=!0}})),Th}var _h,ay;function rw(){return ay||(ay=1,_h=AFRAME.registerComponent("nav-agent",{schema:{destination:{type:"vec3"},active:{default:!1},speed:{default:2}},init:function(){this.system=this.el.sceneEl.systems.nav,this.system.addAgent(this),this.group=null,this.path=[],this.raycaster=new THREE.Raycaster},remove:function(){this.system.removeAgent(this)},update:function(){this.path.length=0},updateNavLocation:function(){this.group=null,this.path=[]},tick:function(){const l=new THREE.Vector3,t=new THREE.Vector3,e=new THREE.Vector3;return function(i,s){const o=this.el,c=this.data,u=this.raycaster,d=c.speed*s/1e3;if(!c.active)return;if(!this.path.length){const k=this.el.object3D.position;this.group=this.group||this.system.getGroup(k),this.path=this.system.getPath(k,l.copy(c.destination),this.group)||[],o.emit("navigation-start")}if(!this.path.length){console.warn("[nav] Unable to find path to %o.",c.destination),this.el.setAttribute("nav-agent",{active:!1}),o.emit("navigation-end");return}const f=o.object3D.position,m=this.path[0];t.subVectors(m,f);const y=t.length();let v;if(y<d){if(this.path.shift(),!this.path.length){this.el.setAttribute("nav-agent",{active:!1}),o.emit("navigation-end");return}e.copy(f),v=this.path[0]}else e.copy(t.setLength(d)).add(f),v=m;v.y=f.y,o.object3D.lookAt(v),u.ray.origin.copy(e),u.ray.origin.y+=1.5,u.ray.direction={x:0,y:-1,z:0};const x=u.intersectObject(this.system.getNavMesh());x.length?(t.subVectors(x[0].point,f),f.add(t.setLength(d))):f.copy(e)}}()})),_h}class de{static roundNumber(t,e){const i=Math.pow(10,e);return Math.round(t*i)/i}static sample(t){return t[Math.floor(Math.random()*t.length)]}static distanceToSquared(t,e){var i=t.x-e.x,s=t.y-e.y,o=t.z-e.z;return i*i+s*s+o*o}static isPointInPoly(t,e){for(var i=!1,s=-1,o=t.length,c=o-1;++s<o;c=s)(t[s].z<=e.z&&e.z<t[c].z||t[c].z<=e.z&&e.z<t[s].z)&&e.x<(t[c].x-t[s].x)*(e.z-t[s].z)/(t[c].z-t[s].z)+t[s].x&&(i=!i);return i}static isVectorInPolygon(t,e,i){var s=1e5,o=-1e5,c=[];return e.vertexIds.forEach(u=>{s=Math.min(i[u].y,s),o=Math.max(i[u].y,o),c.push(i[u])}),!!(t.y<o+.5&&t.y>s-.5&&this.isPointInPoly(c,t))}static triarea2(t,e,i){return(i.x-t.x)*(e.z-t.z)-(e.x-t.x)*(i.z-t.z)}static vequal(t,e){return this.distanceToSquared(t,e)<1e-5}static mergeVertices(t,e=1e-4){e=Math.max(e,Number.EPSILON);for(var i={},s=t.getIndex(),o=t.getAttribute("position"),c=s?s.count:o.count,u=0,d=[],f=[],m=Math.log10(1/e),y=Math.pow(10,m),v=0;v<c;v++){var x=s?s.getX(v):v,k="";k+=~~(o.getX(x)*y)+",",k+=~~(o.getY(x)*y)+",",(k+=~~(o.getZ(x)*y)+",")in i?d.push(i[k]):(f.push(o.getX(x)),f.push(o.getY(x)),f.push(o.getZ(x)),i[k]=u,d.push(u),u++)}const S=new Oi(new Float32Array(f),o.itemSize,o.normalized),_=new mn;return _.setAttribute("position",S),_.setIndex(d),_}}class sw{constructor(t){this.content=[],this.scoreFunction=t}push(t){this.content.push(t),this.sinkDown(this.content.length-1)}pop(){const t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t}remove(t){const e=this.content.indexOf(t),i=this.content.pop();e!==this.content.length-1&&(this.content[e]=i,this.scoreFunction(i)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))}size(){return this.content.length}rescoreElement(t){this.sinkDown(this.content.indexOf(t))}sinkDown(t){const e=this.content[t];for(;t>0;){const i=(t+1>>1)-1,s=this.content[i];if(!(this.scoreFunction(e)<this.scoreFunction(s)))break;this.content[i]=e,this.content[t]=s,t=i}}bubbleUp(t){const e=this.content.length,i=this.content[t],s=this.scoreFunction(i);for(;;){const o=t+1<<1,c=o-1;let u,d=null;if(c<e&&(u=this.scoreFunction(this.content[c]),u<s&&(d=c)),o<e&&this.scoreFunction(this.content[o])<(d===null?s:u)&&(d=o),d===null)break;this.content[t]=this.content[d],this.content[d]=i,t=d}}}class ow{constructor(){this.portals=[]}push(t,e){e===void 0&&(e=t),this.portals.push({left:t,right:e})}stringPull(){const t=this.portals,e=[];let i,s,o,c=0,u=0,d=0;i=t[0].left,s=t[0].left,o=t[0].right,e.push(i);for(let f=1;f<t.length;f++){const m=t[f].left,y=t[f].right;if(de.triarea2(i,o,y)<=0){if(!(de.vequal(i,o)||de.triarea2(i,s,y)>0)){e.push(s),i=s,c=u,s=i,o=i,u=c,d=c,f=c;continue}o=y,d=f}if(de.triarea2(i,s,m)>=0){if(!(de.vequal(i,s)||de.triarea2(i,o,m)<0)){e.push(o),i=o,c=d,s=i,o=i,u=c,d=c,f=c;continue}s=m,u=f}}return e.length!==0&&de.vequal(e[e.length-1],t[t.length-1].left)||e.push(t[t.length-1].left),this.path=e,e}}class Hh{constructor(){this.zones={}}static createZone(t,e=1e-4){return(class{static buildZone(i,s){const o=this._buildNavigationMesh(i,s),c={};o.vertices.forEach(d=>{d.x=de.roundNumber(d.x,2),d.y=de.roundNumber(d.y,2),d.z=de.roundNumber(d.z,2)}),c.vertices=o.vertices;const u=this._buildPolygonGroups(o);return c.groups=new Array(u.length),u.forEach((d,f)=>{const m=new Map;d.forEach((v,x)=>{m.set(v,x)});const y=new Array(d.length);d.forEach((v,x)=>{const k=[];v.neighbours.forEach(z=>k.push(m.get(z)));const S=[];v.neighbours.forEach(z=>S.push(this._getSharedVerticesInOrder(v,z)));const _=new L(0,0,0);_.add(c.vertices[v.vertexIds[0]]),_.add(c.vertices[v.vertexIds[1]]),_.add(c.vertices[v.vertexIds[2]]),_.divideScalar(3),_.x=de.roundNumber(_.x,2),_.y=de.roundNumber(_.y,2),_.z=de.roundNumber(_.z,2),y[x]={id:x,neighbours:k,vertexIds:v.vertexIds,centroid:_,portals:S}}),c.groups[f]=y}),c}static _buildNavigationMesh(i,s){return i=de.mergeVertices(i,s),this._buildPolygonsFromGeometry(i)}static _spreadGroupId(i){let s=new Set([i]);for(;s.size>0;){const o=s;s=new Set,o.forEach(c=>{c.group=i.group,c.neighbours.forEach(u=>{u.group===void 0&&s.add(u)})})}}static _buildPolygonGroups(i){const s=[];return i.polygons.forEach(o=>{o.group!==void 0?s[o.group].push(o):(o.group=s.length,this._spreadGroupId(o),s.push([o]))}),s}static _buildPolygonNeighbours(i,s){const o=new Set,c=s[i.vertexIds[1]],u=s[i.vertexIds[2]];return s[i.vertexIds[0]].forEach(d=>{d!==i&&(c.includes(d)||u.includes(d))&&o.add(d)}),c.forEach(d=>{d!==i&&u.includes(d)&&o.add(d)}),o}static _buildPolygonsFromGeometry(i){const s=[],o=[],c=i.attributes.position,u=i.index,d=[];for(let f=0;f<c.count;f++)o.push(new L().fromBufferAttribute(c,f)),d[f]=[];for(let f=0;f<i.index.count;f+=3){const m=u.getX(f),y=u.getX(f+1),v=u.getX(f+2),x={vertexIds:[m,y,v],neighbours:null};s.push(x),d[m].push(x),d[y].push(x),d[v].push(x)}return s.forEach(f=>{f.neighbours=this._buildPolygonNeighbours(f,d)}),{polygons:s,vertices:o}}static _getSharedVerticesInOrder(i,s){const o=i.vertexIds,c=o[0],u=o[1],d=o[2],f=s.vertexIds,m=f.includes(c),y=f.includes(u),v=f.includes(d);return m&&y&&v?Array.from(o):m&&y?[c,u]:y&&v?[u,d]:m&&v?[d,c]:(console.warn("Error processing navigation mesh neighbors; neighbors with <2 shared vertices found."),[])}}).buildZone(t,e)}setZoneData(t,e){this.zones[t]=e}getRandomNode(t,e,i,s){if(!this.zones[t])return new L;i=i||null,s=s||0;const o=[];return this.zones[t].groups[e].forEach(c=>{i&&s?de.distanceToSquared(i,c.centroid)<s*s&&o.push(c.centroid):o.push(c.centroid)}),de.sample(o)||new L}getClosestNode(t,e,i,s=!1){const o=this.zones[e].vertices;let c=null,u=1/0;return this.zones[e].groups[i].forEach(d=>{const f=de.distanceToSquared(d.centroid,t);f<u&&(!s||de.isVectorInPolygon(t,d,o))&&(c=d,u=f)}),c}findPath(t,e,i,s){const o=this.zones[i].groups[s],c=this.zones[i].vertices,u=this.getClosestNode(t,i,s,!0),d=this.getClosestNode(e,i,s,!0);if(!u||!d)return null;const f=(class{static init(x){for(let k=0;k<x.length;k++){const S=x[k];S.f=0,S.g=0,S.h=0,S.cost=1,S.visited=!1,S.closed=!1,S.parent=null}}static cleanUp(x){for(let k=0;k<x.length;k++){const S=x[k];delete S.f,delete S.g,delete S.h,delete S.cost,delete S.visited,delete S.closed,delete S.parent}}static heap(){return new sw(function(x){return x.f})}static search(x,k,S){this.init(x);const _=this.heap();for(_.push(k);_.size()>0;){const z=_.pop();if(z===S){let F=z;const I=[];for(;F.parent;)I.push(F),F=F.parent;return this.cleanUp(I),I.reverse()}z.closed=!0;const H=this.neighbours(x,z);for(let F=0,I=H.length;F<I;F++){const O=H[F];if(O.closed)continue;const q=z.g+O.cost,G=O.visited;if(!G||q<O.g){if(O.visited=!0,O.parent=z,!O.centroid||!S.centroid)throw new Error("Unexpected state");O.h=O.h||this.heuristic(O.centroid,S.centroid),O.g=q,O.f=O.g+O.h,G?_.rescoreElement(O):_.push(O)}}}return[]}static heuristic(x,k){return de.distanceToSquared(x,k)}static neighbours(x,k){const S=[];for(let _=0;_<k.neighbours.length;_++)S.push(x[k.neighbours[_]]);return S}}).search(o,u,d),m=function(x,k){for(var S=0;S<x.neighbours.length;S++)if(x.neighbours[S]===k.id)return x.portals[S]},y=new ow;y.push(t);for(let x=0;x<f.length;x++){const k=f[x],S=f[x+1];if(S){const _=m(k,S);y.push(c[_[0]],c[_[1]])}}y.push(e),y.stringPull();const v=y.path.map(x=>new L(x.x,x.y,x.z));return v.shift(),v}}Hh.prototype.getGroup=function(){const l=new Fi;return function(t,e,i=!1){if(!this.zones[t])return null;let s=null,o=Math.pow(50,2);const c=this.zones[t];for(let u=0;u<c.groups.length;u++){const d=c.groups[u];for(const f of d){if(i&&(l.setFromCoplanarPoints(c.vertices[f.vertexIds[0]],c.vertices[f.vertexIds[1]],c.vertices[f.vertexIds[2]]),Math.abs(l.distanceToPoint(e))<.01)&&de.isPointInPoly([c.vertices[f.vertexIds[0]],c.vertices[f.vertexIds[1]],c.vertices[f.vertexIds[2]]],e))return u;const m=de.distanceToSquared(f.centroid,e);m<o&&(s=u,o=m)}}return s}}(),Hh.prototype.clampStep=function(){const l=new L,t=new Fi,e=new Cn,i=new L;let s,o,c=new L;return function(u,d,f,m,y,v){const x=this.zones[m].vertices,k=this.zones[m].groups[y],S=[f],_={};_[f.id]=0,s=void 0,c.set(0,0,0),o=1/0,t.setFromCoplanarPoints(x[f.vertexIds[0]],x[f.vertexIds[1]],x[f.vertexIds[2]]),t.projectPoint(d,l),i.copy(l);for(let z=S.pop();z;z=S.pop()){e.set(x[z.vertexIds[0]],x[z.vertexIds[1]],x[z.vertexIds[2]]),e.closestPointToPoint(i,l),l.distanceToSquared(i)<o&&(s=z,c.copy(l),o=l.distanceToSquared(i));const H=_[z.id];if(!(H>2))for(let F=0;F<z.neighbours.length;F++){const I=k[z.neighbours[F]];I.id in _||(S.push(I),_[I.id]=H+1)}}return v.copy(c),s}}();class aw extends te{constructor(){super(),this._playerMarker=new Ii(new Ol(.25,32,32),new Li({color:15631215})),this._targetMarker=new Ii(new wo(.3,.3,.3),new Li({color:14469912})),this._nodeMarker=new Ii(new wo(.1,.8,.1),new Li({color:4417387})),this._stepMarker=new Ii(new wo(.1,1,.1),new Li({color:14472114})),this._pathMarker=new te,this._pathLineMaterial=new Ao({color:41903,linewidth:2}),this._pathPointMaterial=new Li({color:41903}),this._pathPointGeometry=new Ol(.08),this._markers=[this._playerMarker,this._targetMarker,this._nodeMarker,this._stepMarker,this._pathMarker],this._markers.forEach(t=>{t.visible=!1,this.add(t)})}setPath(t){for(;this._pathMarker.children.length;)this._pathMarker.children[0].visible=!1,this._pathMarker.remove(this._pathMarker.children[0]);t=[this._playerMarker.position].concat(t);const e=new mn;e.setAttribute("position",new Oi(new Float32Array(3*t.length),3));for(let i=0;i<t.length;i++)e.attributes.position.setXYZ(i,t[i].x,t[i].y+.2,t[i].z);this._pathMarker.add(new Hl(e,this._pathLineMaterial));for(let i=0;i<t.length-1;i++){const s=new Ii(this._pathPointGeometry,this._pathPointMaterial);s.position.copy(t[i]),s.position.y+=.2,this._pathMarker.add(s)}return this._pathMarker.visible=!0,this}setPlayerPosition(t){return this._playerMarker.position.copy(t),this._playerMarker.visible=!0,this}setTargetPosition(t){return this._targetMarker.position.copy(t),this._targetMarker.visible=!0,this}setNodePosition(t){return this._nodeMarker.position.copy(t),this._nodeMarker.visible=!0,this}setStepPosition(t){return this._stepMarker.position.copy(t),this._stepMarker.visible=!0,this}reset(){for(;this._pathMarker.children.length;)this._pathMarker.children[0].visible=!1,this._pathMarker.remove(this._pathMarker.children[0]);return this._markers.forEach(t=>{t.visible=!1}),this}}const lw=Object.freeze(Object.defineProperty({__proto__:null,Pathfinding:Hh,PathfindingHelper:aw},Symbol.toStringTag,{value:"Module"})),cw=Rg(lw);var Ch,ly;function uw(){if(ly)return Ch;ly=1;const{Pathfinding:l}=cw,t=new l,e="level";return Ch=AFRAME.registerSystem("nav",{init:function(){this.navMesh=null,this.agents=new Set},setNavMeshGeometry:function(i){this.navMesh=new THREE.Mesh(i),t.setZoneData(e,l.createZone(i)),Array.from(this.agents).forEach(s=>s.updateNavLocation())},getNavMesh:function(){return this.navMesh},addAgent:function(i){this.agents.add(i)},removeAgent:function(i){this.agents.delete(i)},getPath:function(i,s,o){return this.navMesh?t.findPath(i,s,e,o):null},getGroup:function(i){return this.navMesh?t.getGroup(e,i):null},getNode:function(i,s){return this.navMesh?t.getClosestNode(i,e,s,!0):null},clampStep:function(i,s,o,c,u){if(this.navMesh){if(!c)return u.copy(s),this.getNode(s,o)}else return u.copy(s),null;return t.clampStep(i,s,c,e,o,u)}}),Ch}var cy;function hw(){return cy||(cy=1,iw(),rw(),uw()),sy}var uy={},Rh,hy;function dw(){return hy||(hy=1,Rh=AFRAME.registerPrimitive("a-grid",{defaultComponents:{geometry:{primitive:"plane",width:75,height:75},rotation:{x:-90,y:0,z:0},material:{src:"url(https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v1.16.3/assets/grid.png)",repeat:"75 75"}},mappings:{width:"geometry.width",height:"geometry.height",src:"material.src"}})),Rh}var Al={},dy;function fw(){return dy||(dy=1,Al.Primitive=AFRAME.registerPrimitive("a-ocean",{defaultComponents:{ocean:{},rotation:{x:-90,y:0,z:0}},mappings:{width:"ocean.width",depth:"ocean.depth",density:"ocean.density",amplitude:"ocean.amplitude",amplitudeVariance:"ocean.amplitudeVariance",speed:"ocean.speed",speedVariance:"ocean.speedVariance",color:"ocean.color",opacity:"ocean.opacity"}}),Al.Component=AFRAME.registerComponent("ocean",{schema:{width:{default:10,min:0},depth:{default:10,min:0},density:{default:10},amplitude:{default:.1},amplitudeVariance:{default:.3},speed:{default:1},speedVariance:{default:2},color:{default:"#7AD2F7",type:"color"},opacity:{default:.8}},play:function(){const l=this.el,t=this.data;let e=l.components.material;const i=new THREE.PlaneGeometry(t.width,t.depth,t.density,t.density);this.waves=[];const s=i.getAttribute("position");for(let o=0;o<s.count;o++)this.waves.push({z:s.getZ(o),ang:Math.random()*Math.PI*2,amp:t.amplitude+Math.random()*t.amplitudeVariance,speed:(t.speed+Math.random()*t.speedVariance)/1e3});e||(e={},e.material=new THREE.MeshPhongMaterial({color:t.color,transparent:t.opacity<1,opacity:t.opacity,flatShading:!0})),this.mesh=new THREE.Mesh(i,e.material),l.setObject3D("mesh",this.mesh)},remove:function(){this.el.removeObject3D("mesh")},tick:function(l,t){if(!t)return;const e=this.mesh.geometry.getAttribute("position");for(let i=0;i<e.count;i++){const s=this.waves[i],o=s.z+Math.sin(s.ang)*s.amp;e.setZ(i,o),s.ang+=s.speed*t}e.needsUpdate=!0}})),Al}var Tl={},fy;function pw(){return fy||(fy=1,Tl.Primitive=AFRAME.registerPrimitive("a-tube",{defaultComponents:{tube:{}},mappings:{path:"tube.path",segments:"tube.segments",radius:"tube.radius","radial-segments":"tube.radialSegments",closed:"tube.closed"}}),Tl.Component=AFRAME.registerComponent("tube",{schema:{path:{default:[]},segments:{default:64},radius:{default:1},radialSegments:{default:8},closed:{default:!1}},init:function(){const l=this.el,t=this.data;let e=l.components.material;if(!t.path.length){console.error("[a-tube] `path` property expected but not found.");return}const i=new THREE.CatmullRomCurve3(t.path.map(function(o){return o=o.split(" "),new THREE.Vector3(Number(o[0]),Number(o[1]),Number(o[2]))})),s=new THREE.TubeGeometry(i,t.segments,t.radius,t.radialSegments,t.closed);e||(e={},e.material=new THREE.MeshPhongMaterial),this.mesh=new THREE.Mesh(s,e.material),this.el.setObject3D("mesh",this.mesh)},update:function(l){Object.keys(l).length&&(this.remove(),this.init())},remove:function(){this.mesh&&this.el.removeObject3D("mesh")}})),Tl}var py;function mw(){return py||(py=1,dw(),fw(),pw()),uy}var my;function yw(){return my||(my=1,fv(),Y1(),nw(),hw(),mw()),Mp}yw();var yy={},gy;function gw(){if(gy)return yy;if(gy=1,AFRAME.registerGeometry("prism",{schema:{depth:{default:1,min:0},height:{default:1,min:0},width:{default:1,min:0}},init:function(l){const t=new THREE.Shape;t.moveTo(l.width/2,0),t.lineTo(0,l.height),t.lineTo(-l.width/2,0),t.lineTo(l.width/2,0);const e={steps:2,depth:l.depth,bevelEnabled:!1};this.geometry=new THREE.ExtrudeGeometry(t,e)}}),typeof AFRAME>"u")throw new Error("Component attempted to register before AFRAME was available.");return AFRAME.registerComponent("blink-controls",{schema:{button:{default:"",oneOf:["trackpad","trigger","grip","menu","thumbstick"]},startEvents:{type:"array",default:[]},endEvents:{type:"array",default:[]},cancelEvents:{type:"array",default:[]},collisionEntities:{default:""},hitEntity:{type:"selector"},cameraRig:{type:"selector",default:"#player"},teleportOrigin:{type:"selector",default:"#camera"},hitCylinderColor:{type:"color",default:"#4d93fd"},hitCylinderRadius:{default:.25,min:0},hitCylinderHeight:{default:.3,min:0},interval:{default:0},curveNumberPoints:{default:60,min:2},curveLineWidth:{default:.025},curveHitColor:{type:"color",default:"#4d93fd"},curveMissColor:{type:"color",default:"#ff0000"},curveShootingSpeed:{default:10,min:0},defaultPlaneSize:{default:100},landingNormal:{type:"vec3",default:{x:0,y:1,z:0}},landingMaxAngle:{default:"45",min:0,max:360},drawIncrementally:{default:!0},incrementalDrawMs:{default:300},missOpacity:{default:.8},hitOpacity:{default:.8},snapTurn:{default:!0},rotateOnTeleport:{default:!0}},init:function(){const l=this.data,t=this.el;let e;this.active=!1,this.obj=t.object3D,this.controllerPosition=new THREE.Vector3,this.hitEntityQuaternion=new THREE.Quaternion,this.teleportOriginQuaternion=new THREE.Quaternion,this.hitPoint=new THREE.Vector3,this.collisionObjectNormalMatrix=new THREE.Matrix3,this.collisionWorldNormal=new THREE.Vector3,this.rigWorldPosition=new THREE.Vector3,this.newRigWorldPosition=new THREE.Vector3,this.teleportEventDetail={oldPosition:this.rigWorldPosition,newPosition:this.newRigWorldPosition,hitPoint:this.hitPoint,rotationQuaternion:this.hitEntityQuaternion},this.hit=!1,this.prevCheckTime=void 0,this.referenceNormal=new THREE.Vector3,this.curveMissColor=new THREE.Color,this.curveHitColor=new THREE.Color,this.raycaster=new THREE.Raycaster,this.defaultPlane=this.createDefaultPlane(this.data.defaultPlaneSize),this.defaultCollisionMeshes=[this.defaultPlane];const i=this.teleportEntity=document.createElement("a-entity");if(i.classList.add("teleportRay"),i.setAttribute("visible",!1),t.sceneEl.appendChild(this.teleportEntity),this.onButtonDown=this.onButtonDown.bind(this),this.onButtonUp=this.onButtonUp.bind(this),this.cancel=this.cancel.bind(this),this.handleThumbstickAxis=this.handleThumbstickAxis.bind(this),this.teleportOrigin=this.data.teleportOrigin,this.cameraRig=this.data.cameraRig,this.snapturnRotation=THREE.MathUtils.degToRad(45),this.canSnapturn=!0,this.addedEvents=[],this.data.startEvents.length&&this.data.endEvents.length){for(e=0;e<this.data.startEvents.length;e++)this.addedEvents.push([this.data.startEvents[e],this.onButtonDown]),t.addEventListener(this.data.startEvents[e],this.onButtonDown);for(e=0;e<this.data.endEvents.length;e++)this.addedEvents.push([this.data.endEvents[e],this.onButtonUp]),t.addEventListener(this.data.endEvents[e],this.onButtonUp)}else l.button?(this.addedEvents.push([l.button+"down",this.onButtonDown]),this.addedEvents.push([l.button+"up",this.onButtonUp]),t.addEventListener(l.button+"down",this.onButtonDown),t.addEventListener(l.button+"up",this.onButtonUp)):this.thumbstickAxisActivation=!0;for(e=0;e<this.data.cancelEvents.length;e++)this.addedEvents.push([this.data.cancelEvents[e],this.cancel]),t.addEventListener(this.data.cancelEvents[e],this.cancel);this.addedEvents.push(["thumbstickmoved",this.handleThumbstickAxis]),t.addEventListener("thumbstickmoved",this.handleThumbstickAxis),this.queryCollisionEntities()},handleSnapturn:function(l,t){t<.5&&(this.canSnapturn=!0),this.canSnapturn&&t>.95&&(Math.abs(l-Math.PI/2)<.6?(this.cameraRig.object3D.rotateY(+this.snapturnRotation),this.canSnapturn=!1):Math.abs(l-1.5*Math.PI)<.6&&(this.cameraRig.object3D.rotateY(-this.snapturnRotation),this.canSnapturn=!1))},handleThumbstickAxis:function(l){if(l.detail.x!==void 0&&l.detail.y!==void 0){const t=Math.atan2(l.detail.x,l.detail.y)+Math.PI,e=Math.sqrt(l.detail.x**2+l.detail.y**2);this.active?(e>.95&&(this.obj.getWorldPosition(this.controllerPosition),this.controllerPosition.setComponent(1,this.hitEntity.object3D.position.y),this.hitEntity.object3D.visible=!1,this.hitEntity.object3D.lookAt(this.controllerPosition),this.hitEntity.object3D.rotateY(t),this.hitEntity.object3D.visible=!0,this.hitEntity.object3D.getWorldQuaternion(this.hitEntityQuaternion)),Math.abs(l.detail.x)===0&&Math.abs(l.detail.y)===0&&this.onButtonUp()):this.thumbstickAxisActivation&&e>.95&&(t<.5||t>5.78)?this.onButtonDown():this.data.snapTurn&&this.handleSnapturn(t,e)}},update:function(l){const t=this.data,e=AFRAME.utils.diff(t,l);this.referenceNormal.copy(t.landingNormal),this.curveMissColor.set(t.curveMissColor),this.curveHitColor.set(t.curveHitColor),(!this.line||"curveLineWidth"in e||"curveNumberPoints"in e||"type"in e)&&(this.line=this.createLine(t),this.line.material.opacity=this.data.hitOpacity,this.line.material.transparent=this.data.hitOpacity<1,this.numActivePoints=t.curveNumberPoints,this.teleportEntity.setObject3D("mesh",this.line.mesh)),t.hitEntity?this.hitEntity=t.hitEntity:(!this.hitEntity||"hitCylinderColor"in e||"hitCylinderHeight"in e||"hitCylinderRadius"in e)&&(this.hitEntity&&this.hitEntity.parentNode.removeChild(this.hitEntity),this.hitEntity=this.createHitEntity(t),this.el.sceneEl.appendChild(this.hitEntity)),this.hitEntity.setAttribute("visible",!1),t.hitEntity||this.hitEntity.lastElementChild.setAttribute("visible",t.rotateOnTeleport),"collisionEntities"in e&&this.queryCollisionEntities()},remove:function(){const l=this.el,t=this.hitEntity,e=this.teleportEntity;t&&t.parentNode.removeChild(t),e&&e.parentNode.removeChild(e),l.sceneEl.removeEventListener("child-attached",this.childAttachHandler),l.sceneEl.removeEventListener("child-detached",this.childDetachHandler);for(const[i,s]of this.addedEvents)l.removeEventListener(i,s)},tick:function(){const l=new THREE.Vector3,t=new THREE.Vector3,e=-9.8,i=new THREE.Vector3(0,e,0),s=new THREE.Vector3,o=new THREE.Vector3,c=new THREE.Quaternion,u=new THREE.Vector3,d=new THREE.Vector3,f=new THREE.Vector3,m=new THREE.Vector3,y=new THREE.Vector3;let v=0;return function(x,k){if(!this.active||(this.data.drawIncrementally&&this.redrawLine&&(this.redrawLine=!1,v=0),v+=k,this.numActivePoints=this.data.curveNumberPoints*v/this.data.incrementalDrawMs,this.numActivePoints>this.data.curveNumberPoints&&(this.numActivePoints=this.data.curveNumberPoints),this.prevCheckTime&&x-this.prevCheckTime<this.data.interval))return;this.prevCheckTime=x,this.obj.matrixWorld.decompose(u,c,d);const _=f.set(0,0,-1).applyQuaternion(c).normalize();this.line.setDirection(y.copy(_)),this.obj.getWorldPosition(l),o.copy(l),this.teleportEntity.setAttribute("visible",!0),v<this.data.incrementalDrawMs?this.line.material.color.set(this.curveHitColor):this.line.material.color.set(this.curveMissColor),this.line.material.opacity=this.data.missOpacity,this.line.material.transparent=this.data.missOpacity<1,this.hitEntity.setAttribute("visible",!1),this.hit=!1,t.copy(_).multiplyScalar(this.data.curveShootingSpeed),this.lastDrawnIndex=0;const z=this.data.drawIncrementally?this.numActivePoints:this.line.numPoints;for(let H=0;H<z+1;H++){let F;H===Math.floor(z+1)?F=z/(this.line.numPoints-1):F=H/(this.line.numPoints-1);const I=this.parabolicCurveMaxRoot(l,t,i);F=F*Math.max(1,1.5*I),this.parabolicCurve(l,t,i,F,s);const O=m.copy(s).sub(o).normalize();if(this.raycaster.far=O.length(),this.raycaster.set(o,O),this.lastDrawnPoint=s,this.lastDrawnIndex=H,this.checkMeshCollisions(H,o,s))break;o.copy(s)}for(let H=this.lastDrawnIndex+1;H<this.line.numPoints;H++)this.line.setPoint(H,this.lastDrawnPoint,this.lastDrawnPoint)}}(),queryCollisionEntities:function(){const l=this.data,t=this.el;if(!l.collisionEntities){this.collisionEntities=[];return}const e=[].slice.call(t.sceneEl.querySelectorAll(l.collisionEntities));this.collisionEntities=e,this.childAttachHandler=function(s){s.detail.el.matches(l.collisionEntities)&&e.push(s.detail.el)},t.sceneEl.addEventListener("child-attached",this.childAttachHandler),this.childDetachHandler=function(s){if(!s.detail.el.matches(l.collisionEntities))return;const o=e.indexOf(s.detail.el);o!==-1&&e.splice(o,1)},t.sceneEl.addEventListener("child-detached",this.childDetachHandler)},onButtonDown:function(){this.active=!0,this.redrawLine=!0},onButtonUp:function(){const l=new THREE.Vector3,t=[new THREE.Vector3,new THREE.Vector3],e=new THREE.Vector3;return function(i){if(!this.active||(this.active=!1,this.hitEntity.setAttribute("visible",!1),this.teleportEntity.setAttribute("visible",!1),!this.hit))return;const s=this.data.cameraRig||this.el.sceneEl.camera.el;if(s.object3D.getWorldPosition(this.rigWorldPosition),this.newRigWorldPosition.copy(this.hitPoint),l.copy(this.newRigWorldPosition),s.object3D.parent&&s.object3D.parent.worldToLocal(l),s.setAttribute("position",l),this.data.rotateOnTeleport&&(this.teleportOriginQuaternion.setFromEuler(new THREE.Euler(0,this.teleportOrigin.object3D.rotation.y,0)),this.teleportOriginQuaternion.invert(),this.teleportOriginQuaternion.multiply(this.hitEntityQuaternion),this.cameraRig.object3D.setRotationFromQuaternion(this.teleportOriginQuaternion)),!this.data.cameraRig){const o=document.querySelectorAll("a-entity[tracked-controls]");for(let c=0;c<o.length;c++)o[c].object3D.getWorldPosition(e),t[c].copy(this.newRigWorldPosition).sub(this.rigWorldPosition).add(e),o[c].setAttribute("position",t[c])}this.el.emit("teleported",this.teleportEventDetail)}}(),cancel:function(){this.active=!1,this.hitEntity.setAttribute("visible",!1),this.teleportEntity.setAttribute("visible",!1)},checkMeshCollisions:function(l,t,e){let i;this.data.collisionEntities?(i=this.collisionEntities.map(function(o){return o.getObject3D("mesh")}).filter(function(o){return o}),i=i.length?i:this.defaultCollisionMeshes):i=this.defaultCollisionMeshes;const s=this.raycaster.intersectObjects(i,!0);if(s.length>0&&!this.hit&&this.isValidNormalsAngle(s[0].face.normal,s[0].object)){const o=s[0].point;this.line.material.color.set(this.curveHitColor),this.line.material.opacity=this.data.hitOpacity,this.line.material.transparent=this.data.hitOpacity<1,this.hitEntity.setAttribute("position",o),this.hitEntity.setAttribute("visible",!0),this.hit=!0,this.hitPoint.copy(s[0].point);for(let c=l;c<this.line.numPoints;c++)this.line.setPoint(c,t,this.hitPoint);return!0}else return this.line.setPoint(l,t,e),!1},isValidNormalsAngle:function(l,t){this.collisionObjectNormalMatrix.getNormalMatrix(t.matrixWorld),this.collisionWorldNormal.copy(l).applyMatrix3(this.collisionObjectNormalMatrix).normalize();const e=this.referenceNormal.angleTo(this.collisionWorldNormal);return THREE.MathUtils.RAD2DEG*e<=this.data.landingMaxAngle},parabolicCurveScalar:function(l,t,e,i){return l+t*i+.5*e*i*i},parabolicCurve:function(l,t,e,i,s){return s.x=this.parabolicCurveScalar(l.x,t.x,e.x,i),s.y=this.parabolicCurveScalar(l.y,t.y,e.y,i),s.z=this.parabolicCurveScalar(l.z,t.z,e.z,i),s},parabolicCurveMaxRoot:function(l,t,e){return(-t.y-Math.sqrt(t.y**2-4*(.5*e.y)*l.y))/(1*e.y)},createLine:function(l){const t=l.type==="line"?2:l.curveNumberPoints;return new AFRAME.utils.RayCurve(t,l.curveLineWidth)},createHitEntity:function(l){const t=document.createElement("a-entity");t.className="hitEntity";const e=document.createElement("a-entity");e.setAttribute("geometry",{primitive:"torus",radius:l.hitCylinderRadius,radiusTubular:.01}),e.setAttribute("rotation",{x:90,y:0,z:0}),e.setAttribute("material",{shader:"flat",color:l.hitCylinderColor,side:"double",depthTest:!1}),t.appendChild(e);const i=document.createElement("a-entity");i.setAttribute("position",{x:0,y:l.hitCylinderHeight/2,z:0}),i.setAttribute("geometry",{primitive:"cylinder",segmentsHeight:1,radius:l.hitCylinderRadius,height:l.hitCylinderHeight,openEnded:!0}),i.setAttribute("material",{shader:"flat",color:l.hitCylinderColor,opacity:.5,side:"double",src:this.cylinderTexture,transparent:!0,depthTest:!1}),t.appendChild(i);const s=document.createElement("a-entity");return s.setAttribute("position",{x:0,y:.05,z:l.hitCylinderRadius*-1.5}),s.setAttribute("rotation",{x:90,y:180,z:0}),s.setAttribute("geometry",{primitive:"prism",height:.2,width:.2,depth:.05}),s.setAttribute("material",{shader:"flat",color:l.hitCylinderColor,side:"double",transparent:!0,opacity:.6,depthTest:!1}),t.appendChild(s),t},createDefaultPlane:function(l){const t=new THREE.PlaneGeometry(100,100);t.rotateX(-Math.PI/2);const e=new THREE.MeshBasicMaterial({color:16776960});return new THREE.Mesh(t,e)},cylinderTexture:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAQCAYAAADXnxW3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAADJJREFUeNpEx7ENgDAAAzArK0JA6f8X9oewlcWStU1wBGdwB08wgjeYm79jc2nbYH0DAC/+CORJxO5fAAAAAElFTkSuQmCC)"}),AFRAME.utils.RayCurve=function(l,t){this.geometry=new THREE.BufferGeometry,this.vertices=new Float32Array(l*3*6),this.uvs=new Float32Array(l*2*6),this.width=t,this.geometry.setAttribute("position",new THREE.BufferAttribute(this.vertices,3).setUsage(THREE.DynamicDrawUsage)),this.material=new THREE.MeshBasicMaterial({side:THREE.DoubleSide,color:16711680}),this.mesh=new THREE.Mesh(this.geometry,this.material),this.mesh.frustumCulled=!1,this.mesh.vertices=this.vertices,this.direction=new THREE.Vector3,this.numPoints=l},AFRAME.utils.RayCurve.prototype={setDirection:function(l){const t=new THREE.Vector3(0,1,0);this.direction.copy(l).cross(t).normalize().multiplyScalar(this.width/2)},setWidth:function(l){this.width=l},setPoint:function(){const l=new THREE.Vector3,t=new THREE.Vector3,e=new THREE.Vector3,i=new THREE.Vector3;return function(s,o,c){l.copy(o).add(this.direction),t.copy(o).sub(this.direction),e.copy(c).add(this.direction),i.copy(c).sub(this.direction);let u=6*3*s;this.vertices[u++]=l.x,this.vertices[u++]=l.y,this.vertices[u++]=l.z,this.vertices[u++]=t.x,this.vertices[u++]=t.y,this.vertices[u++]=t.z,this.vertices[u++]=e.x,this.vertices[u++]=e.y,this.vertices[u++]=e.z,this.vertices[u++]=e.x,this.vertices[u++]=e.y,this.vertices[u++]=e.z,this.vertices[u++]=t.x,this.vertices[u++]=t.y,this.vertices[u++]=t.z,this.vertices[u++]=i.x,this.vertices[u++]=i.y,this.vertices[u++]=i.z,this.geometry.attributes.position.needsUpdate=!0}}()},yy}gw();const vw=()=>It.createElement(It.Fragment,null,It.createElement("a-entity",{scale:"1 1 1",position:"5 0 3",rotation:"0 -17 0","gltf-model":"#apple-store-legacy"}),It.createElement("a-plane",{src:"#brick","normal-map":"#brick-normal","normal-texture-repeat":"20 20","normal-scale":"1 -1",roughness:"0.9",repeat:"20 20",height:"20",width:"21",position:"-1.5 .01 -8",rotation:"-90 -17 0"}),It.createElement("a-plane",{src:"#grass","normal-map":"#grass-normal","normal-texture-repeat":"30 30","normal-scale":"1 -1",roughness:"0.4",repeat:"30 30",height:"100",width:"100",rotation:"-90 0 0",position:"0 0 -1"}),It.createElement("a-sky",{src:"#yosemite",radius:"1000",position:"0 900 0",rotation:"0 -60 0"})),xw=()=>It.createElement(It.Fragment,null,It.createElement("a-entity",{id:"cameraRig","simple-navmesh-constraint":"navmesh:.navmesh;fall:0.5;height:0;exclude:.navmesh-hole;","movement-controls":"speed:0.15;camera:#head;",position:"-1 0 1",rotation:"0 45 0","origin-on-ar-start":!0},It.createElement("a-entity",{id:"head",camera:"near:0.01;","look-controls":"pointerLockEnabled: false",position:"0 1.65 0"}),It.createElement("a-entity",{"handy-controls":"right:#right-gltf;materialOverride:right;",material:"color:gold;metalness:1;roughness:0;"},It.createElement("a-entity",{"data-right":"index-finger-tip",mixin:"blink","blink-controls":"snapTurn:false;startEvents:pose_point_fuseShort;endEvents:pose_point_fuseLong;cancelEvents:pose_cancel_point;"}),It.createElement("a-entity",{"data-left":"index-finger-tip",mixin:"blink","blink-controls":"snapTurn:false;startEvents:pose_point_fuseShort;endEvents:pose_point_fuseLong;cancelEvents:pose_cancel_point;"}),It.createElement("a-entity",{"data-right":"ray",mixin:"blink",cursor:"",raycaster:"objects:[html];far:0.3;showLine:false;lineColor:black;"},It.createElement("a-entity",{position:"0 0 -0.22",visible:"false",className:"pose-label",text:"value: Hello World; align: center;"})),It.createElement("a-entity",{"data-left":"ray",mixin:"blink",cursor:"",raycaster:"objects:[html];far:0.3;showLine:false;lineColor:black;"},It.createElement("a-entity",{position:"0 0 -0.22",visible:"false",className:"pose-label",text:"value: Hello World; align: center;"})),It.createElement("a-entity",{id:"left-no-magnet","data-left":"grip","data-no-magnet":!0},It.createElement("a-entity",{html:"html:#my-interface;cursor:#cursor",position:"-0.142 -0.0166 -0.02928",rotation:"-80 90 0",scale:"0.7 0.7 0.7"})),It.createElement("a-entity",{id:"right-no-magnet","data-right":"grip","data-no-magnet":!0}))),It.createElement(vw,null));Og.createRoot(document.getElementById("app")).render(It.createElement(It.StrictMode,null,It.createElement(Kg,null,It.createElement(xw,null))));
